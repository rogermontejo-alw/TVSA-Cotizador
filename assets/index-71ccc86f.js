(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function zp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kd={exports:{}},Ha={},Xd={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=Symbol.for("react.element"),$p=Symbol.for("react.portal"),Dp=Symbol.for("react.fragment"),Lp=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),Up=Symbol.for("react.provider"),Fp=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),Wp=Symbol.for("react.memo"),Hp=Symbol.for("react.lazy"),uc=Symbol.iterator;function Gp(e){return e===null||typeof e!="object"?null:(e=uc&&e[uc]||e["@@iterator"],typeof e=="function"?e:null)}var Jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qd=Object.assign,Yd={};function vs(e,t,r){this.props=e,this.context=t,this.refs=Yd,this.updater=r||Jd}vs.prototype.isReactComponent={};vs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Zd(){}Zd.prototype=vs.prototype;function ll(e,t,r){this.props=e,this.context=t,this.refs=Yd,this.updater=r||Jd}var cl=ll.prototype=new Zd;cl.constructor=ll;Qd(cl,vs.prototype);cl.isPureReactComponent=!0;var hc=Array.isArray,eu=Object.prototype.hasOwnProperty,dl={current:null},tu={key:!0,ref:!0,__self:!0,__source:!0};function ru(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)eu.call(t,n)&&!tu.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Nn,type:e,key:i,ref:o,props:a,_owner:dl.current}}function qp(e,t){return{$$typeof:Nn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ul(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nn}function Kp(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var pc=/\/+/g;function mi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kp(""+e.key):t.toString(36)}function ta(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Nn:case $p:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+mi(o,0):n,hc(a)?(r="",e!=null&&(r=e.replace(pc,"$&/")+"/"),ta(a,t,r,"",function(d){return d})):a!=null&&(ul(a)&&(a=qp(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(pc,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",hc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+mi(i,l);o+=ta(i,t,r,c,a)}else if(c=Gp(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+mi(i,l++),o+=ta(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function On(e,t,r){if(e==null)return e;var n=[],a=0;return ta(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Xp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oe={current:null},ra={transition:null},Jp={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:ra,ReactCurrentOwner:dl};function su(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:On,forEach:function(e,t,r){On(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return On(e,function(){t++}),t},toArray:function(e){return On(e,function(t){return t})||[]},only:function(e){if(!ul(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=vs;X.Fragment=Dp;X.Profiler=Mp;X.PureComponent=ll;X.StrictMode=Lp;X.Suspense=Bp;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jp;X.act=su;X.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Qd({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=dl.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)eu.call(t,c)&&!tu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Nn,type:e.type,key:a,ref:i,props:n,_owner:o}};X.createContext=function(e){return e={$$typeof:Fp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Up,_context:e},e.Consumer=e};X.createElement=ru;X.createFactory=function(e){var t=ru.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:Vp,render:e}};X.isValidElement=ul;X.lazy=function(e){return{$$typeof:Hp,_payload:{_status:-1,_result:e},_init:Xp}};X.memo=function(e,t){return{$$typeof:Wp,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=ra.transition;ra.transition={};try{e()}finally{ra.transition=t}};X.unstable_act=su;X.useCallback=function(e,t){return Oe.current.useCallback(e,t)};X.useContext=function(e){return Oe.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Oe.current.useDeferredValue(e)};X.useEffect=function(e,t){return Oe.current.useEffect(e,t)};X.useId=function(){return Oe.current.useId()};X.useImperativeHandle=function(e,t,r){return Oe.current.useImperativeHandle(e,t,r)};X.useInsertionEffect=function(e,t){return Oe.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Oe.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Oe.current.useMemo(e,t)};X.useReducer=function(e,t,r){return Oe.current.useReducer(e,t,r)};X.useRef=function(e){return Oe.current.useRef(e)};X.useState=function(e){return Oe.current.useState(e)};X.useSyncExternalStore=function(e,t,r){return Oe.current.useSyncExternalStore(e,t,r)};X.useTransition=function(){return Oe.current.useTransition()};X.version="18.3.1";Xd.exports=X;var P=Xd.exports;const Ga=zp(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=P,Yp=Symbol.for("react.element"),Zp=Symbol.for("react.fragment"),ef=Object.prototype.hasOwnProperty,tf=Qp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rf={key:!0,ref:!0,__self:!0,__source:!0};function nu(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)ef.call(t,n)&&!rf.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Yp,type:e,key:i,ref:o,props:a,_owner:tf.current}}Ha.Fragment=Zp;Ha.jsx=nu;Ha.jsxs=nu;Kd.exports=Ha;var s=Kd.exports,Yi={},au={exports:{}},Je={},iu={exports:{}},ou={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,z){var D=A.length;A.push(z);e:for(;0<D;){var $=D-1>>>1,H=A[$];if(0<a(H,z))A[$]=z,A[D]=H,D=$;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var z=A[0],D=A.pop();if(D!==z){A[0]=D;e:for(var $=0,H=A.length,K=H>>>1;$<K;){var Q=2*($+1)-1,ue=A[Q],me=Q+1,Pe=A[me];if(0>a(ue,D))me<H&&0>a(Pe,ue)?(A[$]=Pe,A[me]=D,$=me):(A[$]=ue,A[Q]=D,$=Q);else if(me<H&&0>a(Pe,D))A[$]=Pe,A[me]=D,$=me;else break e}}return z}function a(A,z){var D=A.sortIndex-z.sortIndex;return D!==0?D:A.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,x=null,f=3,v=!1,g=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(A){for(var z=r(d);z!==null;){if(z.callback===null)n(d);else if(z.startTime<=A)n(d),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(d)}}function j(A){if(w=!1,p(A),!g)if(r(c)!==null)g=!0,E(_);else{var z=r(d);z!==null&&U(j,z.startTime-A)}}function _(A,z){g=!1,w&&(w=!1,m(N),N=-1),v=!0;var D=f;try{for(p(z),x=r(c);x!==null&&(!(x.expirationTime>z)||A&&!O());){var $=x.callback;if(typeof $=="function"){x.callback=null,f=x.priorityLevel;var H=$(x.expirationTime<=z);z=e.unstable_now(),typeof H=="function"?x.callback=H:x===r(c)&&n(c),p(z)}else n(c);x=r(c)}if(x!==null)var K=!0;else{var Q=r(d);Q!==null&&U(j,Q.startTime-z),K=!1}return K}finally{x=null,f=D,v=!1}}var b=!1,y=null,N=-1,S=5,T=-1;function O(){return!(e.unstable_now()-T<S)}function C(){if(y!==null){var A=e.unstable_now();T=A;var z=!0;try{z=y(!0,A)}finally{z?L():(b=!1,y=null)}}else b=!1}var L;if(typeof u=="function")L=function(){u(C)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,R=B.port2;B.port1.onmessage=C,L=function(){R.postMessage(null)}}else L=function(){k(C,0)};function E(A){y=A,b||(b=!0,L())}function U(A,z){N=k(function(){A(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||v||(g=!0,E(_))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var D=f;f=z;try{return A()}finally{f=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var D=f;f=A;try{return z()}finally{f=D}},e.unstable_scheduleCallback=function(A,z,D){var $=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?$+D:$):D=$,A){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=D+H,A={id:h++,callback:z,priorityLevel:A,startTime:D,expirationTime:H,sortIndex:-1},D>$?(A.sortIndex=D,t(d,A),r(c)===null&&A===r(d)&&(w?(m(N),N=-1):w=!0,U(j,D-$))):(A.sortIndex=H,t(c,A),g||v||(g=!0,E(_))),A},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(A){var z=f;return function(){var D=f;f=z;try{return A.apply(this,arguments)}finally{f=D}}}})(ou);iu.exports=ou;var sf=iu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=P,Xe=sf;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lu=new Set,Qs={};function Pr(e,t){ds(e,t),ds(e+"Capture",t)}function ds(e,t){for(Qs[e]=t,e=0;e<t.length;e++)lu.add(t[e])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zi=Object.prototype.hasOwnProperty,af=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fc={},mc={};function of(e){return Zi.call(mc,e)?!0:Zi.call(fc,e)?!1:af.test(e)?mc[e]=!0:(fc[e]=!0,!1)}function lf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cf(e,t,r,n){if(t===null||typeof t>"u"||lf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ie(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_e[e]=new Ie(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_e[t]=new Ie(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_e[e]=new Ie(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_e[e]=new Ie(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_e[e]=new Ie(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_e[e]=new Ie(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_e[e]=new Ie(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_e[e]=new Ie(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_e[e]=new Ie(e,5,!1,e.toLowerCase(),null,!1,!1)});var hl=/[\-:]([a-z])/g;function pl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hl,pl);_e[t]=new Ie(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hl,pl);_e[t]=new Ie(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hl,pl);_e[t]=new Ie(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_e[e]=new Ie(e,1,!1,e.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_e[e]=new Ie(e,1,!1,e.toLowerCase(),null,!0,!0)});function fl(e,t,r,n){var a=_e.hasOwnProperty(t)?_e[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cf(t,r,a,n)&&(r=null),n||a===null?of(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Dt=nf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,In=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),eo=Symbol.for("react.profiler"),cu=Symbol.for("react.provider"),du=Symbol.for("react.context"),xl=Symbol.for("react.forward_ref"),to=Symbol.for("react.suspense"),ro=Symbol.for("react.suspense_list"),gl=Symbol.for("react.memo"),Ut=Symbol.for("react.lazy"),uu=Symbol.for("react.offscreen"),xc=Symbol.iterator;function _s(e){return e===null||typeof e!="object"?null:(e=xc&&e[xc]||e["@@iterator"],typeof e=="function"?e:null)}var le=Object.assign,xi;function Os(e){if(xi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);xi=t&&t[1]||""}return`
`+xi+e}var gi=!1;function vi(e,t){if(!e||gi)return"";gi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{gi=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Os(e):""}function df(e){switch(e.tag){case 5:return Os(e.type);case 16:return Os("Lazy");case 13:return Os("Suspense");case 19:return Os("SuspenseList");case 0:case 2:case 15:return e=vi(e.type,!1),e;case 11:return e=vi(e.type.render,!1),e;case 1:return e=vi(e.type,!0),e;default:return""}}function so(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hr:return"Fragment";case Wr:return"Portal";case eo:return"Profiler";case ml:return"StrictMode";case to:return"Suspense";case ro:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case du:return(e.displayName||"Context")+".Consumer";case cu:return(e._context.displayName||"Context")+".Provider";case xl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gl:return t=e.displayName||null,t!==null?t:so(e.type)||"Memo";case Ut:t=e._payload,e=e._init;try{return so(e(t))}catch{}}return null}function uf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return so(t);case 8:return t===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hf(e){var t=hu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zn(e){e._valueTracker||(e._valueTracker=hf(e))}function pu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=hu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function pa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function no(e,t){var r=t.checked;return le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function gc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=sr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fu(e,t){t=t.checked,t!=null&&fl(e,"checked",t,!1)}function ao(e,t){fu(e,t);var r=sr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?io(e,t.type,r):t.hasOwnProperty("defaultValue")&&io(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function io(e,t,r){(t!=="number"||pa(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Is=Array.isArray;function ss(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+sr(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function oo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function bc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(I(92));if(Is(r)){if(1<r.length)throw Error(I(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:sr(r)}}function mu(e,t){var r=sr(t.value),n=sr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function yc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $n,gu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$n.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ys(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pf=["Webkit","ms","Moz","O"];Object.keys(Ls).forEach(function(e){pf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ls[t]=Ls[e]})});function vu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ls.hasOwnProperty(e)&&Ls[e]?(""+t).trim():t+"px"}function bu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=vu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var ff=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function co(e,t){if(t){if(ff[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function uo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ho=null;function vl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var po=null,ns=null,as=null;function wc(e){if(e=Cn(e)){if(typeof po!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Qa(t),po(e.stateNode,e.type,t))}}function yu(e){ns?as?as.push(e):as=[e]:ns=e}function wu(){if(ns){var e=ns,t=as;if(as=ns=null,wc(e),t)for(e=0;e<t.length;e++)wc(t[e])}}function ju(e,t){return e(t)}function ku(){}var bi=!1;function Nu(e,t,r){if(bi)return e(t,r);bi=!0;try{return ju(e,t,r)}finally{bi=!1,(ns!==null||as!==null)&&(ku(),wu())}}function Zs(e,t){var r=e.stateNode;if(r===null)return null;var n=Qa(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(I(231,t,typeof r));return r}var fo=!1;if(Rt)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){fo=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{fo=!1}function mf(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(h){this.onError(h)}}var Ms=!1,fa=null,ma=!1,mo=null,xf={onError:function(e){Ms=!0,fa=e}};function gf(e,t,r,n,a,i,o,l,c){Ms=!1,fa=null,mf.apply(xf,arguments)}function vf(e,t,r,n,a,i,o,l,c){if(gf.apply(this,arguments),Ms){if(Ms){var d=fa;Ms=!1,fa=null}else throw Error(I(198));ma||(ma=!0,mo=d)}}function Ar(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _u(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function jc(e){if(Ar(e)!==e)throw Error(I(188))}function bf(e){var t=e.alternate;if(!t){if(t=Ar(e),t===null)throw Error(I(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return jc(a),e;if(i===n)return jc(a),t;i=i.sibling}throw Error(I(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(I(189))}}if(r.alternate!==n)throw Error(I(190))}if(r.tag!==3)throw Error(I(188));return r.stateNode.current===r?e:t}function Su(e){return e=bf(e),e!==null?Cu(e):null}function Cu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cu(e);if(t!==null)return t;e=e.sibling}return null}var Eu=Xe.unstable_scheduleCallback,kc=Xe.unstable_cancelCallback,yf=Xe.unstable_shouldYield,wf=Xe.unstable_requestPaint,he=Xe.unstable_now,jf=Xe.unstable_getCurrentPriorityLevel,bl=Xe.unstable_ImmediatePriority,Tu=Xe.unstable_UserBlockingPriority,xa=Xe.unstable_NormalPriority,kf=Xe.unstable_LowPriority,Pu=Xe.unstable_IdlePriority,qa=null,yt=null;function Nf(e){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(qa,e,void 0,(e.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:Cf,_f=Math.log,Sf=Math.LN2;function Cf(e){return e>>>=0,e===0?32:31-(_f(e)/Sf|0)|0}var Dn=64,Ln=4194304;function zs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ga(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=zs(l):(i&=o,i!==0&&(n=zs(i)))}else o=r&~a,o!==0?n=zs(o):i!==0&&(n=zs(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-pt(t),a=1<<r,n|=e[r],t&=~a;return n}function Ef(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tf(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-pt(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=Ef(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function xo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Au(){var e=Dn;return Dn<<=1,!(Dn&4194240)&&(Dn=64),e}function yi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _n(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-pt(t),e[t]=r}function Pf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-pt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function yl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-pt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Y=0;function Ru(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ou,wl,Iu,zu,$u,go=!1,Mn=[],Kt=null,Xt=null,Jt=null,en=new Map,tn=new Map,Bt=[],Af="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nc(e,t){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":en.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tn.delete(t.pointerId)}}function Cs(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Cn(t),t!==null&&wl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Rf(e,t,r,n,a){switch(t){case"focusin":return Kt=Cs(Kt,e,t,r,n,a),!0;case"dragenter":return Xt=Cs(Xt,e,t,r,n,a),!0;case"mouseover":return Jt=Cs(Jt,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return en.set(i,Cs(en.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,tn.set(i,Cs(tn.get(i)||null,e,t,r,n,a)),!0}return!1}function Du(e){var t=gr(e.target);if(t!==null){var r=Ar(t);if(r!==null){if(t=r.tag,t===13){if(t=_u(r),t!==null){e.blockedOn=t,$u(e.priority,function(){Iu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ho=n,r.target.dispatchEvent(n),ho=null}else return t=Cn(r),t!==null&&wl(t),e.blockedOn=r,!1;t.shift()}return!0}function _c(e,t,r){sa(e)&&r.delete(t)}function Of(){go=!1,Kt!==null&&sa(Kt)&&(Kt=null),Xt!==null&&sa(Xt)&&(Xt=null),Jt!==null&&sa(Jt)&&(Jt=null),en.forEach(_c),tn.forEach(_c)}function Es(e,t){e.blockedOn===t&&(e.blockedOn=null,go||(go=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,Of)))}function rn(e){function t(a){return Es(a,e)}if(0<Mn.length){Es(Mn[0],e);for(var r=1;r<Mn.length;r++){var n=Mn[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Kt!==null&&Es(Kt,e),Xt!==null&&Es(Xt,e),Jt!==null&&Es(Jt,e),en.forEach(t),tn.forEach(t),r=0;r<Bt.length;r++)n=Bt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Bt.length&&(r=Bt[0],r.blockedOn===null);)Du(r),r.blockedOn===null&&Bt.shift()}var is=Dt.ReactCurrentBatchConfig,va=!0;function If(e,t,r,n){var a=Y,i=is.transition;is.transition=null;try{Y=1,jl(e,t,r,n)}finally{Y=a,is.transition=i}}function zf(e,t,r,n){var a=Y,i=is.transition;is.transition=null;try{Y=4,jl(e,t,r,n)}finally{Y=a,is.transition=i}}function jl(e,t,r,n){if(va){var a=vo(e,t,r,n);if(a===null)Pi(e,t,n,ba,r),Nc(e,n);else if(Rf(a,e,t,r,n))n.stopPropagation();else if(Nc(e,n),t&4&&-1<Af.indexOf(e)){for(;a!==null;){var i=Cn(a);if(i!==null&&Ou(i),i=vo(e,t,r,n),i===null&&Pi(e,t,n,ba,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Pi(e,t,n,null,r)}}var ba=null;function vo(e,t,r,n){if(ba=null,e=vl(n),e=gr(e),e!==null)if(t=Ar(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_u(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ba=e,null}function Lu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jf()){case bl:return 1;case Tu:return 4;case xa:case kf:return 16;case Pu:return 536870912;default:return 16}default:return 16}}var Gt=null,kl=null,na=null;function Mu(){if(na)return na;var e,t=kl,r=t.length,n,a="value"in Gt?Gt.value:Gt.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return na=a.slice(e,1<n?1-n:void 0)}function aa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Un(){return!0}function Sc(){return!1}function Qe(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Un:Sc,this.isPropagationStopped=Sc,this}return le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),t}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nl=Qe(bs),Sn=le({},bs,{view:0,detail:0}),$f=Qe(Sn),wi,ji,Ts,Ka=le({},Sn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ts&&(Ts&&e.type==="mousemove"?(wi=e.screenX-Ts.screenX,ji=e.screenY-Ts.screenY):ji=wi=0,Ts=e),wi)},movementY:function(e){return"movementY"in e?e.movementY:ji}}),Cc=Qe(Ka),Df=le({},Ka,{dataTransfer:0}),Lf=Qe(Df),Mf=le({},Sn,{relatedTarget:0}),ki=Qe(Mf),Uf=le({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Ff=Qe(Uf),Vf=le({},bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bf=Qe(Vf),Wf=le({},bs,{data:0}),Ec=Qe(Wf),Hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qf[e])?!!t[e]:!1}function _l(){return Kf}var Xf=le({},Sn,{key:function(e){if(e.key){var t=Hf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=aa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_l,charCode:function(e){return e.type==="keypress"?aa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?aa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jf=Qe(Xf),Qf=le({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tc=Qe(Qf),Yf=le({},Sn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_l}),Zf=Qe(Yf),em=le({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),tm=Qe(em),rm=le({},Ka,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sm=Qe(rm),nm=[9,13,27,32],Sl=Rt&&"CompositionEvent"in window,Us=null;Rt&&"documentMode"in document&&(Us=document.documentMode);var am=Rt&&"TextEvent"in window&&!Us,Uu=Rt&&(!Sl||Us&&8<Us&&11>=Us),Pc=String.fromCharCode(32),Ac=!1;function Fu(e,t){switch(e){case"keyup":return nm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function im(e,t){switch(e){case"compositionend":return Vu(t);case"keypress":return t.which!==32?null:(Ac=!0,Pc);case"textInput":return e=t.data,e===Pc&&Ac?null:e;default:return null}}function om(e,t){if(Gr)return e==="compositionend"||!Sl&&Fu(e,t)?(e=Mu(),na=kl=Gt=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Uu&&t.locale!=="ko"?null:t.data;default:return null}}var lm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!lm[e.type]:t==="textarea"}function Bu(e,t,r,n){yu(n),t=ya(t,"onChange"),0<t.length&&(r=new Nl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Fs=null,sn=null;function cm(e){eh(e,0)}function Xa(e){var t=Xr(e);if(pu(t))return e}function dm(e,t){if(e==="change")return t}var Wu=!1;if(Rt){var Ni;if(Rt){var _i="oninput"in document;if(!_i){var Oc=document.createElement("div");Oc.setAttribute("oninput","return;"),_i=typeof Oc.oninput=="function"}Ni=_i}else Ni=!1;Wu=Ni&&(!document.documentMode||9<document.documentMode)}function Ic(){Fs&&(Fs.detachEvent("onpropertychange",Hu),sn=Fs=null)}function Hu(e){if(e.propertyName==="value"&&Xa(sn)){var t=[];Bu(t,sn,e,vl(e)),Nu(cm,t)}}function um(e,t,r){e==="focusin"?(Ic(),Fs=t,sn=r,Fs.attachEvent("onpropertychange",Hu)):e==="focusout"&&Ic()}function hm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xa(sn)}function pm(e,t){if(e==="click")return Xa(t)}function fm(e,t){if(e==="input"||e==="change")return Xa(t)}function mm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mt=typeof Object.is=="function"?Object.is:mm;function nn(e,t){if(mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Zi.call(t,a)||!mt(e[a],t[a]))return!1}return!0}function zc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $c(e,t){var r=zc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zc(r)}}function Gu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qu(){for(var e=window,t=pa();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=pa(e.document)}return t}function Cl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function xm(e){var t=qu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Gu(r.ownerDocument.documentElement,r)){if(n!==null&&Cl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=$c(r,i);var o=$c(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gm=Rt&&"documentMode"in document&&11>=document.documentMode,qr=null,bo=null,Vs=null,yo=!1;function Dc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yo||qr==null||qr!==pa(n)||(n=qr,"selectionStart"in n&&Cl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vs&&nn(Vs,n)||(Vs=n,n=ya(bo,"onSelect"),0<n.length&&(t=new Nl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qr)))}function Fn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Kr={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionend:Fn("Transition","TransitionEnd")},Si={},Ku={};Rt&&(Ku=document.createElement("div").style,"AnimationEvent"in window||(delete Kr.animationend.animation,delete Kr.animationiteration.animation,delete Kr.animationstart.animation),"TransitionEvent"in window||delete Kr.transitionend.transition);function Ja(e){if(Si[e])return Si[e];if(!Kr[e])return e;var t=Kr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ku)return Si[e]=t[r];return e}var Xu=Ja("animationend"),Ju=Ja("animationiteration"),Qu=Ja("animationstart"),Yu=Ja("transitionend"),Zu=new Map,Lc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){Zu.set(e,t),Pr(t,[e])}for(var Ci=0;Ci<Lc.length;Ci++){var Ei=Lc[Ci],vm=Ei.toLowerCase(),bm=Ei[0].toUpperCase()+Ei.slice(1);ir(vm,"on"+bm)}ir(Xu,"onAnimationEnd");ir(Ju,"onAnimationIteration");ir(Qu,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(Yu,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ym=new Set("cancel close invalid load scroll toggle".split(" ").concat($s));function Mc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,vf(n,t,void 0,e),e.currentTarget=null}function eh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Mc(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Mc(a,l,d),i=c}}}if(ma)throw e=mo,ma=!1,mo=null,e}function te(e,t){var r=t[_o];r===void 0&&(r=t[_o]=new Set);var n=e+"__bubble";r.has(n)||(th(t,e,2,!1),r.add(n))}function Ti(e,t,r){var n=0;t&&(n|=4),th(r,e,n,t)}var Vn="_reactListening"+Math.random().toString(36).slice(2);function an(e){if(!e[Vn]){e[Vn]=!0,lu.forEach(function(r){r!=="selectionchange"&&(ym.has(r)||Ti(r,!1,e),Ti(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vn]||(t[Vn]=!0,Ti("selectionchange",!1,t))}}function th(e,t,r,n){switch(Lu(t)){case 1:var a=If;break;case 4:a=zf;break;default:a=jl}r=a.bind(null,t,r,e),a=void 0,!fo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Pi(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=gr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Nu(function(){var d=i,h=vl(r),x=[];e:{var f=Zu.get(e);if(f!==void 0){var v=Nl,g=e;switch(e){case"keypress":if(aa(r)===0)break e;case"keydown":case"keyup":v=Jf;break;case"focusin":g="focus",v=ki;break;case"focusout":g="blur",v=ki;break;case"beforeblur":case"afterblur":v=ki;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Zf;break;case Xu:case Ju:case Qu:v=Ff;break;case Yu:v=tm;break;case"scroll":v=$f;break;case"wheel":v=sm;break;case"copy":case"cut":case"paste":v=Bf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Tc}var w=(t&4)!==0,k=!w&&e==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var u=d,p;u!==null;){p=u;var j=p.stateNode;if(p.tag===5&&j!==null&&(p=j,m!==null&&(j=Zs(u,m),j!=null&&w.push(on(u,j,p)))),k)break;u=u.return}0<w.length&&(f=new v(f,g,null,r,h),x.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&r!==ho&&(g=r.relatedTarget||r.fromElement)&&(gr(g)||g[Ot]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(g=r.relatedTarget||r.toElement,v=d,g=g?gr(g):null,g!==null&&(k=Ar(g),g!==k||g.tag!==5&&g.tag!==6)&&(g=null)):(v=null,g=d),v!==g)){if(w=Cc,j="onMouseLeave",m="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(w=Tc,j="onPointerLeave",m="onPointerEnter",u="pointer"),k=v==null?f:Xr(v),p=g==null?f:Xr(g),f=new w(j,u+"leave",v,r,h),f.target=k,f.relatedTarget=p,j=null,gr(h)===d&&(w=new w(m,u+"enter",g,r,h),w.target=p,w.relatedTarget=k,j=w),k=j,v&&g)t:{for(w=v,m=g,u=0,p=w;p;p=Ir(p))u++;for(p=0,j=m;j;j=Ir(j))p++;for(;0<u-p;)w=Ir(w),u--;for(;0<p-u;)m=Ir(m),p--;for(;u--;){if(w===m||m!==null&&w===m.alternate)break t;w=Ir(w),m=Ir(m)}w=null}else w=null;v!==null&&Uc(x,f,v,w,!1),g!==null&&k!==null&&Uc(x,k,g,w,!0)}}e:{if(f=d?Xr(d):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var _=dm;else if(Rc(f))if(Wu)_=fm;else{_=hm;var b=um}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=pm);if(_&&(_=_(e,d))){Bu(x,_,r,h);break e}b&&b(e,f,d),e==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&io(f,"number",f.value)}switch(b=d?Xr(d):window,e){case"focusin":(Rc(b)||b.contentEditable==="true")&&(qr=b,bo=d,Vs=null);break;case"focusout":Vs=bo=qr=null;break;case"mousedown":yo=!0;break;case"contextmenu":case"mouseup":case"dragend":yo=!1,Dc(x,r,h);break;case"selectionchange":if(gm)break;case"keydown":case"keyup":Dc(x,r,h)}var y;if(Sl)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Gr?Fu(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Uu&&r.locale!=="ko"&&(Gr||N!=="onCompositionStart"?N==="onCompositionEnd"&&Gr&&(y=Mu()):(Gt=h,kl="value"in Gt?Gt.value:Gt.textContent,Gr=!0)),b=ya(d,N),0<b.length&&(N=new Ec(N,e,null,r,h),x.push({event:N,listeners:b}),y?N.data=y:(y=Vu(r),y!==null&&(N.data=y)))),(y=am?im(e,r):om(e,r))&&(d=ya(d,"onBeforeInput"),0<d.length&&(h=new Ec("onBeforeInput","beforeinput",null,r,h),x.push({event:h,listeners:d}),h.data=y))}eh(x,t)})}function on(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ya(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Zs(e,r),i!=null&&n.unshift(on(e,i,a)),i=Zs(e,t),i!=null&&n.push(on(e,i,a))),e=e.return}return n}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uc(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Zs(r,i),c!=null&&o.unshift(on(r,c,l))):a||(c=Zs(r,i),c!=null&&o.push(on(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var wm=/\r\n?/g,jm=/\u0000|\uFFFD/g;function Fc(e){return(typeof e=="string"?e:""+e).replace(wm,`
`).replace(jm,"")}function Bn(e,t,r){if(t=Fc(t),Fc(e)!==t&&r)throw Error(I(425))}function wa(){}var wo=null,jo=null;function ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var No=typeof setTimeout=="function"?setTimeout:void 0,km=typeof clearTimeout=="function"?clearTimeout:void 0,Vc=typeof Promise=="function"?Promise:void 0,Nm=typeof queueMicrotask=="function"?queueMicrotask:typeof Vc<"u"?function(e){return Vc.resolve(null).then(e).catch(_m)}:No;function _m(e){setTimeout(function(){throw e})}function Ai(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),rn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);rn(t)}function Qt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ys=Math.random().toString(36).slice(2),bt="__reactFiber$"+ys,ln="__reactProps$"+ys,Ot="__reactContainer$"+ys,_o="__reactEvents$"+ys,Sm="__reactListeners$"+ys,Cm="__reactHandles$"+ys;function gr(e){var t=e[bt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ot]||r[bt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bc(e);e!==null;){if(r=e[bt])return r;e=Bc(e)}return t}e=r,r=e.parentNode}return null}function Cn(e){return e=e[bt]||e[Ot],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Qa(e){return e[ln]||null}var So=[],Jr=-1;function or(e){return{current:e}}function se(e){0>Jr||(e.current=So[Jr],So[Jr]=null,Jr--)}function ee(e,t){Jr++,So[Jr]=e.current,e.current=t}var nr={},Te=or(nr),Me=or(!1),kr=nr;function us(e,t){var r=e.type.contextTypes;if(!r)return nr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ue(e){return e=e.childContextTypes,e!=null}function ja(){se(Me),se(Te)}function Wc(e,t,r){if(Te.current!==nr)throw Error(I(168));ee(Te,t),ee(Me,r)}function rh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(I(108,uf(e)||"Unknown",a));return le({},r,n)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nr,kr=Te.current,ee(Te,e),ee(Me,Me.current),!0}function Hc(e,t,r){var n=e.stateNode;if(!n)throw Error(I(169));r?(e=rh(e,t,kr),n.__reactInternalMemoizedMergedChildContext=e,se(Me),se(Te),ee(Te,e)):se(Me),ee(Me,r)}var Ct=null,Ya=!1,Ri=!1;function sh(e){Ct===null?Ct=[e]:Ct.push(e)}function Em(e){Ya=!0,sh(e)}function lr(){if(!Ri&&Ct!==null){Ri=!0;var e=0,t=Y;try{var r=Ct;for(Y=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ct=null,Ya=!1}catch(a){throw Ct!==null&&(Ct=Ct.slice(e+1)),Eu(bl,lr),a}finally{Y=t,Ri=!1}}return null}var Qr=[],Yr=0,Na=null,_a=0,Ye=[],Ze=0,Nr=null,Et=1,Tt="";function hr(e,t){Qr[Yr++]=_a,Qr[Yr++]=Na,Na=e,_a=t}function nh(e,t,r){Ye[Ze++]=Et,Ye[Ze++]=Tt,Ye[Ze++]=Nr,Nr=e;var n=Et;e=Tt;var a=32-pt(n)-1;n&=~(1<<a),r+=1;var i=32-pt(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Et=1<<32-pt(t)+a|r<<a|n,Tt=i+e}else Et=1<<i|r<<a|n,Tt=e}function El(e){e.return!==null&&(hr(e,1),nh(e,1,0))}function Tl(e){for(;e===Na;)Na=Qr[--Yr],Qr[Yr]=null,_a=Qr[--Yr],Qr[Yr]=null;for(;e===Nr;)Nr=Ye[--Ze],Ye[Ze]=null,Tt=Ye[--Ze],Ye[Ze]=null,Et=Ye[--Ze],Ye[Ze]=null}var qe=null,Ge=null,ne=!1,ht=null;function ah(e,t){var r=et(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Gc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,Ge=Qt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,Ge=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Nr!==null?{id:Et,overflow:Tt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=et(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qe=e,Ge=null,!0):!1;default:return!1}}function Co(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eo(e){if(ne){var t=Ge;if(t){var r=t;if(!Gc(e,t)){if(Co(e))throw Error(I(418));t=Qt(r.nextSibling);var n=qe;t&&Gc(e,t)?ah(n,r):(e.flags=e.flags&-4097|2,ne=!1,qe=e)}}else{if(Co(e))throw Error(I(418));e.flags=e.flags&-4097|2,ne=!1,qe=e}}}function qc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function Wn(e){if(e!==qe)return!1;if(!ne)return qc(e),ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ko(e.type,e.memoizedProps)),t&&(t=Ge)){if(Co(e))throw ih(),Error(I(418));for(;t;)ah(e,t),t=Qt(t.nextSibling)}if(qc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ge=Qt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ge=null}}else Ge=qe?Qt(e.stateNode.nextSibling):null;return!0}function ih(){for(var e=Ge;e;)e=Qt(e.nextSibling)}function hs(){Ge=qe=null,ne=!1}function Pl(e){ht===null?ht=[e]:ht.push(e)}var Tm=Dt.ReactCurrentBatchConfig;function Ps(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(I(309));var n=r.stateNode}if(!n)throw Error(I(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(I(284));if(!r._owner)throw Error(I(290,e))}return e}function Hn(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Kc(e){var t=e._init;return t(e._payload)}function oh(e){function t(m,u){if(e){var p=m.deletions;p===null?(m.deletions=[u],m.flags|=16):p.push(u)}}function r(m,u){if(!e)return null;for(;u!==null;)t(m,u),u=u.sibling;return null}function n(m,u){for(m=new Map;u!==null;)u.key!==null?m.set(u.key,u):m.set(u.index,u),u=u.sibling;return m}function a(m,u){return m=tr(m,u),m.index=0,m.sibling=null,m}function i(m,u,p){return m.index=p,e?(p=m.alternate,p!==null?(p=p.index,p<u?(m.flags|=2,u):p):(m.flags|=2,u)):(m.flags|=1048576,u)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,u,p,j){return u===null||u.tag!==6?(u=Mi(p,m.mode,j),u.return=m,u):(u=a(u,p),u.return=m,u)}function c(m,u,p,j){var _=p.type;return _===Hr?h(m,u,p.props.children,j,p.key):u!==null&&(u.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ut&&Kc(_)===u.type)?(j=a(u,p.props),j.ref=Ps(m,u,p),j.return=m,j):(j=ha(p.type,p.key,p.props,null,m.mode,j),j.ref=Ps(m,u,p),j.return=m,j)}function d(m,u,p,j){return u===null||u.tag!==4||u.stateNode.containerInfo!==p.containerInfo||u.stateNode.implementation!==p.implementation?(u=Ui(p,m.mode,j),u.return=m,u):(u=a(u,p.children||[]),u.return=m,u)}function h(m,u,p,j,_){return u===null||u.tag!==7?(u=jr(p,m.mode,j,_),u.return=m,u):(u=a(u,p),u.return=m,u)}function x(m,u,p){if(typeof u=="string"&&u!==""||typeof u=="number")return u=Mi(""+u,m.mode,p),u.return=m,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case In:return p=ha(u.type,u.key,u.props,null,m.mode,p),p.ref=Ps(m,null,u),p.return=m,p;case Wr:return u=Ui(u,m.mode,p),u.return=m,u;case Ut:var j=u._init;return x(m,j(u._payload),p)}if(Is(u)||_s(u))return u=jr(u,m.mode,p,null),u.return=m,u;Hn(m,u)}return null}function f(m,u,p,j){var _=u!==null?u.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return _!==null?null:l(m,u,""+p,j);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case In:return p.key===_?c(m,u,p,j):null;case Wr:return p.key===_?d(m,u,p,j):null;case Ut:return _=p._init,f(m,u,_(p._payload),j)}if(Is(p)||_s(p))return _!==null?null:h(m,u,p,j,null);Hn(m,p)}return null}function v(m,u,p,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(p)||null,l(u,m,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case In:return m=m.get(j.key===null?p:j.key)||null,c(u,m,j,_);case Wr:return m=m.get(j.key===null?p:j.key)||null,d(u,m,j,_);case Ut:var b=j._init;return v(m,u,p,b(j._payload),_)}if(Is(j)||_s(j))return m=m.get(p)||null,h(u,m,j,_,null);Hn(u,j)}return null}function g(m,u,p,j){for(var _=null,b=null,y=u,N=u=0,S=null;y!==null&&N<p.length;N++){y.index>N?(S=y,y=null):S=y.sibling;var T=f(m,y,p[N],j);if(T===null){y===null&&(y=S);break}e&&y&&T.alternate===null&&t(m,y),u=i(T,u,N),b===null?_=T:b.sibling=T,b=T,y=S}if(N===p.length)return r(m,y),ne&&hr(m,N),_;if(y===null){for(;N<p.length;N++)y=x(m,p[N],j),y!==null&&(u=i(y,u,N),b===null?_=y:b.sibling=y,b=y);return ne&&hr(m,N),_}for(y=n(m,y);N<p.length;N++)S=v(y,m,N,p[N],j),S!==null&&(e&&S.alternate!==null&&y.delete(S.key===null?N:S.key),u=i(S,u,N),b===null?_=S:b.sibling=S,b=S);return e&&y.forEach(function(O){return t(m,O)}),ne&&hr(m,N),_}function w(m,u,p,j){var _=_s(p);if(typeof _!="function")throw Error(I(150));if(p=_.call(p),p==null)throw Error(I(151));for(var b=_=null,y=u,N=u=0,S=null,T=p.next();y!==null&&!T.done;N++,T=p.next()){y.index>N?(S=y,y=null):S=y.sibling;var O=f(m,y,T.value,j);if(O===null){y===null&&(y=S);break}e&&y&&O.alternate===null&&t(m,y),u=i(O,u,N),b===null?_=O:b.sibling=O,b=O,y=S}if(T.done)return r(m,y),ne&&hr(m,N),_;if(y===null){for(;!T.done;N++,T=p.next())T=x(m,T.value,j),T!==null&&(u=i(T,u,N),b===null?_=T:b.sibling=T,b=T);return ne&&hr(m,N),_}for(y=n(m,y);!T.done;N++,T=p.next())T=v(y,m,N,T.value,j),T!==null&&(e&&T.alternate!==null&&y.delete(T.key===null?N:T.key),u=i(T,u,N),b===null?_=T:b.sibling=T,b=T);return e&&y.forEach(function(C){return t(m,C)}),ne&&hr(m,N),_}function k(m,u,p,j){if(typeof p=="object"&&p!==null&&p.type===Hr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case In:e:{for(var _=p.key,b=u;b!==null;){if(b.key===_){if(_=p.type,_===Hr){if(b.tag===7){r(m,b.sibling),u=a(b,p.props.children),u.return=m,m=u;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Ut&&Kc(_)===b.type){r(m,b.sibling),u=a(b,p.props),u.ref=Ps(m,b,p),u.return=m,m=u;break e}r(m,b);break}else t(m,b);b=b.sibling}p.type===Hr?(u=jr(p.props.children,m.mode,j,p.key),u.return=m,m=u):(j=ha(p.type,p.key,p.props,null,m.mode,j),j.ref=Ps(m,u,p),j.return=m,m=j)}return o(m);case Wr:e:{for(b=p.key;u!==null;){if(u.key===b)if(u.tag===4&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){r(m,u.sibling),u=a(u,p.children||[]),u.return=m,m=u;break e}else{r(m,u);break}else t(m,u);u=u.sibling}u=Ui(p,m.mode,j),u.return=m,m=u}return o(m);case Ut:return b=p._init,k(m,u,b(p._payload),j)}if(Is(p))return g(m,u,p,j);if(_s(p))return w(m,u,p,j);Hn(m,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,u!==null&&u.tag===6?(r(m,u.sibling),u=a(u,p),u.return=m,m=u):(r(m,u),u=Mi(p,m.mode,j),u.return=m,m=u),o(m)):r(m,u)}return k}var ps=oh(!0),lh=oh(!1),Sa=or(null),Ca=null,Zr=null,Al=null;function Rl(){Al=Zr=Ca=null}function Ol(e){var t=Sa.current;se(Sa),e._currentValue=t}function To(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function os(e,t){Ca=e,Al=Zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function st(e){var t=e._currentValue;if(Al!==e)if(e={context:e,memoizedValue:t,next:null},Zr===null){if(Ca===null)throw Error(I(308));Zr=e,Ca.dependencies={lanes:0,firstContext:e}}else Zr=Zr.next=e;return t}var vr=null;function Il(e){vr===null?vr=[e]:vr.push(e)}function ch(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Il(t)):(r.next=a.next,a.next=r),t.interleaved=r,It(e,n)}function It(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ft=!1;function zl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Yt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,J&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,It(e,r)}return a=n.interleaved,a===null?(t.next=t,Il(n)):(t.next=a.next,a.next=t),n.interleaved=t,It(e,r)}function ia(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yl(e,r)}}function Xc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ea(e,t,r,n){var a=e.updateQueue;Ft=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var x=a.baseState;o=0,h=d=c=null,l=i;do{var f=l.lane,v=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,w=l;switch(f=t,v=r,w.tag){case 1:if(g=w.payload,typeof g=="function"){x=g.call(v,x,f);break e}x=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,f=typeof g=="function"?g.call(v,x,f):g,f==null)break e;x=le({},x,f);break e;case 2:Ft=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=x):h=h.next=v,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(1);if(h===null&&(c=x),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Sr|=o,e.lanes=o,e.memoizedState=x}}function Jc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(I(191,a));a.call(n)}}}var En={},wt=or(En),cn=or(En),dn=or(En);function br(e){if(e===En)throw Error(I(174));return e}function $l(e,t){switch(ee(dn,t),ee(cn,e),ee(wt,En),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lo(t,e)}se(wt),ee(wt,t)}function fs(){se(wt),se(cn),se(dn)}function uh(e){br(dn.current);var t=br(wt.current),r=lo(t,e.type);t!==r&&(ee(cn,e),ee(wt,r))}function Dl(e){cn.current===e&&(se(wt),se(cn))}var ie=or(0);function Ta(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oi=[];function Ll(){for(var e=0;e<Oi.length;e++)Oi[e]._workInProgressVersionPrimary=null;Oi.length=0}var oa=Dt.ReactCurrentDispatcher,Ii=Dt.ReactCurrentBatchConfig,_r=0,oe=null,ge=null,be=null,Pa=!1,Bs=!1,un=0,Pm=0;function Se(){throw Error(I(321))}function Ml(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mt(e[r],t[r]))return!1;return!0}function Ul(e,t,r,n,a,i){if(_r=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=e===null||e.memoizedState===null?Im:zm,e=r(n,a),Bs){i=0;do{if(Bs=!1,un=0,25<=i)throw Error(I(301));i+=1,be=ge=null,t.updateQueue=null,oa.current=$m,e=r(n,a)}while(Bs)}if(oa.current=Aa,t=ge!==null&&ge.next!==null,_r=0,be=ge=oe=null,Pa=!1,t)throw Error(I(300));return e}function Fl(){var e=un!==0;return un=0,e}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?oe.memoizedState=be=e:be=be.next=e,be}function nt(){if(ge===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=ge.next;var t=be===null?oe.memoizedState:be.next;if(t!==null)be=t,ge=e;else{if(e===null)throw Error(I(310));ge=e,e={memoizedState:ge.memoizedState,baseState:ge.baseState,baseQueue:ge.baseQueue,queue:ge.queue,next:null},be===null?oe.memoizedState=be=e:be=be.next=e}return be}function hn(e,t){return typeof t=="function"?t(e):t}function zi(e){var t=nt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=ge,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((_r&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var x={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=x,o=n):c=c.next=x,oe.lanes|=h,Sr|=h}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,mt(n,t.memoizedState)||(Le=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,oe.lanes|=i,Sr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function $i(e){var t=nt(),r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);mt(i,t.memoizedState)||(Le=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function hh(){}function ph(e,t){var r=oe,n=nt(),a=t(),i=!mt(n.memoizedState,a);if(i&&(n.memoizedState=a,Le=!0),n=n.queue,Vl(xh.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||be!==null&&be.memoizedState.tag&1){if(r.flags|=2048,pn(9,mh.bind(null,r,n,a,t),void 0,null),ye===null)throw Error(I(349));_r&30||fh(r,t,a)}return a}function fh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function mh(e,t,r,n){t.value=r,t.getSnapshot=n,gh(t)&&vh(e)}function xh(e,t,r){return r(function(){gh(t)&&vh(e)})}function gh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mt(e,r)}catch{return!0}}function vh(e){var t=It(e,1);t!==null&&ft(t,e,1,-1)}function Qc(e){var t=vt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hn,lastRenderedState:e},t.queue=e,e=e.dispatch=Om.bind(null,oe,e),[t.memoizedState,e]}function pn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function bh(){return nt().memoizedState}function la(e,t,r,n){var a=vt();oe.flags|=e,a.memoizedState=pn(1|t,r,void 0,n===void 0?null:n)}function Za(e,t,r,n){var a=nt();n=n===void 0?null:n;var i=void 0;if(ge!==null){var o=ge.memoizedState;if(i=o.destroy,n!==null&&Ml(n,o.deps)){a.memoizedState=pn(t,r,i,n);return}}oe.flags|=e,a.memoizedState=pn(1|t,r,i,n)}function Yc(e,t){return la(8390656,8,e,t)}function Vl(e,t){return Za(2048,8,e,t)}function yh(e,t){return Za(4,2,e,t)}function wh(e,t){return Za(4,4,e,t)}function jh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kh(e,t,r){return r=r!=null?r.concat([e]):null,Za(4,4,jh.bind(null,t,e),r)}function Bl(){}function Nh(e,t){var r=nt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ml(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function _h(e,t){var r=nt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ml(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Sh(e,t,r){return _r&21?(mt(r,t)||(r=Au(),oe.lanes|=r,Sr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=r)}function Am(e,t){var r=Y;Y=r!==0&&4>r?r:4,e(!0);var n=Ii.transition;Ii.transition={};try{e(!1),t()}finally{Y=r,Ii.transition=n}}function Ch(){return nt().memoizedState}function Rm(e,t,r){var n=er(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Eh(e))Th(t,r);else if(r=ch(e,t,r,n),r!==null){var a=Re();ft(r,e,n,a),Ph(r,t,n)}}function Om(e,t,r){var n=er(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Eh(e))Th(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,mt(l,o)){var c=t.interleaved;c===null?(a.next=a,Il(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=ch(e,t,a,n),r!==null&&(a=Re(),ft(r,e,n,a),Ph(r,t,n))}}function Eh(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function Th(e,t){Bs=Pa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ph(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yl(e,r)}}var Aa={readContext:st,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},Im={readContext:st,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Yc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,la(4194308,4,jh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return la(4194308,4,e,t)},useInsertionEffect:function(e,t){return la(4,2,e,t)},useMemo:function(e,t){var r=vt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=vt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Rm.bind(null,oe,e),[n.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:Qc,useDebugValue:Bl,useDeferredValue:function(e){return vt().memoizedState=e},useTransition:function(){var e=Qc(!1),t=e[0];return e=Am.bind(null,e[1]),vt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=oe,a=vt();if(ne){if(r===void 0)throw Error(I(407));r=r()}else{if(r=t(),ye===null)throw Error(I(349));_r&30||fh(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Yc(xh.bind(null,n,i,e),[e]),n.flags|=2048,pn(9,mh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=vt(),t=ye.identifierPrefix;if(ne){var r=Tt,n=Et;r=(n&~(1<<32-pt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=un++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Pm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},zm={readContext:st,useCallback:Nh,useContext:st,useEffect:Vl,useImperativeHandle:kh,useInsertionEffect:yh,useLayoutEffect:wh,useMemo:_h,useReducer:zi,useRef:bh,useState:function(){return zi(hn)},useDebugValue:Bl,useDeferredValue:function(e){var t=nt();return Sh(t,ge.memoizedState,e)},useTransition:function(){var e=zi(hn)[0],t=nt().memoizedState;return[e,t]},useMutableSource:hh,useSyncExternalStore:ph,useId:Ch,unstable_isNewReconciler:!1},$m={readContext:st,useCallback:Nh,useContext:st,useEffect:Vl,useImperativeHandle:kh,useInsertionEffect:yh,useLayoutEffect:wh,useMemo:_h,useReducer:$i,useRef:bh,useState:function(){return $i(hn)},useDebugValue:Bl,useDeferredValue:function(e){var t=nt();return ge===null?t.memoizedState=e:Sh(t,ge.memoizedState,e)},useTransition:function(){var e=$i(hn)[0],t=nt().memoizedState;return[e,t]},useMutableSource:hh,useSyncExternalStore:ph,useId:Ch,unstable_isNewReconciler:!1};function lt(e,t){if(e&&e.defaultProps){t=le({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Po(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:le({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ei={isMounted:function(e){return(e=e._reactInternals)?Ar(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Re(),a=er(e),i=Pt(n,a);i.payload=t,r!=null&&(i.callback=r),t=Yt(e,i,a),t!==null&&(ft(t,e,a,n),ia(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Re(),a=er(e),i=Pt(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Yt(e,i,a),t!==null&&(ft(t,e,a,n),ia(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Re(),n=er(e),a=Pt(r,n);a.tag=2,t!=null&&(a.callback=t),t=Yt(e,a,n),t!==null&&(ft(t,e,n,r),ia(t,e,n))}};function Zc(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!nn(r,n)||!nn(a,i):!0}function Ah(e,t,r){var n=!1,a=nr,i=t.contextType;return typeof i=="object"&&i!==null?i=st(i):(a=Ue(t)?kr:Te.current,n=t.contextTypes,i=(n=n!=null)?us(e,a):nr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ei,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ed(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ei.enqueueReplaceState(t,t.state,null)}function Ao(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},zl(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=st(i):(i=Ue(t)?kr:Te.current,a.context=us(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Po(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ei.enqueueReplaceState(a,a.state,null),Ea(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ms(e,t){try{var r="",n=t;do r+=df(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Di(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ro(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Dm=typeof WeakMap=="function"?WeakMap:Map;function Rh(e,t,r){r=Pt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Oa||(Oa=!0,Vo=n),Ro(e,t)},r}function Oh(e,t,r){r=Pt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ro(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ro(e,t),typeof n!="function"&&(Zt===null?Zt=new Set([this]):Zt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function td(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Dm;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Qm.bind(null,e,t,r),t.then(e,e))}function rd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sd(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Pt(-1,1),t.tag=2,Yt(r,t,1))),r.lanes|=1),e)}var Lm=Dt.ReactCurrentOwner,Le=!1;function Ae(e,t,r,n){t.child=e===null?lh(t,null,r,n):ps(t,e.child,r,n)}function nd(e,t,r,n,a){r=r.render;var i=t.ref;return os(t,a),n=Ul(e,t,r,n,i,a),r=Fl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zt(e,t,a)):(ne&&r&&El(t),t.flags|=1,Ae(e,t,n,a),t.child)}function ad(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Ql(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Ih(e,t,i,n,a)):(e=ha(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:nn,r(o,n)&&e.ref===t.ref)return zt(e,t,a)}return t.flags|=1,e=tr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Ih(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(nn(i,n)&&e.ref===t.ref)if(Le=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,zt(e,t,a)}return Oo(e,t,r,n,a)}function zh(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(ts,Be),Be|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(ts,Be),Be|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ee(ts,Be),Be|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ee(ts,Be),Be|=n;return Ae(e,t,a,r),t.child}function $h(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,r,n,a){var i=Ue(r)?kr:Te.current;return i=us(t,i),os(t,a),r=Ul(e,t,r,n,i,a),n=Fl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,zt(e,t,a)):(ne&&n&&El(t),t.flags|=1,Ae(e,t,r,a),t.child)}function id(e,t,r,n,a){if(Ue(r)){var i=!0;ka(t)}else i=!1;if(os(t,a),t.stateNode===null)ca(e,t),Ah(t,r,n),Ao(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=st(d):(d=Ue(r)?kr:Te.current,d=us(t,d));var h=r.getDerivedStateFromProps,x=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";x||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&ed(t,o,n,d),Ft=!1;var f=t.memoizedState;o.state=f,Ea(t,n,o,a),c=t.memoizedState,l!==n||f!==c||Me.current||Ft?(typeof h=="function"&&(Po(t,r,h,n),c=t.memoizedState),(l=Ft||Zc(t,r,l,n,f,c,d))?(x||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,dh(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:lt(t.type,l),o.props=d,x=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=st(c):(c=Ue(r)?kr:Te.current,c=us(t,c));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==x||f!==c)&&ed(t,o,n,c),Ft=!1,f=t.memoizedState,o.state=f,Ea(t,n,o,a);var g=t.memoizedState;l!==x||f!==g||Me.current||Ft?(typeof v=="function"&&(Po(t,r,v,n),g=t.memoizedState),(d=Ft||Zc(t,r,d,n,f,g,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Io(e,t,r,n,i,a)}function Io(e,t,r,n,a,i){$h(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Hc(t,r,!1),zt(e,t,i);n=t.stateNode,Lm.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ps(t,e.child,null,i),t.child=ps(t,null,l,i)):Ae(e,t,l,i),t.memoizedState=n.state,a&&Hc(t,r,!0),t.child}function Dh(e){var t=e.stateNode;t.pendingContext?Wc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wc(e,t.context,!1),$l(e,t.containerInfo)}function od(e,t,r,n,a){return hs(),Pl(a),t.flags|=256,Ae(e,t,r,n),t.child}var zo={dehydrated:null,treeContext:null,retryLane:0};function $o(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lh(e,t,r){var n=t.pendingProps,a=ie.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ee(ie,a&1),e===null)return Eo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=si(o,n,0,null),e=jr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$o(r),t.memoizedState=zo,e):Wl(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Mm(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=tr(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=tr(l,i):(i=jr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?$o(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=zo,n}return i=e.child,e=i.sibling,n=tr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Wl(e,t){return t=si({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gn(e,t,r,n){return n!==null&&Pl(n),ps(t,e.child,null,r),e=Wl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Mm(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Di(Error(I(422))),Gn(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=si({mode:"visible",children:n.children},a,0,null),i=jr(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ps(t,e.child,null,o),t.child.memoizedState=$o(o),t.memoizedState=zo,i);if(!(t.mode&1))return Gn(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(I(419)),n=Di(i,n,void 0),Gn(e,t,o,n)}if(l=(o&e.childLanes)!==0,Le||l){if(n=ye,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,It(e,a),ft(n,e,a,-1))}return Jl(),n=Di(Error(I(421))),Gn(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Ym.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ge=Qt(a.nextSibling),qe=t,ne=!0,ht=null,e!==null&&(Ye[Ze++]=Et,Ye[Ze++]=Tt,Ye[Ze++]=Nr,Et=e.id,Tt=e.overflow,Nr=t),t=Wl(t,n.children),t.flags|=4096,t)}function ld(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),To(e.return,t,r)}function Li(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Mh(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ae(e,t,n.children,r),n=ie.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ld(e,r,t);else if(e.tag===19)ld(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ee(ie,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ta(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Li(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ta(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Li(t,!0,r,null,i);break;case"together":Li(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ca(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Sr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,r=tr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=tr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Um(e,t,r){switch(t.tag){case 3:Dh(t),hs();break;case 5:uh(t);break;case 1:Ue(t.type)&&ka(t);break;case 4:$l(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ee(Sa,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ee(ie,ie.current&1),t.flags|=128,null):r&t.child.childLanes?Lh(e,t,r):(ee(ie,ie.current&1),e=zt(e,t,r),e!==null?e.sibling:null);ee(ie,ie.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Mh(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ee(ie,ie.current),n)break;return null;case 22:case 23:return t.lanes=0,zh(e,t,r)}return zt(e,t,r)}var Uh,Do,Fh,Vh;Uh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Do=function(){};Fh=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,br(wt.current);var i=null;switch(r){case"input":a=no(e,a),n=no(e,n),i=[];break;case"select":a=le({},a,{value:void 0}),n=le({},n,{value:void 0}),i=[];break;case"textarea":a=oo(e,a),n=oo(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=wa)}co(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Qs.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Qs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&te("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Vh=function(e,t,r,n){r!==n&&(t.flags|=4)};function As(e,t){if(!ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ce(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Fm(e,t,r){var n=t.pendingProps;switch(Tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(t),null;case 1:return Ue(t.type)&&ja(),Ce(t),null;case 3:return n=t.stateNode,fs(),se(Me),se(Te),Ll(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wn(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ht!==null&&(Ho(ht),ht=null))),Do(e,t),Ce(t),null;case 5:Dl(t);var a=br(dn.current);if(r=t.type,e!==null&&t.stateNode!=null)Fh(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(I(166));return Ce(t),null}if(e=br(wt.current),Wn(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[bt]=t,n[ln]=i,e=(t.mode&1)!==0,r){case"dialog":te("cancel",n),te("close",n);break;case"iframe":case"object":case"embed":te("load",n);break;case"video":case"audio":for(a=0;a<$s.length;a++)te($s[a],n);break;case"source":te("error",n);break;case"img":case"image":case"link":te("error",n),te("load",n);break;case"details":te("toggle",n);break;case"input":gc(n,i),te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},te("invalid",n);break;case"textarea":bc(n,i),te("invalid",n)}co(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bn(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bn(n.textContent,l,e),a=["children",""+l]):Qs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&te("scroll",n)}switch(r){case"input":zn(n),vc(n,i,!0);break;case"textarea":zn(n),yc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=wa)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xu(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[bt]=t,e[ln]=n,Uh(e,t,!1,!1),t.stateNode=e;e:{switch(o=uo(r,n),r){case"dialog":te("cancel",e),te("close",e),a=n;break;case"iframe":case"object":case"embed":te("load",e),a=n;break;case"video":case"audio":for(a=0;a<$s.length;a++)te($s[a],e);a=n;break;case"source":te("error",e),a=n;break;case"img":case"image":case"link":te("error",e),te("load",e),a=n;break;case"details":te("toggle",e),a=n;break;case"input":gc(e,n),a=no(e,n),te("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=le({},n,{value:void 0}),te("invalid",e);break;case"textarea":bc(e,n),a=oo(e,n),te("invalid",e);break;default:a=n}co(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?bu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gu(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ys(e,c):typeof c=="number"&&Ys(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&te("scroll",e):c!=null&&fl(e,i,c,o))}switch(r){case"input":zn(e),vc(e,n,!1);break;case"textarea":zn(e),yc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+sr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ss(e,!!n.multiple,i,!1):n.defaultValue!=null&&ss(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ce(t),null;case 6:if(e&&t.stateNode!=null)Vh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(I(166));if(r=br(dn.current),br(wt.current),Wn(t)){if(n=t.stateNode,r=t.memoizedProps,n[bt]=t,(i=n.nodeValue!==r)&&(e=qe,e!==null))switch(e.tag){case 3:Bn(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bn(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bt]=t,t.stateNode=n}return Ce(t),null;case 13:if(se(ie),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ne&&Ge!==null&&t.mode&1&&!(t.flags&128))ih(),hs(),t.flags|=98560,i=!1;else if(i=Wn(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(I(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[bt]=t}else hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ce(t),i=!1}else ht!==null&&(Ho(ht),ht=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?ve===0&&(ve=3):Jl())),t.updateQueue!==null&&(t.flags|=4),Ce(t),null);case 4:return fs(),Do(e,t),e===null&&an(t.stateNode.containerInfo),Ce(t),null;case 10:return Ol(t.type._context),Ce(t),null;case 17:return Ue(t.type)&&ja(),Ce(t),null;case 19:if(se(ie),i=t.memoizedState,i===null)return Ce(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)As(i,!1);else{if(ve!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ta(e),o!==null){for(t.flags|=128,As(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ee(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&he()>xs&&(t.flags|=128,n=!0,As(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ta(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),As(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ne)return Ce(t),null}else 2*he()-i.renderingStartTime>xs&&r!==1073741824&&(t.flags|=128,n=!0,As(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=he(),t.sibling=null,r=ie.current,ee(ie,n?r&1|2:r&1),t):(Ce(t),null);case 22:case 23:return Xl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Be&1073741824&&(Ce(t),t.subtreeFlags&6&&(t.flags|=8192)):Ce(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function Vm(e,t){switch(Tl(t),t.tag){case 1:return Ue(t.type)&&ja(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fs(),se(Me),se(Te),Ll(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dl(t),null;case 13:if(se(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return se(ie),null;case 4:return fs(),null;case 10:return Ol(t.type._context),null;case 22:case 23:return Xl(),null;case 24:return null;default:return null}}var qn=!1,Ee=!1,Bm=typeof WeakSet=="function"?WeakSet:Set,V=null;function es(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){de(e,t,n)}else r.current=null}function Lo(e,t,r){try{r()}catch(n){de(e,t,n)}}var cd=!1;function Wm(e,t){if(wo=va,e=qu(),Cl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,h=0,x=e,f=null;t:for(;;){for(var v;x!==r||a!==0&&x.nodeType!==3||(l=o+a),x!==i||n!==0&&x.nodeType!==3||(c=o+n),x.nodeType===3&&(o+=x.nodeValue.length),(v=x.firstChild)!==null;)f=x,x=v;for(;;){if(x===e)break t;if(f===r&&++d===a&&(l=o),f===i&&++h===n&&(c=o),(v=x.nextSibling)!==null)break;x=f,f=x.parentNode}x=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(jo={focusedElem:e,selectionRange:r},va=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,k=g.memoizedState,m=t.stateNode,u=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:lt(t.type,w),k);m.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(j){de(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return g=cd,cd=!1,g}function Ws(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Lo(t,r,i)}a=a.next}while(a!==n)}}function ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Mo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Bh(e){var t=e.alternate;t!==null&&(e.alternate=null,Bh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bt],delete t[ln],delete t[_o],delete t[Sm],delete t[Cm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Wh(e){return e.tag===5||e.tag===3||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Wh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wa));else if(n!==4&&(e=e.child,e!==null))for(Uo(e,t,r),e=e.sibling;e!==null;)Uo(e,t,r),e=e.sibling}function Fo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Fo(e,t,r),e=e.sibling;e!==null;)Fo(e,t,r),e=e.sibling}var ke=null,dt=!1;function Mt(e,t,r){for(r=r.child;r!==null;)Hh(e,t,r),r=r.sibling}function Hh(e,t,r){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(qa,r)}catch{}switch(r.tag){case 5:Ee||es(r,t);case 6:var n=ke,a=dt;ke=null,Mt(e,t,r),ke=n,dt=a,ke!==null&&(dt?(e=ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ke.removeChild(r.stateNode));break;case 18:ke!==null&&(dt?(e=ke,r=r.stateNode,e.nodeType===8?Ai(e.parentNode,r):e.nodeType===1&&Ai(e,r),rn(e)):Ai(ke,r.stateNode));break;case 4:n=ke,a=dt,ke=r.stateNode.containerInfo,dt=!0,Mt(e,t,r),ke=n,dt=a;break;case 0:case 11:case 14:case 15:if(!Ee&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Lo(r,t,o),a=a.next}while(a!==n)}Mt(e,t,r);break;case 1:if(!Ee&&(es(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){de(r,t,l)}Mt(e,t,r);break;case 21:Mt(e,t,r);break;case 22:r.mode&1?(Ee=(n=Ee)||r.memoizedState!==null,Mt(e,t,r),Ee=n):Mt(e,t,r);break;default:Mt(e,t,r)}}function ud(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Bm),t.forEach(function(n){var a=Zm.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function it(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ke=l.stateNode,dt=!1;break e;case 3:ke=l.stateNode.containerInfo,dt=!0;break e;case 4:ke=l.stateNode.containerInfo,dt=!0;break e}l=l.return}if(ke===null)throw Error(I(160));Hh(i,o,a),ke=null,dt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){de(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gh(t,e),t=t.sibling}function Gh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(it(t,e),gt(e),n&4){try{Ws(3,e,e.return),ti(3,e)}catch(w){de(e,e.return,w)}try{Ws(5,e,e.return)}catch(w){de(e,e.return,w)}}break;case 1:it(t,e),gt(e),n&512&&r!==null&&es(r,r.return);break;case 5:if(it(t,e),gt(e),n&512&&r!==null&&es(r,r.return),e.flags&32){var a=e.stateNode;try{Ys(a,"")}catch(w){de(e,e.return,w)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&fu(a,i),uo(l,o);var d=uo(l,i);for(o=0;o<c.length;o+=2){var h=c[o],x=c[o+1];h==="style"?bu(a,x):h==="dangerouslySetInnerHTML"?gu(a,x):h==="children"?Ys(a,x):fl(a,h,x,d)}switch(l){case"input":ao(a,i);break;case"textarea":mu(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ss(a,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?ss(a,!!i.multiple,i.defaultValue,!0):ss(a,!!i.multiple,i.multiple?[]:"",!1))}a[ln]=i}catch(w){de(e,e.return,w)}}break;case 6:if(it(t,e),gt(e),n&4){if(e.stateNode===null)throw Error(I(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(w){de(e,e.return,w)}}break;case 3:if(it(t,e),gt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{rn(t.containerInfo)}catch(w){de(e,e.return,w)}break;case 4:it(t,e),gt(e);break;case 13:it(t,e),gt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(ql=he())),n&4&&ud(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Ee=(d=Ee)||h,it(t,e),Ee=d):it(t,e),gt(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(V=e,h=e.child;h!==null;){for(x=V=h;V!==null;){switch(f=V,v=f.child,f.tag){case 0:case 11:case 14:case 15:Ws(4,f,f.return);break;case 1:es(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){de(n,r,w)}}break;case 5:es(f,f.return);break;case 22:if(f.memoizedState!==null){pd(x);continue}}v!==null?(v.return=f,V=v):pd(x)}h=h.sibling}e:for(h=null,x=e;;){if(x.tag===5){if(h===null){h=x;try{a=x.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=x.stateNode,c=x.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=vu("display",o))}catch(w){de(e,e.return,w)}}}else if(x.tag===6){if(h===null)try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(w){de(e,e.return,w)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===e)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===e)break e;for(;x.sibling===null;){if(x.return===null||x.return===e)break e;h===x&&(h=null),x=x.return}h===x&&(h=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:it(t,e),gt(e),n&4&&ud(e);break;case 21:break;default:it(t,e),gt(e)}}function gt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Wh(r)){var n=r;break e}r=r.return}throw Error(I(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Ys(a,""),n.flags&=-33);var i=dd(e);Fo(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=dd(e);Uo(e,l,o);break;default:throw Error(I(161))}}catch(c){de(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hm(e,t,r){V=e,qh(e)}function qh(e,t,r){for(var n=(e.mode&1)!==0;V!==null;){var a=V,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||qn;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ee;l=qn;var d=Ee;if(qn=o,(Ee=c)&&!d)for(V=a;V!==null;)o=V,c=o.child,o.tag===22&&o.memoizedState!==null?fd(a):c!==null?(c.return=o,V=c):fd(a);for(;i!==null;)V=i,qh(i),i=i.sibling;V=a,qn=l,Ee=d}hd(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,V=i):hd(e)}}function hd(e){for(;V!==null;){var t=V;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ee||ti(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ee)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:lt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Jc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Jc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var x=h.dehydrated;x!==null&&rn(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ee||t.flags&512&&Mo(t)}catch(f){de(t,t.return,f)}}if(t===e){V=null;break}if(r=t.sibling,r!==null){r.return=t.return,V=r;break}V=t.return}}function pd(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var r=t.sibling;if(r!==null){r.return=t.return,V=r;break}V=t.return}}function fd(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ti(4,t)}catch(c){de(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){de(t,a,c)}}var i=t.return;try{Mo(t)}catch(c){de(t,i,c)}break;case 5:var o=t.return;try{Mo(t)}catch(c){de(t,o,c)}}}catch(c){de(t,t.return,c)}if(t===e){V=null;break}var l=t.sibling;if(l!==null){l.return=t.return,V=l;break}V=t.return}}var Gm=Math.ceil,Ra=Dt.ReactCurrentDispatcher,Hl=Dt.ReactCurrentOwner,tt=Dt.ReactCurrentBatchConfig,J=0,ye=null,fe=null,Ne=0,Be=0,ts=or(0),ve=0,fn=null,Sr=0,ri=0,Gl=0,Hs=null,De=null,ql=0,xs=1/0,_t=null,Oa=!1,Vo=null,Zt=null,Kn=!1,qt=null,Ia=0,Gs=0,Bo=null,da=-1,ua=0;function Re(){return J&6?he():da!==-1?da:da=he()}function er(e){return e.mode&1?J&2&&Ne!==0?Ne&-Ne:Tm.transition!==null?(ua===0&&(ua=Au()),ua):(e=Y,e!==0||(e=window.event,e=e===void 0?16:Lu(e.type)),e):1}function ft(e,t,r,n){if(50<Gs)throw Gs=0,Bo=null,Error(I(185));_n(e,r,n),(!(J&2)||e!==ye)&&(e===ye&&(!(J&2)&&(ri|=r),ve===4&&Wt(e,Ne)),Fe(e,n),r===1&&J===0&&!(t.mode&1)&&(xs=he()+500,Ya&&lr()))}function Fe(e,t){var r=e.callbackNode;Tf(e,t);var n=ga(e,e===ye?Ne:0);if(n===0)r!==null&&kc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&kc(r),t===1)e.tag===0?Em(md.bind(null,e)):sh(md.bind(null,e)),Nm(function(){!(J&6)&&lr()}),r=null;else{switch(Ru(n)){case 1:r=bl;break;case 4:r=Tu;break;case 16:r=xa;break;case 536870912:r=Pu;break;default:r=xa}r=tp(r,Kh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Kh(e,t){if(da=-1,ua=0,J&6)throw Error(I(327));var r=e.callbackNode;if(ls()&&e.callbackNode!==r)return null;var n=ga(e,e===ye?Ne:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=za(e,n);else{t=n;var a=J;J|=2;var i=Jh();(ye!==e||Ne!==t)&&(_t=null,xs=he()+500,wr(e,t));do try{Xm();break}catch(l){Xh(e,l)}while(1);Rl(),Ra.current=i,J=a,fe!==null?t=0:(ye=null,Ne=0,t=ve)}if(t!==0){if(t===2&&(a=xo(e),a!==0&&(n=a,t=Wo(e,a))),t===1)throw r=fn,wr(e,0),Wt(e,n),Fe(e,he()),r;if(t===6)Wt(e,n);else{if(a=e.current.alternate,!(n&30)&&!qm(a)&&(t=za(e,n),t===2&&(i=xo(e),i!==0&&(n=i,t=Wo(e,i))),t===1))throw r=fn,wr(e,0),Wt(e,n),Fe(e,he()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(I(345));case 2:pr(e,De,_t);break;case 3:if(Wt(e,n),(n&130023424)===n&&(t=ql+500-he(),10<t)){if(ga(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Re(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=No(pr.bind(null,e,De,_t),t);break}pr(e,De,_t);break;case 4:if(Wt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-pt(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=he()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Gm(n/1960))-n,10<n){e.timeoutHandle=No(pr.bind(null,e,De,_t),n);break}pr(e,De,_t);break;case 5:pr(e,De,_t);break;default:throw Error(I(329))}}}return Fe(e,he()),e.callbackNode===r?Kh.bind(null,e):null}function Wo(e,t){var r=Hs;return e.current.memoizedState.isDehydrated&&(wr(e,t).flags|=256),e=za(e,t),e!==2&&(t=De,De=r,t!==null&&Ho(t)),e}function Ho(e){De===null?De=e:De.push.apply(De,e)}function qm(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!mt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wt(e,t){for(t&=~Gl,t&=~ri,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-pt(t),n=1<<r;e[r]=-1,t&=~n}}function md(e){if(J&6)throw Error(I(327));ls();var t=ga(e,0);if(!(t&1))return Fe(e,he()),null;var r=za(e,t);if(e.tag!==0&&r===2){var n=xo(e);n!==0&&(t=n,r=Wo(e,n))}if(r===1)throw r=fn,wr(e,0),Wt(e,t),Fe(e,he()),r;if(r===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pr(e,De,_t),Fe(e,he()),null}function Kl(e,t){var r=J;J|=1;try{return e(t)}finally{J=r,J===0&&(xs=he()+500,Ya&&lr())}}function Cr(e){qt!==null&&qt.tag===0&&!(J&6)&&ls();var t=J;J|=1;var r=tt.transition,n=Y;try{if(tt.transition=null,Y=1,e)return e()}finally{Y=n,tt.transition=r,J=t,!(J&6)&&lr()}}function Xl(){Be=ts.current,se(ts)}function wr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,km(r)),fe!==null)for(r=fe.return;r!==null;){var n=r;switch(Tl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ja();break;case 3:fs(),se(Me),se(Te),Ll();break;case 5:Dl(n);break;case 4:fs();break;case 13:se(ie);break;case 19:se(ie);break;case 10:Ol(n.type._context);break;case 22:case 23:Xl()}r=r.return}if(ye=e,fe=e=tr(e.current,null),Ne=Be=t,ve=0,fn=null,Gl=ri=Sr=0,De=Hs=null,vr!==null){for(t=0;t<vr.length;t++)if(r=vr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}vr=null}return e}function Xh(e,t){do{var r=fe;try{if(Rl(),oa.current=Aa,Pa){for(var n=oe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Pa=!1}if(_r=0,be=ge=oe=null,Bs=!1,un=0,Hl.current=null,r===null||r.return===null){ve=1,fn=t,fe=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Ne,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,x=h.tag;if(!(h.mode&1)&&(x===0||x===11||x===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=rd(o);if(v!==null){v.flags&=-257,sd(v,o,l,i,t),v.mode&1&&td(i,d,t),t=v,c=d;var g=t.updateQueue;if(g===null){var w=new Set;w.add(c),t.updateQueue=w}else g.add(c);break e}else{if(!(t&1)){td(i,d,t),Jl();break e}c=Error(I(426))}}else if(ne&&l.mode&1){var k=rd(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),sd(k,o,l,i,t),Pl(ms(c,l));break e}}i=c=ms(c,l),ve!==4&&(ve=2),Hs===null?Hs=[i]:Hs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Rh(i,c,t);Xc(i,m);break e;case 1:l=c;var u=i.type,p=i.stateNode;if(!(i.flags&128)&&(typeof u.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Zt===null||!Zt.has(p)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Oh(i,l,t);Xc(i,j);break e}}i=i.return}while(i!==null)}Yh(r)}catch(_){t=_,fe===r&&r!==null&&(fe=r=r.return);continue}break}while(1)}function Jh(){var e=Ra.current;return Ra.current=Aa,e===null?Aa:e}function Jl(){(ve===0||ve===3||ve===2)&&(ve=4),ye===null||!(Sr&268435455)&&!(ri&268435455)||Wt(ye,Ne)}function za(e,t){var r=J;J|=2;var n=Jh();(ye!==e||Ne!==t)&&(_t=null,wr(e,t));do try{Km();break}catch(a){Xh(e,a)}while(1);if(Rl(),J=r,Ra.current=n,fe!==null)throw Error(I(261));return ye=null,Ne=0,ve}function Km(){for(;fe!==null;)Qh(fe)}function Xm(){for(;fe!==null&&!yf();)Qh(fe)}function Qh(e){var t=ep(e.alternate,e,Be);e.memoizedProps=e.pendingProps,t===null?Yh(e):fe=t,Hl.current=null}function Yh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Vm(r,t),r!==null){r.flags&=32767,fe=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ve=6,fe=null;return}}else if(r=Fm(r,t,Be),r!==null){fe=r;return}if(t=t.sibling,t!==null){fe=t;return}fe=t=e}while(t!==null);ve===0&&(ve=5)}function pr(e,t,r){var n=Y,a=tt.transition;try{tt.transition=null,Y=1,Jm(e,t,r,n)}finally{tt.transition=a,Y=n}return null}function Jm(e,t,r,n){do ls();while(qt!==null);if(J&6)throw Error(I(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Pf(e,i),e===ye&&(fe=ye=null,Ne=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Kn||(Kn=!0,tp(xa,function(){return ls(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=tt.transition,tt.transition=null;var o=Y;Y=1;var l=J;J|=4,Hl.current=null,Wm(e,r),Gh(r,e),xm(jo),va=!!wo,jo=wo=null,e.current=r,Hm(r),wf(),J=l,Y=o,tt.transition=i}else e.current=r;if(Kn&&(Kn=!1,qt=e,Ia=a),i=e.pendingLanes,i===0&&(Zt=null),Nf(r.stateNode),Fe(e,he()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Oa)throw Oa=!1,e=Vo,Vo=null,e;return Ia&1&&e.tag!==0&&ls(),i=e.pendingLanes,i&1?e===Bo?Gs++:(Gs=0,Bo=e):Gs=0,lr(),null}function ls(){if(qt!==null){var e=Ru(Ia),t=tt.transition,r=Y;try{if(tt.transition=null,Y=16>e?16:e,qt===null)var n=!1;else{if(e=qt,qt=null,Ia=0,J&6)throw Error(I(331));var a=J;for(J|=4,V=e.current;V!==null;){var i=V,o=i.child;if(V.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(V=d;V!==null;){var h=V;switch(h.tag){case 0:case 11:case 15:Ws(8,h,i)}var x=h.child;if(x!==null)x.return=h,V=x;else for(;V!==null;){h=V;var f=h.sibling,v=h.return;if(Bh(h),h===d){V=null;break}if(f!==null){f.return=v,V=f;break}V=v}}}var g=i.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}V=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,V=o;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ws(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,V=m;break e}V=i.return}}var u=e.current;for(V=u;V!==null;){o=V;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,V=p;else e:for(o=u;V!==null;){if(l=V,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ti(9,l)}}catch(_){de(l,l.return,_)}if(l===o){V=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,V=j;break e}V=l.return}}if(J=a,lr(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(qa,e)}catch{}n=!0}return n}finally{Y=r,tt.transition=t}}return!1}function xd(e,t,r){t=ms(r,t),t=Rh(e,t,1),e=Yt(e,t,1),t=Re(),e!==null&&(_n(e,1,t),Fe(e,t))}function de(e,t,r){if(e.tag===3)xd(e,e,r);else for(;t!==null;){if(t.tag===3){xd(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zt===null||!Zt.has(n))){e=ms(r,e),e=Oh(t,e,1),t=Yt(t,e,1),e=Re(),t!==null&&(_n(t,1,e),Fe(t,e));break}}t=t.return}}function Qm(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Re(),e.pingedLanes|=e.suspendedLanes&r,ye===e&&(Ne&r)===r&&(ve===4||ve===3&&(Ne&130023424)===Ne&&500>he()-ql?wr(e,0):Gl|=r),Fe(e,t)}function Zh(e,t){t===0&&(e.mode&1?(t=Ln,Ln<<=1,!(Ln&130023424)&&(Ln=4194304)):t=1);var r=Re();e=It(e,t),e!==null&&(_n(e,t,r),Fe(e,r))}function Ym(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Zh(e,r)}function Zm(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(t),Zh(e,r)}var ep;ep=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Me.current)Le=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Le=!1,Um(e,t,r);Le=!!(e.flags&131072)}else Le=!1,ne&&t.flags&1048576&&nh(t,_a,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ca(e,t),e=t.pendingProps;var a=us(t,Te.current);os(t,r),a=Ul(null,t,n,e,a,r);var i=Fl();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(n)?(i=!0,ka(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zl(t),a.updater=ei,t.stateNode=a,a._reactInternals=t,Ao(t,n,e,r),t=Io(null,t,n,!0,i,r)):(t.tag=0,ne&&i&&El(t),Ae(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ca(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=tx(n),e=lt(n,e),a){case 0:t=Oo(null,t,n,e,r);break e;case 1:t=id(null,t,n,e,r);break e;case 11:t=nd(null,t,n,e,r);break e;case 14:t=ad(null,t,n,lt(n.type,e),r);break e}throw Error(I(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lt(n,a),Oo(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lt(n,a),id(e,t,n,a,r);case 3:e:{if(Dh(t),e===null)throw Error(I(387));n=t.pendingProps,i=t.memoizedState,a=i.element,dh(e,t),Ea(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ms(Error(I(423)),t),t=od(e,t,n,r,a);break e}else if(n!==a){a=ms(Error(I(424)),t),t=od(e,t,n,r,a);break e}else for(Ge=Qt(t.stateNode.containerInfo.firstChild),qe=t,ne=!0,ht=null,r=lh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hs(),n===a){t=zt(e,t,r);break e}Ae(e,t,n,r)}t=t.child}return t;case 5:return uh(t),e===null&&Eo(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,ko(n,a)?o=null:i!==null&&ko(n,i)&&(t.flags|=32),$h(e,t),Ae(e,t,o,r),t.child;case 6:return e===null&&Eo(t),null;case 13:return Lh(e,t,r);case 4:return $l(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ps(t,null,n,r):Ae(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lt(n,a),nd(e,t,n,a,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ee(Sa,n._currentValue),n._currentValue=o,i!==null)if(mt(i.value,o)){if(i.children===a.children&&!Me.current){t=zt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Pt(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),To(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(I(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),To(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ae(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,os(t,r),a=st(a),n=n(a),t.flags|=1,Ae(e,t,n,r),t.child;case 14:return n=t.type,a=lt(n,t.pendingProps),a=lt(n.type,a),ad(e,t,n,a,r);case 15:return Ih(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:lt(n,a),ca(e,t),t.tag=1,Ue(n)?(e=!0,ka(t)):e=!1,os(t,r),Ah(t,n,a),Ao(t,n,a,r),Io(null,t,n,!0,e,r);case 19:return Mh(e,t,r);case 22:return zh(e,t,r)}throw Error(I(156,t.tag))};function tp(e,t){return Eu(e,t)}function ex(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function et(e,t,r,n){return new ex(e,t,r,n)}function Ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tx(e){if(typeof e=="function")return Ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xl)return 11;if(e===gl)return 14}return 2}function tr(e,t){var r=e.alternate;return r===null?(r=et(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ha(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Ql(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Hr:return jr(r.children,a,i,t);case ml:o=8,a|=8;break;case eo:return e=et(12,r,t,a|2),e.elementType=eo,e.lanes=i,e;case to:return e=et(13,r,t,a),e.elementType=to,e.lanes=i,e;case ro:return e=et(19,r,t,a),e.elementType=ro,e.lanes=i,e;case uu:return si(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cu:o=10;break e;case du:o=9;break e;case xl:o=11;break e;case gl:o=14;break e;case Ut:o=16,n=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=et(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function jr(e,t,r,n){return e=et(7,e,n,t),e.lanes=r,e}function si(e,t,r,n){return e=et(22,e,n,t),e.elementType=uu,e.lanes=r,e.stateNode={isHidden:!1},e}function Mi(e,t,r){return e=et(6,e,null,t),e.lanes=r,e}function Ui(e,t,r){return t=et(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rx(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yi(0),this.expirationTimes=yi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Yl(e,t,r,n,a,i,o,l,c){return e=new rx(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=et(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zl(i),e}function sx(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function rp(e){if(!e)return nr;e=e._reactInternals;e:{if(Ar(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var r=e.type;if(Ue(r))return rh(e,r,t)}return t}function sp(e,t,r,n,a,i,o,l,c){return e=Yl(r,n,!0,e,a,i,o,l,c),e.context=rp(null),r=e.current,n=Re(),a=er(r),i=Pt(n,a),i.callback=t??null,Yt(r,i,a),e.current.lanes=a,_n(e,a,n),Fe(e,n),e}function ni(e,t,r,n){var a=t.current,i=Re(),o=er(a);return r=rp(r),t.context===null?t.context=r:t.pendingContext=r,t=Pt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Yt(a,t,o),e!==null&&(ft(e,a,o,i),ia(e,a,o)),o}function $a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zl(e,t){gd(e,t),(e=e.alternate)&&gd(e,t)}function nx(){return null}var np=typeof reportError=="function"?reportError:function(e){console.error(e)};function ec(e){this._internalRoot=e}ai.prototype.render=ec.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));ni(e,t,null,null)};ai.prototype.unmount=ec.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cr(function(){ni(null,e,null,null)}),t[Ot]=null}};function ai(e){this._internalRoot=e}ai.prototype.unstable_scheduleHydration=function(e){if(e){var t=zu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&t!==0&&t<Bt[r].priority;r++);Bt.splice(r,0,e),r===0&&Du(e)}};function tc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ii(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vd(){}function ax(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=$a(o);i.call(d)}}var o=sp(t,n,e,0,null,!1,!1,"",vd);return e._reactRootContainer=o,e[Ot]=o.current,an(e.nodeType===8?e.parentNode:e),Cr(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=$a(c);l.call(d)}}var c=Yl(e,0,!1,null,null,!1,!1,"",vd);return e._reactRootContainer=c,e[Ot]=c.current,an(e.nodeType===8?e.parentNode:e),Cr(function(){ni(t,c,r,n)}),c}function oi(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=$a(o);l.call(c)}}ni(t,o,e,a)}else o=ax(r,t,e,a,n);return $a(o)}Ou=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=zs(t.pendingLanes);r!==0&&(yl(t,r|1),Fe(t,he()),!(J&6)&&(xs=he()+500,lr()))}break;case 13:Cr(function(){var n=It(e,1);if(n!==null){var a=Re();ft(n,e,1,a)}}),Zl(e,1)}};wl=function(e){if(e.tag===13){var t=It(e,134217728);if(t!==null){var r=Re();ft(t,e,134217728,r)}Zl(e,134217728)}};Iu=function(e){if(e.tag===13){var t=er(e),r=It(e,t);if(r!==null){var n=Re();ft(r,e,t,n)}Zl(e,t)}};zu=function(){return Y};$u=function(e,t){var r=Y;try{return Y=e,t()}finally{Y=r}};po=function(e,t,r){switch(t){case"input":if(ao(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Qa(n);if(!a)throw Error(I(90));pu(n),ao(n,a)}}}break;case"textarea":mu(e,r);break;case"select":t=r.value,t!=null&&ss(e,!!r.multiple,t,!1)}};ju=Kl;ku=Cr;var ix={usingClientEntryPoint:!1,Events:[Cn,Xr,Qa,yu,wu,Kl]},Rs={findFiberByHostInstance:gr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ox={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Dt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Su(e),e===null?null:e.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||nx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xn.isDisabled&&Xn.supportsFiber)try{qa=Xn.inject(ox),yt=Xn}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ix;Je.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tc(t))throw Error(I(200));return sx(e,t,null,r)};Je.createRoot=function(e,t){if(!tc(e))throw Error(I(299));var r=!1,n="",a=np;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Yl(e,1,!1,null,null,r,!1,n,a),e[Ot]=t.current,an(e.nodeType===8?e.parentNode:e),new ec(t)};Je.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=Su(t),e=e===null?null:e.stateNode,e};Je.flushSync=function(e){return Cr(e)};Je.hydrate=function(e,t,r){if(!ii(t))throw Error(I(200));return oi(null,e,t,!0,r)};Je.hydrateRoot=function(e,t,r){if(!tc(e))throw Error(I(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=np;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=sp(t,null,e,1,r??null,a,!1,i,o),e[Ot]=t.current,an(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ai(t)};Je.render=function(e,t,r){if(!ii(t))throw Error(I(200));return oi(null,e,t,!1,r)};Je.unmountComponentAtNode=function(e){if(!ii(e))throw Error(I(40));return e._reactRootContainer?(Cr(function(){oi(null,null,e,!1,function(){e._reactRootContainer=null,e[Ot]=null})}),!0):!1};Je.unstable_batchedUpdates=Kl;Je.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ii(r))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return oi(e,t,r,!1,n)};Je.version="18.3.1-next-f1338f8080-20240426";function ap(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ap)}catch(e){console.error(e)}}ap(),au.exports=Je;var lx=au.exports,bd=lx;Yi.createRoot=bd.createRoot,Yi.hydrateRoot=bd.hydrateRoot;function li(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function cx(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{d(n.next(h))}catch(x){o(x)}}function c(h){try{d(n.throw(h))}catch(x){o(x)}}function d(h){h.done?i(h.value):a(h.value).then(l,c)}d((n=n.apply(e,t||[])).next())})}const dx=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class rc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class ux extends rc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class yd extends rc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class wd extends rc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Go;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Go||(Go={}));class hx{constructor(t,{headers:r={},customFetch:n,region:a=Go.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=dx(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return cx(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:d,signal:h,timeout:x}=n;let f={},{region:v}=n;v||(v=this.region);const g=new URL(`${this.url}/${r}`);v&&v!=="any"&&(f["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let w;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(f["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(f["Content-Type"]="application/json",w=JSON.stringify(d)):w=d;let k=h;x&&(o=new AbortController,i=setTimeout(()=>o.abort(),x),h?(k=o.signal,h.addEventListener("abort",()=>o.abort())):k=o.signal);const m=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:w,signal:k}).catch(_=>{throw new ux(_)}),u=m.headers.get("x-relay-error");if(u&&u==="true")throw new yd(m);if(!m.ok)throw new wd(m);let p=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return p==="application/json"?j=yield m.json():p==="application/octet-stream"||p==="application/pdf"?j=yield m.blob():p==="text/event-stream"?j=m:p==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof wd||l instanceof yd?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var px=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},fx=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,d=i.status,h=i.statusText;if(i.ok){var x,f;if(r.method!=="HEAD"){var v;const m=await i.text();m===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((v=r.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const w=(x=r.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),k=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&k&&k.length>1&&(c=parseInt(k[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,d=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const w=await i.text();try{o=JSON.parse(w),Array.isArray(o)&&i.status===404&&(l=[],o=null,d=200,h="OK")}catch{i.status===404&&w===""?(d=204,h="No Content"):o={message:w}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,d=200,h="OK"),o&&r.shouldThrowOnError)throw new px(o)}return{error:o,data:l,count:c,status:d,statusText:h}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var d,h,x,f;const g=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",w=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(x=i==null?void 0:i.name)!==null&&x!==void 0?x:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${g}`,w&&(l+=` (${w})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var v;l=(v=i==null?void 0:i.stack)!==null&&v!==void 0?v:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},mx=class extends fx{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const jd=new RegExp("[,()]");var Fr=class extends mx{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&jd.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&jd.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},xx=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Fr({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Fr({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Fr({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Fr({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Fr({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},gx=class ip{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new xx(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ip(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let d;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([x,f])=>f!==void 0).map(([x,f])=>[x,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([x,f])=>{c.searchParams.append(x,f)})):(l="POST",d=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new Fr({method:l,url:c,headers:h,schema:this.schemaName,body:d,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class vx{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const bx="2.89.0",yx=`realtime-js/${bx}`,op="1.0.0",wx="2.0.0",kd=op,qo=1e4,jx=1e3,kx=100;var Vt;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Vt||(Vt={}));var xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xe||(xe={}));var ut;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ut||(ut={}));var Ko;(function(e){e.websocket="websocket"})(Ko||(Ko={}));var mr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(mr||(mr={}));class Nx{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",d=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},x=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+d.length+x.length,v=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(v),w=0;g.setUint8(w++,this.KINDS.userBroadcastPush),g.setUint8(w++,c.length),g.setUint8(w++,l.length),g.setUint8(w++,o.length),g.setUint8(w++,d.length),g.setUint8(w++,x.length),g.setUint8(w++,r),Array.from(c,m=>g.setUint8(w++,m.charCodeAt(0))),Array.from(l,m=>g.setUint8(w++,m.charCodeAt(0))),Array.from(o,m=>g.setUint8(w++,m.charCodeAt(0))),Array.from(d,m=>g.setUint8(w++,m.charCodeAt(0))),Array.from(x,m=>g.setUint8(w++,m.charCodeAt(0)));var k=new Uint8Array(v.byteLength+n.byteLength);return k.set(new Uint8Array(v),0),k.set(new Uint8Array(n),v.byteLength),k.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const d=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+i));c=c+i;const x=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),v=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,g={type:this.BROADCAST_EVENT,event:h,payload:v};return o>0&&(g.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class lp{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Z||(Z={}));const Nd=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=_x(o,e,t,a),i),{}):{}},_x=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?cp(i,o):Xo(o)},cp=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Tx(t,r)}switch(e){case Z.bool:return Sx(t);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return Cx(t);case Z.json:case Z.jsonb:return Ex(t);case Z.timestamp:return Px(t);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return Xo(t);default:return Xo(t)}},Xo=e=>e,Sx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Cx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Ex=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Tx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>cp(t,l))}return e},Px=e=>typeof e=="string"?e.replace(" ","T"):e,dp=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Fi{constructor(t,r,n={},a=qo){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var _d;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(_d||(_d={}));class qs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qs.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=qs.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=qs.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(d,h)=>{o[d]||(c[d]=h)}),this.map(o,(d,h)=>{const x=i[d];if(x){const f=h.map(k=>k.presence_ref),v=x.map(k=>k.presence_ref),g=h.filter(k=>v.indexOf(k.presence_ref)<0),w=x.filter(k=>f.indexOf(k.presence_ref)<0);g.length>0&&(l[d]=g),w.length>0&&(c[d]=w)}else l[d]=h}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var d;const h=(d=t[l])!==null&&d!==void 0?d:[];if(t[l]=this.cloneDeep(c),h.length>0){const x=t[l].map(v=>v.presence_ref),f=h.filter(v=>x.indexOf(v.presence_ref)<0);t[l].unshift(...f)}n(l,h,c)}),this.map(o,(l,c)=>{let d=t[l];if(!d)return;const h=c.map(x=>x.presence_ref);d=d.filter(x=>h.indexOf(x.presence_ref)<0),t[l]=d,a(l,d,c),d.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sd;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Sd||(Sd={}));var Ks;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ks||(Ks={}));var St;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(St||(St={}));class rs{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fi(this,ut.join,this.params,this.timeout),this.rejoinTimer=new lp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ut.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new qs(this),this.broadcastEndpointURL=dp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[Ks.PRESENCE]&&this.bindings[Ks.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,x={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(St.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(St.CLOSED)),this.updateJoinPayload(Object.assign({config:f},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),v===void 0){t==null||t(St.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,m=[];for(let u=0;u<k;u++){const p=w[u],{filter:{event:j,schema:_,table:b,filter:y}}=p,N=v&&v[u];if(N&&N.event===j&&rs.isFilterValueEqual(N.schema,_)&&rs.isFilterValueEqual(N.table,b)&&rs.isFilterValueEqual(N.filter,y))m.push(Object.assign(Object.assign({},p),{id:N.id}));else{this.unsubscribe(),this.state=xe.errored,t==null||t(St.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t(St.SUBSCRIBED);return}}).receive("error",v=>{this.state=xe.errored,t==null||t(St.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(St.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xe.joined&&t===Ks.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const d=await l.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ut.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Fi(this,ut.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Fi(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>kx){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:d,join:h}=ut;if(n&&[l,c,d,h].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(v=>{var g,w,k;return((g=v.filter)===null||g===void 0?void 0:g.event)==="*"||((k=(w=v.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var g,w,k,m,u,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const j=v.id,_=(g=v.filter)===null||g===void 0?void 0:g.event;return j&&((w=r.ids)===null||w===void 0?void 0:w.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const j=(u=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||u===void 0?void 0:u.toLocaleLowerCase();return j==="*"||j===((p=r==null?void 0:r.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:w,table:k,commit_timestamp:m,type:u,errors:p}=g;f=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:m,eventType:u,new:{},old:{},errors:p}),this._getPayloadRecords(g))}v.callback(f,n)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&rs.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ut.close,{},t)}_onError(t){this._on(ut.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Nd(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Nd(t.columns,t.old_record)),r}}const Vi=()=>{},Jn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ax=[1e3,2e3,5e3,1e4],Rx=1e4,Ox=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ix{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qo,this.transport=null,this.heartbeatIntervalMs=Jn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Vi,this.ref=0,this.reconnectTimer=null,this.vsn=kd,this.logger=Vi,this.conn=null,this.sendBuffer=[],this.serializer=new Nx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Ko.websocket}`,this.httpEndpoint=dp(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vx.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Vt.connecting:return mr.Connecting;case Vt.open:return mr.Open;case Vt.closing:return mr.Closing;default:return mr.Closed}}isConnected(){return this.connectionState()===mr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new rs(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(jx,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Jn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Vt.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Vt.open||this.conn.readyState===Vt.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ut.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Ox],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:yx};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(ut.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new lp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,d,h,x,f,v;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:qo,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Jn.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Vi,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:kd,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:g=>Ax[g-1]||Rx,this.vsn){case op:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(g,w)=>w(JSON.stringify(g)),this.decode=(x=t==null?void 0:t.decode)!==null&&x!==void 0?x:(g,w)=>w(JSON.parse(g));break;case wx:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var mn=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zx(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function $x(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Dx(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=zx(e.baseUrl,n,a),c=await $x(e.auth),d=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await d.text(),x=(d.headers.get("content-type")||"").includes("application/json"),f=x&&h?JSON.parse(h):h;if(!d.ok){const v=x?f:void 0,g=v==null?void 0:v.error;throw new mn((g==null?void 0:g.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:v})}return{status:d.status,headers:d.headers,data:f}}}}function Qn(e){return e.join("")}var Lx=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Qn(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qn(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qn(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qn(e.namespace)}`}),!0}catch(t){if(t instanceof mn&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof mn&&r.status===409)return;throw r}}};function zr(e){return e.join("")}var Mx=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zr(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zr(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zr(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zr(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zr(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zr(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof mn&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof mn&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},Ux=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Dx({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Lx(this.client,t),this.tableOps=new Mx(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},ci=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ae(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Fx=class extends ci{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Jo=class extends ci{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const sc=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Vx=()=>Response,Qo=e=>{if(Array.isArray(e))return e.map(r=>Qo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Qo(n)}),t},Bx=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Wx=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function xn(e){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(e)}function Hx(e,t){if(xn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(xn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gx(e){var t=Hx(e,"string");return xn(t)=="symbol"?t:t+""}function qx(e,t,r){return(t=Gx(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cd(Object(r),!0).forEach(function(n){qx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Bi=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Kx=async(e,t,r)=>{e instanceof await Vx()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const a=e.status||500,i=(n==null?void 0:n.statusCode)||a+"";t(new Fx(Bi(n),a,i))}).catch(n=>{t(new Jo(Bi(n),n))}):t(new Jo(Bi(e),e))},Xx=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(Bx(n)?(a.headers=q({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),q(q({},a),r))};async function Tn(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,Xx(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Kx(c,l,n))})}async function gn(e,t,r,n){return Tn(e,"GET",t,r,n)}async function ct(e,t,r,n,a){return Tn(e,"POST",t,n,a,r)}async function Yo(e,t,r,n,a){return Tn(e,"PUT",t,n,a,r)}async function Jx(e,t,r,n){return Tn(e,"HEAD",t,q(q({},r),{},{noResolveJson:!0}),n)}async function nc(e,t,r,n,a){return Tn(e,"DELETE",t,n,a,r)}var Qx=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ae(t))return{data:null,error:t};throw t}}};let up;up=Symbol.toStringTag;var Yx=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[up]="BlobDownloadBuilder",this.promise=null}asStream(){return new Qx(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ae(t))return{data:null,error:t};throw t}}};const Zx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ed={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var e0=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=sc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var a=this;try{let i;const o=q(q({},Ed),n);let l=q(q({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=q(q({},l),n.headers));const d=a._removeEmptyFolders(t),h=a._getFinalPath(d),x=await(e=="PUT"?Yo:ct)(a.fetch,`${a.url}/object/${h}`,i,q({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:d,id:x.Id,fullPath:x.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(ae(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const d=q({upsert:Ed.upsert},n),h=q(q({},a.headers),{"x-upsert":String(d.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType),{data:{path:i,fullPath:(await Yo(a.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(ae(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const a=q({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await ct(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new ci("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await ct(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ae(a))return{data:null,error:a};throw a}}async copy(e,t,r){var n=this;try{return{data:{path:(await ct(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ae(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var n=this;try{let a=n._getFinalPath(e),i=await ct(n.fetch,`${n.url}/object/sign/${a}`,q({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ae(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var n=this;try{const a=await ct(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>q(q({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ae(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>gn(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Yx(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:Qo(await gn(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await Jx(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ae(n)&&n instanceof Jo){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await nc(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const a=q(q(q({},Zx),t),{},{prefix:e||""});return{data:await ct(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ae(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const n=q({},e);return{data:await ct(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const hp="2.89.0",pp={"X-Client-Info":`storage-js/${hp}`};var t0=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=q(q({},pp),t),this.fetch=sc(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await gn(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await gn(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await ct(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await Yo(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ae(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await ct(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await nc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},r0=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},pp),t),this.fetch=sc(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await ct(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await gn(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await nc(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ae(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!Wx(e))throw new ci("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Ux({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const ac={"X-Client-Info":`storage-js/${hp}`,"Content-Type":"application/json"};var fp=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function We(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Wi=class extends fp{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},s0=class extends fp{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const ic=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),n0=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Td=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),a0=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new Wi(Td(i),n,o))}).catch(()=>{const i=n+"";t(new Wi(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new Wi(a.statusText||`HTTP ${n} error`,n,i))}}else t(new s0(Td(e),e))},i0=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(n0(n)?(a.headers=q({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,q(q({},a),r))};async function o0(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,i0(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>a0(c,l,n))})}async function He(e,t,r,n,a){return o0(e,"POST",t,n,a,r)}var l0=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},ac),t),this.fetch=ic(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await He(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await He(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}},c0=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},ac),t),this.fetch=ic(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await He(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await He(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await He(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}},d0=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=q(q({},ac),t),this.fetch=ic(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await He(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await He(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}},u0=class extends d0{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new h0(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},h0=class extends l0{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new p0(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},p0=class extends c0{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,q(q({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},f0=class extends t0{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new e0(this.url,this.headers,e,this.fetch)}get vectors(){return new u0(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new r0(this.url+"/iceberg",this.headers,this.fetch)}};const mp="2.89.0",Vr=30*1e3,Zo=3,Hi=Zo*Vr,m0="http://localhost:9999",x0="supabase.auth.token",g0={"X-Client-Info":`gotrue-js/${mp}`},el="X-Supabase-Api-Version",xp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},v0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,b0=10*60*1e3;class vn extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function W(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class y0 extends vn{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function w0(e){return W(e)&&e.name==="AuthApiError"}class xr extends vn{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Lt extends vn{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Ve extends Lt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function j0(e){return W(e)&&e.name==="AuthSessionMissingError"}class $r extends Lt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Yn extends Lt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Zn extends Lt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function k0(e){return W(e)&&e.name==="AuthImplicitGrantRedirectError"}class Pd extends Lt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class N0 extends Lt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class tl extends Lt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Gi(e){return W(e)&&e.name==="AuthRetryableFetchError"}class Ad extends Lt{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class rl extends Lt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rd=` 	
\r=`.split(""),_0=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Rd.length;t+=1)e[Rd[t].charCodeAt(0)]=-2;for(let t=0;t<Da.length;t+=1)e[Da[t].charCodeAt(0)]=t;return e})();function Od(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Da[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Da[n]),t.queuedBits-=6}}function gp(e,t,r){const n=_0[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Id(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{E0(o,n,r)};for(let o=0;o<e.length;o+=1)gp(e.charCodeAt(o),a,i);return t.join("")}function S0(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function C0(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}S0(n,t)}}function E0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function cs(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)gp(e.charCodeAt(a),r,n);return new Uint8Array(t)}function T0(e){const t=[];return C0(e,r=>t.push(r)),new Uint8Array(t)}function yr(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Od(a,r,n)),Od(null,r,n),t.join("")}function P0(e){return Math.round(Date.now()/1e3)+e}function A0(){return Symbol("auth-callback")}const je=()=>typeof window<"u"&&typeof document<"u",dr={tested:!1,writable:!1},vp=()=>{if(!je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dr.tested)return dr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),dr.tested=!0,dr.writable=!0}catch{dr.tested=!0,dr.writable=!1}return dr.writable};function R0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const bp=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),O0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Br=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ur=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},we=async(e,t)=>{await e.removeItem(t)};class di{constructor(){this.promise=new di.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}di.promiseConstructor=Promise;function qi(e){const t=e.split(".");if(t.length!==3)throw new rl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!v0.test(t[n]))throw new rl("JWT not in base64url format");return{header:JSON.parse(Id(t[0])),payload:JSON.parse(Id(t[1])),signature:cs(t[2]),raw:{header:t[0],payload:t[1]}}}async function I0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function z0(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function $0(e){return("0"+e.toString(16)).substr(-2)}function D0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,$0).join("")}async function L0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function M0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await L0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dr(e,t,r=!1){const n=D0();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Br(e,`${t}-code-verifier`,a);const i=await M0(n);return[i,n===i?"plain":"s256"]}const U0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function F0(e){const t=e.headers.get(el);if(!t||!t.match(U0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function V0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function B0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const W0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lr(e){if(!W0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ki(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function H0(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function zd(e){return JSON.parse(JSON.stringify(e))}const fr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),G0=[502,503,504];async function $d(e){var t;if(!O0(e))throw new tl(fr(e),0);if(G0.includes(e.status))throw new tl(fr(e),e.status);let r;try{r=await e.json()}catch(i){throw new xr(fr(i),i)}let n;const a=F0(e);if(a&&a.getTime()>=xp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Ad(fr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ve}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ad(fr(r),e.status,r.weak_password.reasons);throw new y0(fr(r),e.status||500,n)}const q0=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function G(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[el]||(i[el]=xp["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await K0(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function K0(e,t,r,n,a,i){const o=q0(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new tl(fr(c),0)}if(l.ok||await $d(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await $d(c)}}function ot(e){var t;let r=null;Q0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=P0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Dd(e){const t=ot(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ht(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function X0(e){return{data:e,error:null}}function J0(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=li(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Ld(e){return e}function Q0(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xi=["global","local","others"];class Y0{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=bp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Xi[0]){if(Xi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xi.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(W(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ht})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=li(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:J0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(W(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ht})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ld});if(h.error)throw h.error;const x=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(g.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},x),d),error:null}}catch(d){if(W(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Lr(t);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ht})}catch(r){if(W(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Lr(t);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ht})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Lr(t);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ht})}catch(n){if(W(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Lr(t.userId);try{const{data:r,error:n}=await G(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Lr(t.userId),Lr(t.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},h=await G(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:Ld});if(h.error)throw h.error;const x=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(g=>{const w=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(g.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},x),d),error:null}}catch(d){if(W(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await G(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await G(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await G(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(W(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await G(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(W(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await G(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(W(r))return{data:null,error:r};throw r}}}function Md(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Mr={debug:!!(globalThis&&vp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yp extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Z0 extends yp{}async function eg(e,t,r){Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Mr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Z0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Mr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function tg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wp(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rg(e){return parseInt(e,16)}function sg(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function ng(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:d,scheme:h,uri:x,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=wp(e.address),g=h?`${h}://${n}`:n,w=e.statement?`${e.statement}
`:"",k=`${g} wants you to sign in with your Ethereum account:
${v}

${w}`;let m=`URI: ${x}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(m+=`
Expiration Time: ${a.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),c&&(m+=`
Request ID: ${c}`),d){let u=`
Resources:`;for(const p of d){if(!p||typeof p!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${p}`);u+=`
- ${p}`}m+=u}return`${k}
${m}`}class pe extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class La extends pe{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function ag({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pe({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pe({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new pe({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pe({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pe({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new pe({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pe({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(jp(o)){if(i.rp.id!==o)return new pe({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pe({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ig({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new pe({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pe({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(jp(n)){if(r.rpId!==n)return new pe({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pe({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pe({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pe({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class og{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const lg=new og;function cg(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=li(e,["challenge","user","excludeCredentials"]),i=cs(t).buffer,o=Object.assign(Object.assign({},r),{id:cs(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:cs(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function dg(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=li(e,["challenge","allowCredentials"]),a=cs(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:cs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function ug(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:yr(new Uint8Array(e.response.attestationObject)),clientDataJSON:yr(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hg(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:yr(new Uint8Array(a.authenticatorData)),clientDataJSON:yr(new Uint8Array(a.clientDataJSON)),signature:yr(new Uint8Array(a.signature)),userHandle:a.userHandle?yr(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jp(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ud(){var e,t;return!!(je()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pg(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new La("Browser returned unexpected credential type",t)}:{data:null,error:new La("Empty credential response",t)}}catch(t){return{data:null,error:ag({error:t,options:e})}}}async function fg(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new La("Browser returned unexpected credential type",t)}:{data:null,error:new La("Empty credential response",t)}}catch(t){return{data:null,error:ig({error:t,options:e})}}}const mg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},xg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ma(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Ma(l,o):n[i]=Ma(o)}else n[i]=o}return n}function gg(e,t){return Ma(mg,e,t||{})}function vg(e,t){return Ma(xg,e,t||{})}class bg{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??lg.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:d}=o.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(o.webauthn.type){case"create":{const d=gg(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:x}=await pg({publicKey:d,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:x}}case"request":{const d=vg(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:x}=await fg(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:d,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:x}}}}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new xr("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new vn("rpId is required for WebAuthn authentication")};try{if(!Ud())return{data:null,error:new xr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new xr("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new vn("rpId is required for WebAuthn registration")};try{if(!Ud())return{data:null,error:new xr("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var x;return(x=h.data)===null||x===void 0?void 0:x.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:d}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(o){return W(o)?{data:null,error:o}:{data:null,error:new xr("Unexpected error in register",o)}}}}tg();const yg={url:m0,storageKey:x0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:g0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Fd(e,t,r){return await r()}const Ur={};class bn{get jwks(){var t,r;return(r=(t=Ur[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ur[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ur[this.storageKey]=Object.assign(Object.assign({},Ur[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},yg),t);if(this.storageKey=i.storageKey,this.instanceID=(r=bn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,bn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&je()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Y0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=bp(i.fetch),this.lock=i.lock||Fd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&je()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=eg:this.lock=Fd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:vp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Md(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Md(this.memoryStorage)),je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${mp}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(je()&&(r=R0(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),je()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),k0(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return W(r)?this._returnResult({error:r}):this._returnResult({error:new xr("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ot}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(W(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:h,password:x,options:f}=t;let v=null,g=null;this.flowType==="pkce"&&([v,g]=await Dr(this.storage,this.storageKey)),i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:x,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:g},xform:ot})}else if("phone"in t){const{phone:h,password:x,options:f}=t;i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:x,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ot})}else throw new Yn("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await we(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dd})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dd})}else throw new Yn("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new $r;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,d,h,x,f;let v,g;if("message"in t)v=t.message,g=t.signature;else{const{chain:w,wallet:k,statement:m,options:u}=t;let p;if(je())if(typeof k=="object")p=k;else{const S=window;if("ethereum"in S&&typeof S.ethereum=="object"&&"request"in S.ethereum&&typeof S.ethereum.request=="function")p=S.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(u!=null&&u.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=k}const j=new URL((r=u==null?void 0:u.url)!==null&&r!==void 0?r:window.location.href),_=await p.request({method:"eth_requestAccounts"}).then(S=>S).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=wp(_[0]);let y=(n=u==null?void 0:u.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!y){const S=await p.request({method:"eth_chainId"});y=rg(S)}const N={domain:j.host,address:b,statement:m,uri:j.href,version:"1",chainId:y,nonce:(a=u==null?void 0:u.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=u==null?void 0:u.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=u==null?void 0:u.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=u==null?void 0:u.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=u==null?void 0:u.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=u==null?void 0:u.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=ng(N),g=await p.request({method:"personal_sign",params:[sg(v),b]})}try{const{data:w,error:k}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:g},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ot});if(k)throw k;if(!w||!w.session||!w.user){const m=new $r;return this._returnResult({data:{user:null,session:null},error:m})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:k})}catch(w){if(W(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,a,i,o,l,c,d,h,x,f,v;let g,w;if("message"in t)g=t.message,w=t.signature;else{const{chain:k,wallet:m,statement:u,options:p}=t;let j;if(je())if(typeof m=="object")j=m;else{const b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))j=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=m}const _=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const b=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),u?{statement:u}:null));let y;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")y=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)y=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in y&&"signature"in y&&(typeof y.signedMessage=="string"||y.signedMessage instanceof Uint8Array)&&y.signature instanceof Uint8Array)g=typeof y.signedMessage=="string"?y.signedMessage:new TextDecoder().decode(y.signedMessage),w=y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...u?["",u,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(n=p==null?void 0:p.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=p==null?void 0:p.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((d=p==null?void 0:p.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((x=(h=p==null?void 0:p.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||x===void 0)&&x.length?["Resources",...p.signInWithSolana.resources.map(y=>`- ${y}`)]:[]].join(`
`);const b=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=b}}try{const{data:k,error:m}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:yr(w)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ot});if(m)throw m;if(!k||!k.session||!k.user){const u=new $r;return this._returnResult({data:{user:null,session:null},error:u})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:m})}catch(k){if(W(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await ur(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new N0;const{data:i,error:o}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ot});if(await we(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new $r;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ot}),{data:c,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const h=new $r;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Dr(this.storage,this.storageKey));const{error:x}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:l,options:c}=t,{data:d,error:h}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new Yn("You must provide either an email or phone number.")}catch(l){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ot});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Dr(this.storage,this.storageKey));const d=await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:X0});return!((i=d.data)===null||i===void 0)&&i.url&&je()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ve;const{error:a}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(W(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await G(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await G(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Yn("You must provide either an email or phone number and a type")}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ur(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Hi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ur(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ki()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=H0(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ht}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ve}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ht})})}catch(r){if(W(r))return j0(r)&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Ve;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Dr(this.storage,this.storageKey));const{data:d,error:h}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ht});if(h)throw h;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ve;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=qi(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(W(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ve;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(W(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!je())throw new Zn("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Zn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Pd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Zn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Pd("No code detected.");const{data:u,error:p}=await this._exchangeCodeForSession(t.code);if(p)throw p;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:u.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=t;if(!i||!l||!o||!d)throw new Zn("No session defined in URL");const h=Math.round(Date.now()/1e3),x=parseInt(l);let f=h+x;c&&(f=parseInt(c));const v=f-h;v*1e3<=Vr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${x}s`);const g=f-x;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,h);const{data:w,error:k}=await this._getUser(i);if(k)throw k;const m={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:x,expires_at:f,refresh_token:o,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:t.type},error:null})}catch(n){if(W(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ur(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(w0(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=A0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Dr(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,d,h;const{data:x,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(d=x.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return je()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(W(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:d,nonce:h}=t,x=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ot}),{data:f,error:v}=x;return v?this._returnResult({data:{user:null,session:null},error:v}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new $r}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:v}))}catch(a){if(await we(this.storage,`${this.storageKey}-code-verifier`),W(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await z0(async a=>(a>0&&await I0(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ot})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Gi(i)&&Date.now()+o-n<Vr})}catch(n){if(this._debug(r,"error",n),W(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),je()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ur(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ur(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Br(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ki()}else if(a&&!a.user&&!a.user){const o=await ur(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await we(this.storage,this.storageKey+"-user"),await Br(this.storage,this.storageKey,a)):a.user=Ki()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Hi;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Hi}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Gi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new di;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ve;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),W(i)){const o={data:null,error:i};return Gi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await we(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Br(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=zd(a);await Br(this.storage,this.storageKey,i)}else{const a=zd(r);await Br(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await we(this.storage,this.storageKey),await we(this.storage,this.storageKey+"-code-verifier"),await we(this.storage,this.storageKey+"-user"),this.userStorage&&await we(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Vr);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Vr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Vr}ms, refresh threshold is ${Zo} ticks`),a<=Zo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yp)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Dr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await G(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await G(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?ug(t.webauthn.credential_response):hg(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await G(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:cg(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:dg(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=qi(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await G(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ve})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ve});const o=await G(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&je()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ve});const o=await G(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&je()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await G(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ve})})}catch(t){if(W(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await G(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ve})})}catch(r){if(W(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+b0>a)return n;const{data:i,error:o}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:g}=await this.getSession();if(g||!v.session)return this._returnResult({data:null,error:g});n=v.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=qi(n);r!=null&&r.allowExpired||V0(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:a,signature:o},error:null}}const h=B0(a.alg),x=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,x,o,T0(`${l}.${c}`)))throw new rl("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(W(n))return this._returnResult({data:null,error:n});throw n}}}bn.nextInstanceID={};const wg=bn,jg="2.89.0";let Ds="";typeof Deno<"u"?Ds="deno":typeof document<"u"?Ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ds="react-native":Ds="node";const kg={"X-Client-Info":`supabase-js-${Ds}/${jg}`},Ng={headers:kg},_g={schema:"public"},Sg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cg={};function yn(e){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(e)}function Eg(e,t){if(yn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(yn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tg(e){var t=Eg(e,"string");return yn(t)=="symbol"?t:t+""}function Pg(e,t,r){return(t=Tg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vd(Object(r),!0).forEach(function(n){Pg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Ag=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Rg=()=>Headers,Og=(e,t,r)=>{const n=Ag(r),a=Rg();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,ce(ce({},o),{},{headers:d}))}};function Ig(e){return e.endsWith("/")?e:e+"/"}function zg(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:d,realtime:h,global:x}=t,f={db:ce(ce({},c),a),auth:ce(ce({},d),i),realtime:ce(ce({},h),o),storage:{},global:ce(ce(ce({},x),l),{},{headers:ce(ce({},(r=x==null?void 0:x.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function $g(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ig(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Dg=class extends wg{constructor(e){super(e)}},Lg=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=$g(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:_g,realtime:Cg,auth:ce(ce({},Sg),{},{storageKey:o}),global:Ng},c=zg(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var d;this.auth=this._initSupabaseAuthClient((d=c.auth)!==null&&d!==void 0?d:{},this.headers,c.global.fetch)}this.fetch=Og(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ce({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new gx(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new f0(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new hx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:d},h,x){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dg({url:this.authUrl.href,headers:ce(ce({},f),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:d,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Ix(this.realtimeUrl.href,ce(ce({},e),{},{params:ce(ce({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Mg=(e,t,r)=>new Lg(e,t,r);function Ug(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Ug()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Fg="https://lvzwbfeyoxpewxplujms.supabase.co",Vg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2endiZmV5b3hwZXd4cGx1am1zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY4NTQxNTEsImV4cCI6MjA4MjQzMDE1MX0.lf0jo9wI2eY3CmAMff8s3NnBQcVKxzOXXTCWVpO5Wpk",re=Mg(Fg,Vg),Bg=e=>{const[t,r]=P.useState({productos:[],clientes:[],condicionesCliente:[],paquetesVIX:[],configuracion:{},historial:[],masterContracts:[],descuentosVolumen:[],metasComerciales:[],perfil:null,perfiles:[]}),[n,a]=P.useState(!0),[i,o]=P.useState(null),[l,c]=P.useState({tipo:"",texto:""}),d=P.useCallback(async()=>{a(!0);try{const v=await Promise.all([re.from("productos").select("*").eq("activo",!0),re.from("clientes").select("*").order("nombre_empresa"),re.from("paquetes_vix").select("*"),re.from("configuracion").select("*"),re.from("master_contracts").select("*, clientes(nombre_empresa)"),re.from("condiciones_cliente").select("*"),re.from("cotizaciones").select("*").order("created_at",{ascending:!1}),re.from("descuentos_volumen").select("*"),re.from("cobranza").select("*, cotizaciones(folio, monto_total, numero_contrato, cliente_id, mc_id, clientes(nombre_empresa))"),re.from("metas_comerciales").select("*").order("anio",{ascending:!1}).order("mes",{ascending:!1}),re.from("perfiles").select("*"),re.auth.getUser().then(async({data:{user:R}})=>{if(!R)return{data:null};const{data:E}=await re.from("perfiles").select("*").eq("id",R.id).maybeSingle();return{data:E?{...E,email:R.email}:{id:R.id,email:R.email,nombre_completo:"Usuario Actual"}}})]),[{data:g,error:w},{data:k,error:m},{data:u},{data:p},{data:j},{data:_},{data:b,error:y},{data:N},{data:S},{data:T},{data:O},C]=v;(w||m||y)&&console.error(" Algunos datos fallaron al cargar:",{errProd:w,errCli:m,errHist:y});const L=(C==null?void 0:C.data)||null,B={};p==null||p.forEach(R=>{B[R.parametro]=R.tipo==="NUMERO"?parseFloat(R.valor):R.valor}),r(R=>({...R,productos:(g||[]).map(E=>({...E,disponible:E.activo,costoBase:parseFloat(E.costo_base)})),clientes:k||[],paquetesVIX:u||[],configuracion:B,masterContracts:j||[],condicionesCliente:(_||[]).map(E=>({...E,clienteId:E.cliente_id,productoId:E.producto_id,tipoAjuste:E.tipo_ajuste,factorDescuento:E.factor_descuento,costoFijo:E.costo_fijo})),historial:(b||[]).map(E=>{var A,z,D,$,H,K,Q,ue,me,Pe;const U=(k||[]).find(fi=>String(fi.id)===String(E.cliente_id));return{...E,fecha:new Date(E.created_at),cliente:U||{nombre_empresa:"Cargando...",id:E.cliente_id},items:((A=E.json_detalles)==null?void 0:A.items)||[],distribucion:((z=E.json_detalles)==null?void 0:z.distribucion)||[],paqueteVIX:((D=E.json_detalles)==null?void 0:D.paqueteVIX)||(E.paquete_vix?{nombre:"VIX"}:null),costoVIX:(($=E.json_detalles)==null?void 0:$.costoVIX)||0,presupuestoBase:((H=E.json_detalles)==null?void 0:H.presupuestoBase)||E.monto_total,subtotalTV:((K=E.json_detalles)==null?void 0:K.subtotalTV)||((Q=E.json_detalles)==null?void 0:Q.subtotal_tv)||E.monto_total,total:E.monto_total,subtotalGeneral:((ue=E.json_detalles)==null?void 0:ue.subtotalGeneral)||(((me=E.json_detalles)==null?void 0:me.subtotal_tv)||0)+(((Pe=E.json_detalles)==null?void 0:Pe.costo_vix)||0)||E.monto_total/1.16}}),descuentosVolumen:N||[],metasComerciales:T||[],cobranza:S||[],perfil:C==null?void 0:C.data,perfiles:(()=>{const E=O||[],U=C==null?void 0:C.data;return U&&!E.find(A=>A.id===U.id)?[...E,U]:E})(),configuracion:B})),console.log(" Datos cargados:",{clientes:k==null?void 0:k.length,cotizaciones:b==null?void 0:b.length,metas:T==null?void 0:T.length,timestamp:new Date().toLocaleTimeString()}),(!b||b.length===0)&&console.warn(" Advertencia: No se recuperaron cotizaciones de la base de datos.")}catch(v){console.error("Error al cargar base de datos:",v),o(v.message)}finally{a(!1)}},[]),h=async(v,g,w="id")=>{c({tipo:"cargando",texto:"Guardando datos..."});const k=m=>Object.fromEntries(Object.entries(m).filter(([u,p])=>p!=null&&p!==""));try{let m,u;if(Array.isArray(g)){const p=g.map(_=>k(_)),j=await re.from(v).upsert(p,{onConflict:w}).select();m=j.data,u=j.error}else{const p=k(g);if(p.id){const j=await re.from(v).upsert(p).select();m=j.data,u=j.error}else{const j=await re.from(v).insert(p).select();m=j.data,u=j.error}}if(u)throw console.error(`Error en persistencia (${v}):`,u),new Error(`${u.message} (${u.code})`);return c({tipo:"exito",texto:"Guardado correctamente!"}),d(),m}catch(m){return console.error("Error detallado en persistencia:",m),c({tipo:"error",texto:`Error: ${m.message}`}),null}},x=async(v,g,w)=>{c({tipo:"cargando",texto:"Eliminando registro..."});try{const{error:k}=await re.from(v).delete().eq(g,w);if(k)throw k;return c({tipo:"exito",texto:"Registro eliminado."}),d(),!0}catch(k){return c({tipo:"error",texto:`Error: ${k.message}`}),!1}},f=async v=>{c({tipo:"cargando",texto:`Limpiando tabla ${v}...`});try{const{error:g}=await re.from(v).delete().neq("id","00000000-0000-0000-0000-000000000000");if(g)throw g;return c({tipo:"exito",texto:`Tabla ${v} vaciada correctamente.`}),d(),!0}catch(g){return console.error(`Error limpiando tabla ${v}:`,g),c({tipo:"error",texto:`Error: ${g.message}`}),!1}};return P.useEffect(()=>{d()},[d,e]),{...t,loading:n,error:i,mensajeAdmin:l,setMensajeAdmin:c,cargarDatos:d,guardarRegistro:h,eliminarRegistro:x,limpiarTabla:f}},Wg=(e={})=>{const{productos:t=[],condicionesCliente:r=[],descuentosVolumen:n=[],paquetesVIX:a=[],configuracion:i={},clientes:o=[]}=e,[l,c]=P.useState(""),[d,h]=P.useState(""),[x,f]=P.useState("30"),[v,g]=P.useState([]),[w,k]=P.useState(null),[m,u]=P.useState(""),[p,j]=P.useState(""),[_,b]=P.useState([]),[y,N]=P.useState([]),S=P.useCallback((D,$)=>{const H=t.find(Q=>Q.id===D);if(!H)return 0;const K=r.find(Q=>String(Q.clienteId)===String($)&&String(Q.productoId)===String(D));if(K){if(K.tipoAjuste==="FIJO")return parseFloat(K.costoFijo);if(K.tipoAjuste==="FACTOR")return H.costoBase*parseFloat(K.factorDescuento)}return H.costoBase},[t,r]),T=P.useCallback((D,$)=>{const H=n.find(K=>K.categoria===D&&$>=K.minimo&&$<=K.maximo);return H?H.descuento:0},[n]),{subtotalTVActual:O,subtotalVIXActual:C}=P.useMemo(()=>{const D=v.reduce((K,Q)=>{const ue=S(Q.id,l);return K+ue*Q.cantidad},0),$=a.find(K=>K.id===m),H=$?$.inversion:0;return{subtotalTVActual:D,subtotalVIXActual:H}},[v,m,a,l,S]),L=O+C,B=P.useCallback(()=>{if(!d||!l)return;const D=parseFloat(d),$=t.filter(ue=>ue.disponible&&(p===""||ue.plaza===p));if($.length===0)return;g([]);const H=[],K=3,Q=$.slice(0,K);Q.forEach(ue=>{const me=S(ue.id,l);if(me>0){const Pe=Math.floor(D/Q.length/me);Pe>0&&H.push({id:ue.id,cantidad:Pe})}}),g(H)},[d,l,t,p,S]),R=P.useCallback(()=>{if(!l||v.length===0&&!m)return;const D=v.map(ze=>{const xt=t.find(Or=>Or.id===ze.id);if(!xt)return null;const Rr=S(ze.id,l),Ns=T(xt.categoria,ze.cantidad),An=Rr*(1-Ns),Rn=An*ze.cantidad;return{producto:xt,cantidad:ze.cantidad,precioBase:Rr,descuentoVolumen:Ns*100,precioUnitario:An,subtotal:Rn}}).filter(Boolean),$=D.reduce((ze,xt)=>ze+xt.subtotal,0),H=a.find(ze=>ze.id===m),K=H?H.inversion:0,Q=$+K,ue=Q*(i.iva_porcentaje||.16),me=Q+ue,Pe=parseInt(x)||30,fi=D.map(ze=>{const xt=ze.cantidad,Rr=Math.max(1,Math.floor(Pe/7));let Ns=[],An=Math.floor(xt/Rr),Rn=xt%Rr;for(let Or=0;Or<Rr;Or++){let dc=An;Rn>0&&(dc+=1,Rn-=1),Ns.push(dc)}return{producto:ze.producto,totalUnidades:xt,diasCampana:Pe,distribucionSemanal:Ns.filter(Or=>Or>=0),unidadesPorDia:(xt/Pe).toFixed(2)}}),Ip={id:`COT-${Date.now()}`,fecha:new Date,cliente:o.find(ze=>ze.id===l),items:D,subtotalTV:$,paqueteVIX:H,costoVIX:K,subtotalGeneral:Q,presupuestoBase:parseFloat(d)||0,iva:ue,total:me,diasCampana:Pe,distribucion:fi,presupuestoBase:d?parseFloat(d):null};k(Ip)},[l,v,m,t,S,T,a,i,x,d,o]),E=()=>{c(""),h(""),f("30"),g([]),k(null),j(""),u("")},U=D=>{v.find($=>$.id===D)||g([...v,{id:D,cantidad:0}])},A=D=>{g(v.filter($=>$.id!==D))};return{clienteSeleccionado:l,setClienteSeleccionado:c,presupuesto:d,setPresupuesto:h,duracionDias:x,setDuracionDias:f,productosSeleccionados:v,setProductosSeleccionados:g,cotizacionResult:w,setCotizacionResult:k,paqueteVIX:m,setPaqueteVIX:u,plazaSeleccionada:p,setPlazaSeleccionada:j,historial:_,setHistorial:b,comparar:y,setComparar:N,subtotalActual:L,subtotalTVActual:O,subtotalVIXActual:C,generarCotizacion:R,iniciarNuevaCotizacion:E,agregarProducto:U,eliminarProducto:A,actualizarCantidad:(D,$)=>{const H=$===""?0:parseInt($)||0;if(H<0){A(D);return}g(v.map(K=>K.id===D?{...K,cantidad:H}:K))},calcularPrecioUnitario:S,sugerirDistribucion:B}},M=(e,t=2)=>e==null?t>0?"$0.00":"$0":e.toLocaleString("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:t,maximumFractionDigits:t}),Hg=(e,t,r={})=>{var f;const n=e.distribucion.reduce((v,g)=>v+g.totalUnidades,0),a=((f=e.distribucion[0])==null?void 0:f.distribucionSemanal.length)||0,i=new Date,o=i.toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),l=Array.from({length:a},(v,g)=>`<th class="header-cell">S${g+1}</th>`).join(""),c=e.distribucion.map(v=>{const g=v.distribucionSemanal.map(u=>`<td class="data-cell text-center" style="font-size: 8px; padding: 4px 2px;">${u||0}</td>`).join(""),w=e.items.find(u=>u.producto.id===v.producto.id),k=w?w.precioUnitario:0,m=w?w.subtotal:0;return`
      <tr>
        <td class="data-cell" style="padding: 4px 6px;">
          <div class="product-info">
            <span class="product-title" style="font-size: 8.5px; font-weight: 800;">${v.producto.tipo}</span>
            <span class="product-subtitle" style="font-size: 6.5px; display: block;">${v.producto.canal} | ${v.producto.plaza} | ${v.producto.horario}</span>
          </div>
        </td>
        <td class="data-cell text-center font-bold" style="font-size: 8.5px; padding: 4px 2px;">${v.totalUnidades}</td>
        <td class="data-cell text-right" style="font-size: 7.5px; padding: 4px 6px;">${M(k)}</td>
        ${g}
        <td class="data-cell text-right font-bold text-red-700" style="font-size: 8.5px; padding: 4px 6px;">${M(m)}</td>
      </tr>
    `}).join(""),d=Array.from({length:a}).map((v,g)=>e.distribucion.reduce((w,k)=>w+(k.distribucionSemanal[g]||0),0)),h=`
    <!DOCTYPE html>
    <html lang="es">
    <head>
      <meta charset="UTF-8">
      <title>Orden de Pauta - ${e.cliente.nombre_empresa||e.cliente.nombre||"Cliente"}</title>
      <script src="https://cdn.tailwindcss.com"><\/script>
      <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
      <style>
        @page {
          size: letter;
          margin: 0;
        }
        :root {
          --tvsa-red: #cc0000;
          --tvsa-dark: #1a1a1a;
        }
        body { 
          font-family: 'Inter', sans-serif; 
          background-color: #eee;
          color: #333;
          margin: 0;
          padding: 0;
          -webkit-print-color-adjust: exact;
        }
        .order-container {
          width: 215.9mm;
          margin: 0 auto;
          background: white;
          padding: 5mm 15mm;
          box-sizing: border-box;
          position: relative;
          overflow: hidden;
        }
        .header {
          border-bottom: 2px solid var(--tvsa-red);
          padding-bottom: 6px;
          margin-bottom: 15px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }
        .logo-text {
          font-family: 'Montserrat', sans-serif;
          font-weight: 900;
          font-size: 20px;
          color: var(--tvsa-red);
          letter-spacing: -1px;
        }
        .doc-title {
          font-family: 'Montserrat', sans-serif;
          font-weight: 900;
          text-transform: uppercase;
          font-size: 9px;
          background: var(--tvsa-dark);
          color: white;
          padding: 2px 8px;
          border-radius: 2px;
        }
        .client-info-box {
          background: #f9f9f9;
          border-radius: 6px;
          padding: 10px 12px;
          margin-bottom: 25px; /* Ms aire para bajar el detalle */
          display: grid;
          grid-template-cols: 2fr 1fr;
          gap: 10px;
        }
        .label {
          font-size: 7px;
          font-weight: 800;
          color: #999;
          text-transform: uppercase;
        }
        .value {
          font-weight: 700;
          color: var(--tvsa-dark);
          font-size: 11px;
        }
        .pauta-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 15px;
        }
        .header-cell {
          background: #f0f0f0;
          color: #666;
          font-size: 7.5px;
          font-weight: 800;
          text-transform: uppercase;
          padding: 6px 3px;
          border: 1px solid #ddd;
        }
        .data-cell {
          padding: 6px 4px;
          border: 1px solid #eee;
          font-size: 8.5px;
        }
        .footer-cell {
          background: #eee;
          font-weight: 800;
          font-size: 8.5px;
          padding: 6px 4px;
        }
        .summary-section {
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          margin-top: 15px; /* Ms aire antes de los totales */
          gap: 8px;
          width: 100%;
        }
        .vix-box {
          border: 1px solid #eee;
          border-radius: 6px;
          padding: 12px 15px; /* Ms aire al VIX */
          width: 220px;
          text-align: right;
          background: #fdfdfd;
        }
        .totals-column {
          width: 220px;
          text-align: right;
        }
        .total-box {
          background: var(--tvsa-red);
          color: white;
          border-radius: 4px;
          padding: 10px 15px;
          display: inline-block;
          text-align: right;
          width: 100%;
          box-sizing: border-box;
          box-shadow: 0 2px 4px rgba(204,0,0,0.1);
        }
        .total-label {
          font-weight: 800;
          font-size: 9px;
          text-transform: uppercase;
        }
        .total-value {
          font-size: 19px;
          font-weight: 900;
          font-family: 'Montserrat', sans-serif;
        }
        .iva-disclaimer {
          font-size: 9px;
          font-weight: 900;
          color: #333;
          margin-top: 2px;
          text-transform: uppercase;
          padding-right: 5px;
        }
        .disclaimer-text {
          font-size: 7px; 
          color: #888; 
          line-height: 1.3; 
          margin-top: 10px; 
          max-width: 60%;
        }
        .signature-area {
          margin-top: 110px; /* Aumentado para bajar las firmas y pie de pgina */
          margin-bottom: 25px;
          display: flex;
          justify-content: center;
          width: 100%;
          gap: 60px;
        }
        .signature-block {
          flex: 1;
          max-width: 250px;
          padding: 15px;
          border: 1px solid #eee;
          border-radius: 6px;
          text-align: center;
          background: #fcfcfc;
        }
        .signature-line {
          border-top: 1.5px solid #333;
          margin-top: 45px;
          padding-top: 8px;
          font-size: 9px;
          font-weight: 800;
          text-transform: uppercase;
          color: var(--tvsa-dark);
        }
        .page-footer {
          text-align: center;
          font-size: 7.5px;
          color: #999;
          font-weight: 700;
          text-transform: uppercase;
          width: 100%;
          border-top: 1px solid #eee;
          padding-top: 10px;
          margin-bottom: 5mm;
        }
        
        @media print {
          body { background: white; }
          .order-container { box-shadow: none; margin: 0; border: none; min-height: auto; }
          .no-print { display: none !important; }
        }
      </style>
    </head>
    <body>
      <div class="no-print p-4 flex justify-center gap-4 bg-gray-800">
        <button onclick="window.print()" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-full shadow-lg transition-all">
          Imprimir / Descargar PDF
        </button>
        <button onclick="window.close()" class="bg-white hover:bg-gray-100 text-gray-800 font-bold py-2 px-6 rounded-full shadow-lg transition-all">
          Cerrar Vista
        </button>
      </div>

      <div class="order-container">
        <div class="header">
          <div class="logo-text">televisa<span style="color:#333">univision</span></div>
          <div class="doc-title">Propuesta Comercial de Pauta</div>
        </div>

        <div class="client-info-box">
          <div>
            <div class="label">Razon Social / Cliente</div>
            <div class="value" style="font-size: 13px;">${e.cliente.nombre_empresa||e.cliente.nombre||"Cliente"}</div>
            <div class="label" style="margin-top:8px">ID de Propuesta</div>
            <div class="value" style="font-size: 9px">${e.id}</div>
          </div>
          <div style="text-align: right">
            <div class="label">Fecha de Emisin</div>
            <div class="value" style="font-size: 9px">${i.toLocaleDateString("es-MX")}</div>
            <div class="label" style="margin-top:8px">Vigencia</div>
            <div class="value" style="font-size: 9px">${e.diasCampana} Das de Campaa</div>
          </div>
        </div>

        <h3 style="font-size: 8px; font-weight: 900; text-transform: uppercase; color: #777; margin-bottom: 8px; letter-spacing: 1px;">Distribucin Semanal y Frecuencias</h3>
        
        <table class="pauta-table">
          <thead>
            <tr>
              <th class="header-cell" style="text-align: left">Producto y Especificaciones</th>
              <th class="header-cell">Total</th>
              <th class="header-cell">Unitario</th>
              ${l}
              <th class="header-cell" style="text-align: right">Subtotal</th>
            </tr>
          </thead>
          <tbody>
            ${c}
          </tbody>
          <tfoot>
            <tr>
              <td class="footer-cell text-right" style="padding-right: 15px; font-size: 8px;">Unidades Totales</td>
              <td class="footer-cell text-center" style="font-size: 9px;">${n}</td>
              <td class="footer-cell"></td>
              ${d.map(v=>`<td class="footer-cell text-center" style="font-size: 9px;">${v}</td>`).join("")}
              <td class="footer-cell text-right" style="font-weight: 900; color: var(--tvsa-red); font-size: 9px;">${M(e.subtotalTV)}</td>
            </tr>
          </tfoot>
        </table>

        <div class="summary-section">
          ${e.paqueteVIX?`
            <div class="vix-box">
              <div class="label" style="color: var(--tvsa-red)">Inversin Digital</div>
              <div style="font-weight: 900; font-size: 13px; color: #111;">${M(e.costoVIX)}</div>
              <div style="font-size: 8px; color: #555; margin-top: 3px">
                ${e.paqueteVIX.nombre} | ${(e.paqueteVIX.impresiones||0).toLocaleString()} Impresiones
              </div>
            </div>
          `:""}

          <div class="totals-column">
            <div class="total-box">
              <div class="total-label" style="font-size: 9px;">Inversin Final</div>
              <div class="total-value">${M(e.subtotalGeneral)}</div>
            </div>
            <div class="iva-disclaimer">MS IVA</div>
          </div>
        </div>

        <div class="disclaimer-text">
           Propuesta sujeta a disponibilidad de espacios. Precios de lista vigentes segn contrato. Esta proyeccin no incluye cargos por produccin u otros servicios no especificados.
        </div>

        <div class="signature-area">
          <div class="signature-block">
            <div style="font-size: 10px; font-weight: 900; color: #111; margin-bottom: 2px;">${(r==null?void 0:r.nombre_completo)||"Asesor Comercial"}</div>
            <div style="font-size: 8px; color: #666; margin-bottom: 5px;">${(r==null?void 0:r.telefono)||"Televisa Univisin MID"}</div>
            <div class="signature-line">Por Televisa Univisin</div>
          </div>
          <div class="signature-block">
            <div style="height: 15px;"></div>
            <div class="signature-line">Nombre y Firma Aceptacin Cliente</div>
          </div>
        </div>

        <div class="page-footer">
          Generado el: ${o} | TELEVISA UNIVISIN MID - PROPUESTA PUBLICITARIA 2025
        </div>
      </div>
    </body>
    </html>
  `,x=window.open("","_blank","width=1100,height=850");x?(x.document.write(h),x.document.close()):alert("El navegador bloque la apertura de la propuesta. Por favor permite las ventanas emergentes.")};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qg=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Bd=e=>{const t=qg(e);return t.charAt(0).toUpperCase()+t.slice(1)},kp=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Kg=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>P.createElement("svg",{ref:c,...Xg,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:kp("lucide",a),...!i&&!Kg(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>P.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(e,t)=>{const r=P.forwardRef(({className:n,...a},i)=>P.createElement(Jg,{ref:i,iconNode:t,className:kp(`lucide-${Gg(Bd(e))}`,`lucide-${e}`,n),...a}));return r.displayName=Bd(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],wn=F("activity",Qg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Np=F("arrow-left",Yg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_p=F("arrow-right",Zg);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Sp=F("arrow-up-right",ev);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],rv=F("badge-dollar-sign",tv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],rt=F("briefcase",sv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Ua=F("building-2",nv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],oc=F("calculator",av);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],ov=F("calendar-days",iv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ui=F("calendar",lv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Xs=F("chart-column",cv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],uv=F("chart-pie",dv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pv=F("chevron-left",hv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ar=F("chevron-right",fv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jt=F("circle-alert",mv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sl=F("circle-check-big",xv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],rr=F("circle-check",gv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],nl=F("circle-user",vv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],lc=F("clock",bv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Wd=F("database",yv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ke=F("dollar-sign",wv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cp=F("download",jv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Nv=F("ellipsis",kv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Sv=F("external-link",_v);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ep=F("eye",Cv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Er=F("file-text",Ev);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Js=F("globe",Tv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Av=F("hash",Pv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Ov=F("history",Rv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Tp=F("info",Iv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],cc=F("layers",zv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ji=F("layout-dashboard",$v);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Lv=F("loader-circle",Dv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],al=F("lock",Mv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Hd=F("log-out",Uv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hi=F("mail",Fv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ws=F("map-pin",Vv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Wv=F("menu",Bv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M5 12h14",key:"1ays0h"}]],Gv=F("minus",Hv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Kv=F("monitor",qv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jv=F("package",Xv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Yv=F("panels-top-left",Qv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],jn=F("pen-line",Zv);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Fa=F("phone",eb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],rb=F("play",tb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kt=F("plus",sb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ab=F("power-off",nb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Pn=F("printer",ib);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],At=F("refresh-cw",ob);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cr=F("save",lb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],at=F("search",cb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Va=F("settings",db);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],js=F("shield-check",ub);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],pb=F("sliders-vertical",hb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],mb=F("smartphone",fb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],gb=F("sparkles",xb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bb=F("square-pen",vb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gs=F("tag",yb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],kn=F("target",wb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nt=F("trash-2",jb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pp=F("trending-up",kb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],il=F("triangle-alert",Nb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],Ba=F("tv",_b);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Cb=F("type",Sb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Gd=F("upload",Eb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ap=F("user-plus",Tb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tr=F("user",Pb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ks=F("users",Ab);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ob=F("wrench",Rb);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$t=F("x",Ib);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],pi=F("zap",zb),Wa=({label:e,type:t="text",value:r,onChange:n,icon:a,required:i=!1,placeholder:o=" ",className:l="",...c})=>s.jsx("div",{className:`relative group w-full ${l}`,children:s.jsxs("div",{className:"relative",children:[a&&s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-400 group-focus-within:text-brand-orange transition-colors z-10",children:s.jsx(a,{size:18})}),s.jsx("input",{type:t,value:r,onChange:n,required:i,placeholder:o,className:`
                        peer w-full h-14 bg-white border border-enterprise-200 rounded-2xl 
                        ${a?"pl-11":"pl-4"} pr-4 pt-4 pb-1
                        font-bold text-enterprise-950 focus:border-brand-orange focus:ring-4 
                        focus:ring-brand-orange/5 outline-none transition-all duration-300
                    `,...c}),s.jsx("label",{className:`
                    absolute left-11 top-1/2 -translate-y-1/2 
                    ${!a&&"left-4"}
                    text-enterprise-400 text-[11px] font-bold pointer-events-none 
                    transition-all duration-300
                    peer-focus:top-3 peer-focus:text-[9px] peer-focus:text-brand-orange 
                    peer-focus:font-black peer-focus:uppercase peer-focus:tracking-widest
                    ${r&&r.toString().length>0?"top-3 text-[9px] text-enterprise-400 font-black uppercase tracking-widest":""}
                `,children:e})]})}),$b=({label:e,value:t,onChange:r,icon:n,children:a,className:i="",...o})=>s.jsx("div",{className:`relative group w-full ${i}`,children:s.jsxs("div",{className:"relative",children:[n&&s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-400 group-focus-within:text-brand-orange transition-colors z-10 pointer-events-none",children:s.jsx(n,{size:18})}),s.jsx("select",{value:t,onChange:r,className:`
                        peer w-full h-14 bg-white border border-enterprise-200 rounded-2xl 
                        ${n?"pl-11":"pl-4"} pr-10 pt-4 pb-1
                        font-bold text-enterprise-950 focus:border-brand-orange focus:ring-4 
                        focus:ring-brand-orange/5 outline-none transition-all duration-300
                        appearance-none
                    `,...o,children:a}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-enterprise-400 pointer-events-none group-focus-within:text-brand-orange transition-all",children:s.jsx("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M1 1L5 5L9 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("label",{className:`
                    absolute left-11 top-3 text-[9px] font-black uppercase tracking-widest transition-all duration-300 pointer-events-none
                    ${t&&t.toString().length>0?"text-enterprise-400":"text-enterprise-400 opacity-60"}
                    peer-focus:text-brand-orange peer-focus:opacity-100
                `,children:e})]})}),Db=({clientes:e=[],clienteSeleccionado:t,setClienteSeleccionado:r})=>{var a;const n=e.find(i=>String(i.id)===String(t));return s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-premium border border-enterprise-100 overflow-hidden animate-premium-fade",children:[s.jsxs("div",{className:"bg-enterprise-950 px-6 sm:px-8 py-4 sm:py-5 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-white text-sm sm:text-base font-black flex items-center gap-3 uppercase tracking-tight",children:[s.jsx(Tr,{size:18,className:"text-brand-orange"}),"Commercial Identity"]}),s.jsx("div",{className:"bg-white/10 px-3 py-1 rounded-full",children:s.jsx("span",{className:"text-[9px] font-black text-white/50 uppercase tracking-widest leading-none",children:"Unified Identity"})})]}),s.jsxs("div",{className:"p-8 space-y-6",children:[s.jsxs($b,{label:"Seleccin de Entidad Legal",value:t||"",onChange:i=>r(i.target.value),icon:at,children:[s.jsx("option",{value:"",disabled:!0,children:"Buscar Partner o Razn Social..."}),e.sort((i,o)=>i.nombre_empresa.localeCompare(o.nombre_empresa)).map(i=>{var o;return s.jsxs("option",{value:i.id,children:[(o=i.nombre_empresa)==null?void 0:o.toUpperCase()," ",i.segmento?`[${i.segmento}]`:""]},i.id)})]}),n&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-premium-fade",children:[s.jsxs("div",{className:"p-5 bg-enterprise-50 rounded-2xl border border-enterprise-100 space-y-2 transition-all hover:border-brand-orange/20",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-enterprise-400 uppercase tracking-widest",children:[s.jsx(rt,{size:14,className:"text-brand-orange"}),"Agreement Level"]}),s.jsx("p",{className:"text-sm font-black text-enterprise-900 uppercase tracking-tight",children:((a=n.tipo_acuerdo)==null?void 0:a.replace(/_/g," "))||"LIST PRICE"})]}),s.jsxs("div",{className:"p-5 bg-enterprise-50 rounded-2xl border border-enterprise-100 space-y-2 transition-all hover:border-brand-orange/20",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-enterprise-400 uppercase tracking-widest",children:[s.jsx(js,{size:14,className:"text-brand-orange"}),"Segmentation"]}),s.jsx("p",{className:"text-sm font-black text-enterprise-900 uppercase tracking-tight",children:n.segmento||"GENERAL"})]})]})]})]})},ol={VERSION:"25.1.1",SYSTEM_NAME:"Commercial Suite",ORGANIZATION:"TelevisaUnivision Mxico",FULL_VERSION_LABEL:"V25.1.1 Corporate"},Lb=({productos:e=[],plazaSeleccionada:t,setPlazaSeleccionada:r,presupuesto:n,setPresupuesto:a,duracionDias:i,setDuracionDias:o,paqueteVIX:l,setPaqueteVIX:c,paquetesVIX:d=[],sugerirDistribucion:h,clienteSeleccionado:x})=>{const f=P.useMemo(()=>{const g=e.map(w=>w.plaza).filter(Boolean);return[...new Set(g)].sort()},[e]),v=d.find(g=>g.id===l);return s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-premium border border-enterprise-100 overflow-hidden animate-premium-fade h-full",children:[s.jsxs("div",{className:"bg-enterprise-950 px-6 sm:px-8 py-5 sm:py-6 flex items-center justify-between relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-orange opacity-10 blur-2xl -mr-16 -mt-16"}),s.jsxs("h2",{className:"text-white text-base sm:text-lg font-black flex items-center gap-3 uppercase tracking-tight relative z-10",children:[s.jsx(Ke,{size:20,className:"text-brand-orange"}),"Campaign Config"]}),s.jsx("div",{className:"bg-enterprise-800 rounded-full px-3 py-1 border border-white/10 relative z-10",children:s.jsxs("span",{className:"text-[9px] font-black text-white/50 uppercase tracking-widest leading-none",children:["V",ol.VERSION]})})]}),s.jsxs("div",{className:"p-8 space-y-8",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1 flex items-center gap-2",children:[s.jsx(ws,{size:14,className:"text-brand-orange"}),"Strategic Plaza"]}),s.jsxs("div",{className:"relative group",children:[s.jsxs("select",{value:t,onChange:g=>r(g.target.value),className:"w-full h-12 sm:h-14 bg-enterprise-50 border border-enterprise-200 rounded-2xl pl-4 pr-12 font-black text-enterprise-900 focus:border-brand-orange focus:ring-4 focus:ring-brand-orange/5 outline-none transition-all appearance-none cursor-pointer text-xs sm:text-sm",children:[s.jsx("option",{value:"",children:"Todas las plazas"}),f.map(g=>s.jsx("option",{value:g,children:g.toUpperCase()},g))]}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-enterprise-400 pointer-events-none group-hover:text-brand-orange transition-colors",children:s.jsx(ar,{size:20,className:"rotate-90"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-5",children:[s.jsx(Wa,{label:"Inversin Lmite (MXN)",type:"number",value:n,onChange:g=>a(g.target.value),icon:Ke,placeholder:" "}),s.jsx(Wa,{label:"Vigencia (Das)",type:"number",value:i,onChange:g=>o(g.target.value),icon:ui,placeholder:" "})]}),s.jsxs("div",{className:"space-y-5 pt-8 border-t border-enterprise-100",children:[s.jsxs("div",{className:"flex justify-between items-center ml-1",children:[s.jsxs("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(gb,{size:14,className:"text-brand-orange"})," VIX Digital Integration"]}),s.jsx("div",{className:"w-5 h-5 bg-enterprise-50 rounded-full flex items-center justify-center text-enterprise-300 cursor-help hover:text-brand-orange transition-colors",children:s.jsx(Tp,{size:12})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"relative flex-1 group",children:[s.jsxs("select",{value:l,onChange:g=>c(g.target.value),className:"w-full h-12 sm:h-14 bg-white border border-enterprise-200 rounded-2xl pl-4 pr-12 font-black text-enterprise-900 focus:border-brand-orange focus:ring-4 focus:ring-brand-orange/5 outline-none transition-all appearance-none cursor-pointer text-xs sm:text-sm",children:[s.jsx("option",{value:"",children:"NO DIGITAL DEPLOYMENT"}),d.map(g=>s.jsxs("option",{value:g.id,children:[g.nombre.toUpperCase(),"  ",M(g.inversion)]},g.id))]}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-enterprise-400 pointer-events-none group-focus-within:text-brand-orange",children:s.jsx(ar,{size:20,className:"rotate-90"})})]}),l&&s.jsx("button",{onClick:()=>c(""),className:"w-14 h-14 flex items-center justify-center bg-error-light text-error rounded-2xl hover:bg-error hover:text-white transition-all border border-error/10 shadow-sm",children:s.jsx(Nt,{size:20})})]}),v&&s.jsxs("div",{className:"p-6 bg-enterprise-950 rounded-3xl relative overflow-hidden shadow-2xl animate-premium-fade border border-white/5",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-orange/20 blur-3xl opacity-50"}),s.jsxs("div",{className:"relative z-10 flex flex-col gap-3",children:[s.jsx("span",{className:"text-[9px] font-black text-brand-orange uppercase tracking-[0.4em]",children:"Audience Forecast"}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("span",{className:"text-2xl sm:text-3xl font-black text-white",children:v.impresiones.toLocaleString()}),s.jsx("span",{className:"text-[10px] text-white/40 font-black uppercase tracking-widest",children:"Impressions"})]}),s.jsx("div",{className:"h-px bg-white/10 w-full"}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-white/60 font-black uppercase tracking-widest",children:[s.jsx(wn,{size:12,className:"text-emerald-400"}),s.jsxs("span",{children:["Cycle: ",s.jsxs("span",{className:"text-white",children:[v.dias," Natural Days"]})]})]})]})]})]}),s.jsxs("div",{className:"pt-4",children:[s.jsxs("button",{onClick:h,disabled:!x||!n,className:"w-full h-16 sm:h-18 bg-univision-gradient text-white rounded-[2rem] font-black uppercase tracking-widest text-[10px] sm:text-[11px] flex items-center justify-center gap-4 shadow-2xl shadow-brand-orange/30 hover:scale-[1.02] active:scale-[0.98] transition-all duration-500 disabled:opacity-30 disabled:hover:translate-y-0 disabled:bg-enterprise-200 group overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-white/5 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),s.jsx(Pp,{size:22,className:"group-hover:rotate-12 transition-transform"}),s.jsx("span",{children:"Suggest Strategy"})]}),!x&&s.jsxs("div",{className:"flex items-center justify-center gap-2 mt-5 text-[9px] font-black text-enterprise-400 uppercase tracking-[0.3em] opacity-60",children:[s.jsx(jt,{size:12,className:"text-brand-red"}),"Requiere Identidad Comercial para IA"]})]})]})]})},Mb=({productos:e=[],productosSeleccionados:t=[],plazaSeleccionada:r="",clienteSeleccionado:n=null,calcularPrecioUnitario:a,agregarProducto:i})=>{const[o,l]=P.useState(""),c=P.useMemo(()=>e.filter(d=>d.disponible&&!t.some(h=>h.id===d.id)&&(r===""||d.plaza===r)&&(d.canal.toLowerCase().includes(o.toLowerCase())||d.tipo.toLowerCase().includes(o.toLowerCase())||d.horario.toLowerCase().includes(o.toLowerCase()))),[e,o,t,r]);return s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-premium border border-enterprise-100 flex flex-col h-full overflow-hidden animate-premium-fade",children:[s.jsxs("div",{className:"bg-enterprise-950 p-6 sm:p-8 space-y-4 sm:space-y-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute bottom-0 right-0 w-64 h-64 bg-brand-orange opacity-10 blur-[100px] -mr-32 -mb-32"}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 sm:gap-6 relative z-10",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl sm:text-3xl font-black text-white leading-none uppercase tracking-tight",children:["Inventory ",s.jsx("span",{className:"text-brand-orange italic not-italic",children:"Multiplex"})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-brand-orange/20 rounded-full text-[9px] sm:text-[10px] font-black text-brand-orange uppercase tracking-widest border border-brand-orange/10",children:[s.jsx(pi,{size:12,className:"fill-brand-orange"})," Live Feed"]}),s.jsx("p",{className:"text-[9px] sm:text-[10px] font-black text-white/50 uppercase tracking-widest",children:"Asset Allocation 2025"})]})]}),s.jsxs("div",{className:"relative w-full md:w-80 group",children:[s.jsx("input",{type:"text",value:o,onChange:d=>l(d.target.value),placeholder:"Buscar Canal, Medio, Horario...",className:"w-full h-12 sm:h-14 bg-white/5 border border-white/10 rounded-2xl pl-12 pr-4 font-bold text-white text-xs sm:text-sm focus:border-brand-orange focus:bg-white/10 outline-none transition-all placeholder:text-white/20"}),s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-white/30 group-focus-within:text-brand-orange transition-colors",size:18})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 custom-scrollbar bg-enterprise-50/50",style:{maxHeight:"calc(100vh - 420px)",minHeight:"400px"},children:c.length===0?s.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 px-8 text-center bg-white rounded-3xl border border-dashed border-enterprise-200",children:[s.jsx("div",{className:"w-20 h-20 bg-enterprise-50 rounded-full flex items-center justify-center text-enterprise-200 mb-6 border border-enterprise-100",children:s.jsx(cc,{size:40})}),s.jsx("h3",{className:"text-xl font-black text-enterprise-900 uppercase",children:"Filtros Restrictivos"}),s.jsxs("p",{className:"text-xs text-enterprise-400 font-bold uppercase tracking-widest mt-2 max-w-[280px] leading-relaxed",children:["No hay activos disponibles que coincidan con la plaza ",s.jsx("span",{className:"text-brand-orange",children:r||"NACIONAL"}),"."]})]}):s.jsx("div",{className:"grid grid-cols-1 gap-4",children:c.map(d=>{const h=n?a(d.id,n):d.costoBase;return s.jsxs("div",{className:"group relative bg-white border border-enterprise-100 rounded-[1.5rem] p-4 sm:p-6 transition-all duration-500 hover:shadow-premium-hover hover:border-brand-orange/30 hover:-translate-y-1",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 md:gap-8",children:[s.jsxs("div",{className:"flex-1 space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("div",{className:"flex bg-enterprise-950 rounded-[0.5rem] px-2.5 py-1 items-center gap-2",children:[s.jsx(Ba,{size:12,className:"text-brand-orange"}),s.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-white uppercase tracking-widest leading-none",children:d.canal})]}),s.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-enterprise-50 rounded-[0.5rem] text-[9px] font-black text-enterprise-600 uppercase tracking-widest border border-enterprise-100",children:[s.jsx(gs,{size:10})," ",d.tipo]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-[9px] font-black text-enterprise-300 uppercase tracking-[0.2em]",children:[s.jsx(ws,{size:12})," ",d.plaza]})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"text-base sm:text-lg font-black text-enterprise-950 uppercase tracking-tight mb-0.5 truncate leading-tight",children:d.horario}),s.jsx("p",{className:"text-[8px] sm:text-[9px] font-bold text-enterprise-500 uppercase tracking-widest opacity-60",children:d.categoria||"Strategic Media Asset"})]}),s.jsxs("div",{className:"flex items-center gap-4 sm:gap-8",children:[n?s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-[8px] sm:text-[9px] font-black text-brand-orange uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-brand-orange"})," Commercial Fee Active"]}),s.jsx("span",{className:"text-base sm:text-xl font-black text-enterprise-900 tracking-tighter italic whitespace-nowrap",children:M(h)})]}):s.jsxs("div",{className:"flex items-center gap-2.5 bg-enterprise-50 px-3 py-1.5 sm:px-4 sm:py-2 rounded-xl text-enterprise-500 border border-enterprise-100",children:[s.jsx(Tp,{size:14}),s.jsx("span",{className:"text-[8px] sm:text-[9px] font-black uppercase tracking-widest",children:"ID Partner to Value"})]}),s.jsx("div",{className:"h-8 sm:h-10 w-px bg-enterprise-100 hidden md:block"}),s.jsxs("div",{className:"hidden md:flex flex-col",children:[s.jsx("span",{className:"text-[8px] sm:text-[9px] font-black text-enterprise-400 uppercase tracking-widest mb-1",children:"Availability"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.3)] animate-pulse"}),s.jsx("span",{className:"text-[9px] sm:text-[10px] font-black text-enterprise-700 uppercase",children:"In-Pipeline"})]})]})]})]}),s.jsxs("button",{onClick:()=>i(d.id),disabled:!n,className:"w-14 h-14 sm:w-16 sm:h-16 bg-enterprise-950 text-white rounded-[1.25rem] sm:rounded-[1.5rem] flex items-center justify-center hover:bg-brand-orange hover:shadow-brand-orange/30 hover:scale-105 active:scale-95 transition-all duration-500 disabled:opacity-10 shadow-xl relative overflow-hidden group/btn flex-shrink-0",children:[s.jsx("div",{className:"absolute inset-0 bg-white/10 opacity-0 group-hover/btn:opacity-100 transition-opacity"}),s.jsx(kt,{size:24,strokeWidth:3,className:"relative z-10"})]})]}),s.jsx("div",{className:"absolute right-12 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all duration-500 pointer-events-none translate-x-10 group-hover:translate-x-0 hidden lg:block",children:s.jsx(ar,{size:48,className:"text-brand-orange/20 rotate-[-15deg]"})})]},d.id)})})}),s.jsxs("div",{className:"bg-enterprise-950 px-8 py-6 flex justify-between items-center text-white/40 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-white/5"}),s.jsxs("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] relative z-10",children:["Sincronizacin: ",s.jsx("span",{className:"text-white",children:"Master Inventory TU"})]}),s.jsxs("div",{className:"flex items-center gap-5 text-[10px] font-black uppercase tracking-widest relative z-10",children:[s.jsx("span",{className:"bg-brand-orange/20 text-brand-orange px-2 py-0.5 rounded-md",children:c.length})," Activos Disponibles"]})]})]})},Ub=({productos:e=[],productosSeleccionados:t=[],paqueteVIX:r=null,setPaqueteVIX:n,paquetesVIX:a=[],actualizarCantidad:i,eliminarProducto:o,generarCotizacion:l,presupuesto:c,subtotalActual:d,subtotalTVActual:h,subtotalVIXActual:x,clienteSeleccionado:f,calcularPrecioUnitario:v})=>{const g=a.find(u=>u.id===r),w=c?parseFloat(c):0,k=w-d,m=k<0;return t.length===0&&!r?null:s.jsx("div",{className:"space-y-8 animate-premium-fade",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:[s.jsxs("div",{className:"flex-1 w-full bg-white rounded-[2.5rem] shadow-premium border border-enterprise-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-enterprise-950 px-8 py-6 flex items-center justify-between relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-red opacity-10 blur-2xl -mr-16 -mt-16"}),s.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[s.jsx("div",{className:"w-10 h-10 bg-brand-red/10 rounded-xl flex items-center justify-center text-brand-red",children:s.jsx(cc,{size:22})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-lg font-black uppercase tracking-tight",children:"Arquitectura del Plan"}),s.jsx("p",{className:"text-[9px] font-black text-brand-red uppercase tracking-[0.3em]",children:"Commercial Deployment"})]})]}),s.jsx("div",{className:"bg-white/5 border border-white/10 px-4 py-1.5 rounded-full relative z-10",children:s.jsxs("span",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:[t.length+(g?1:0)," Activos Consolidados"]})})]}),s.jsxs("div",{className:"p-6 max-h-[700px] overflow-y-auto custom-scrollbar space-y-4 bg-enterprise-50/30",children:[t.map(u=>{const p=e.find(_=>_.id===u.id);if(!p)return null;const j=v(u.id,f);return s.jsxs("div",{className:"group flex flex-col sm:flex-row sm:items-center gap-4 p-4 sm:p-5 bg-white hover:shadow-premium border border-enterprise-100 rounded-[1.5rem] transition-all duration-500 hover:-translate-y-0.5",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("span",{className:"text-[9px] font-black bg-enterprise-950 text-white px-2 py-0.5 rounded-lg uppercase tracking-widest",children:p.canal}),s.jsx("div",{className:"h-3 w-[1px] bg-enterprise-200"}),s.jsxs("span",{className:"text-[9px] font-black text-brand-red uppercase tracking-[0.2em] flex items-center gap-1",children:[s.jsx(pi,{size:10,className:"fill-brand-red"})," ",p.plaza]})]}),s.jsx("h4",{className:"text-sm font-black text-enterprise-950 uppercase truncate mb-0.5",children:p.horario}),s.jsxs("div",{className:"flex items-center gap-2 text-[9px] font-bold text-enterprise-400 uppercase tracking-[0.1em]",children:[s.jsx("span",{className:"px-1.5 py-0.5 bg-enterprise-100 rounded-md text-enterprise-600 font-black",children:p.tipo}),s.jsx("span",{className:"w-1 h-1 bg-enterprise-200 rounded-full"}),s.jsxs("span",{className:"text-enterprise-400",children:["Unit: ",s.jsx("span",{className:"text-enterprise-900 font-black",children:M(j)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-6 sm:gap-10 pt-3 sm:pt-0 border-t sm:border-t-0 border-enterprise-50",children:[s.jsxs("div",{className:"flex flex-col items-center sm:items-end",children:[s.jsx("span",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-[0.2em] mb-1.5",children:"Inserciones"}),s.jsxs("div",{className:"flex items-center bg-enterprise-50 p-1 rounded-xl border border-enterprise-200 shadow-inner group-hover:bg-white transition-colors duration-500",children:[s.jsx("button",{onClick:()=>i(u.id,u.cantidad-1),className:"w-8 h-8 flex items-center justify-center text-enterprise-400 hover:text-brand-red hover:bg-white rounded-lg transition-all",children:s.jsx(Gv,{size:14,strokeWidth:3})}),s.jsx("input",{type:"number",value:u.cantidad,onChange:_=>i(u.id,_.target.value),className:"w-10 bg-transparent text-center font-black text-sm text-enterprise-900 outline-none"}),s.jsx("button",{onClick:()=>i(u.id,u.cantidad+1),className:"w-8 h-8 flex items-center justify-center text-enterprise-400 hover:text-brand-red hover:bg-white rounded-lg transition-all",children:s.jsx(kt,{size:14,strokeWidth:3})})]})]}),s.jsxs("div",{className:"flex flex-col items-end min-w-[100px]",children:[s.jsx("span",{className:"text-[8px] font-black text-enterprise-300 uppercase tracking-[0.2em] mb-1",children:"Total Lnea"}),s.jsx("span",{className:"text-base font-black text-enterprise-950 tracking-tighter italic",children:M(j*u.cantidad)})]}),s.jsx("button",{onClick:()=>o(u.id),className:"w-8 h-8 rounded-lg flex items-center justify-center text-enterprise-200 hover:text-white hover:bg-error transition-all duration-300 transform hover:rotate-90",children:s.jsx($t,{size:16})})]})]},u.id)}),g&&s.jsxs("div",{className:"p-6 bg-enterprise-950 rounded-[2rem] flex items-center justify-between border border-white/5 shadow-2xl relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-red/10 blur-3xl opacity-50"}),s.jsxs("div",{className:"flex items-center gap-5 relative z-10",children:[s.jsx("div",{className:"w-14 h-14 bg-white rounded-[1.25rem] flex items-center justify-center shadow-2xl transform group-hover:scale-110 transition-transform duration-500",children:s.jsx("span",{className:"text-brand-red font-black text-lg italic tracking-tight",children:"ViX"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[10px] font-black text-white/40 uppercase tracking-[0.4em]",children:"Digital Asset"}),s.jsx("div",{className:"w-2 h-2 rounded-full bg-success shadow-[0_0_10px_rgba(16,185,129,0.5)]"})]}),s.jsx("h4",{className:"text-lg font-black text-white uppercase tracking-tight",children:g.nombre})]})]}),s.jsxs("div",{className:"flex items-center gap-8 text-right relative z-10",children:[s.jsxs("div",{children:[s.jsx("span",{className:"block text-[10px] font-black text-white/30 uppercase tracking-widest mb-1",children:"Fee Inversin"}),s.jsx("span",{className:"text-xl font-black text-white",children:M(g.inversion)})]}),s.jsx("button",{onClick:()=>n(""),className:"w-12 h-12 rounded-[1rem] flex items-center justify-center bg-white/10 text-white hover:bg-white hover:text-brand-red transition-all duration-300",children:s.jsx(Nt,{size:22})})]})]})]})]}),s.jsxs("div",{className:"w-full lg:w-96 space-y-5",children:[s.jsxs("div",{className:"bg-enterprise-950 rounded-[2.5rem] shadow-2xl p-8 text-white border border-white/5 relative overflow-hidden group/summary",children:[s.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-brand-red/10 blur-[100px] rounded-full group-hover/summary:bg-brand-red/20 transition-all duration-1000"}),s.jsxs("div",{className:"flex items-center gap-4 mb-10 relative z-10",children:[s.jsx("div",{className:"w-12 h-12 bg-white/5 border border-white/10 rounded-2xl flex items-center justify-center text-brand-red",children:s.jsx(uv,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-[11px] font-black text-white uppercase tracking-[0.4em]",children:"Valuacin"}),s.jsx("p",{className:"text-white/40 text-[10px] font-black uppercase tracking-[0.2em] mt-0.5",children:"Consolidado Estratgico"})]})]}),s.jsxs("div",{className:"space-y-6 relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-end border-b border-white/5 pb-4",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] font-bold text-white/30 uppercase tracking-[0.2em]",children:"Ppt. Autorizado"}),s.jsx("span",{className:"text-2xl font-black tracking-tighter mt-1",children:M(w)})]}),s.jsx(js,{size:20,className:"text-success mb-2 opacity-40"})]}),s.jsxs("div",{className:"space-y-4 pt-2",children:[s.jsxs("div",{className:"flex justify-between items-center group/item",children:[s.jsx("span",{className:"text-[10px] font-bold text-white/40 uppercase tracking-[0.2em] group-hover/item:text-white/60 transition-colors",children:"Asset TV TU"}),s.jsxs("span",{className:"text-base font-black text-white/90",children:["-",M(h)]})]}),x>0&&s.jsxs("div",{className:"flex justify-between items-center group/item",children:[s.jsx("span",{className:"text-[10px] font-bold text-white/40 uppercase tracking-[0.2em] group-hover/item:text-brand-red transition-colors",children:"Impacto Digital"}),s.jsxs("span",{className:"text-base font-black text-brand-red",children:["-",M(x)]})]})]}),s.jsxs("div",{className:`mt-8 p-6 rounded-[2rem] border transition-all duration-500 overflow-hidden relative ${m?"bg-error-light border-error/20":"bg-white/5 border-white/10"}`,children:[m&&s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:s.jsx(il,{size:64,className:"text-error rotate-12"})}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("span",{className:"block text-[10px] font-black text-white/30 uppercase tracking-[0.3em] mb-2",children:"Remanente Disponible"}),s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("span",{className:`text-3xl font-black tracking-tighter ${m?"text-error animate-pulse":"text-success"}`,children:M(k)})})]})]})]}),s.jsxs("button",{onClick:l,className:"w-full h-18 bg-univision-gradient text-white rounded-[2rem] mt-10 font-black uppercase tracking-[0.3em] text-[11px] flex items-center justify-center gap-4 shadow-2xl shadow-brand-red/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-500 relative overflow-hidden group/final",children:[s.jsx("div",{className:"absolute inset-0 bg-white/10 translate-y-full group-hover/final:translate-y-0 transition-transform duration-500"}),s.jsx(Er,{size:22,className:"relative z-10"}),s.jsx("span",{className:"relative z-10",children:"Finalizar Orden"}),s.jsx(_p,{size:18,className:"relative z-10 opacity-0 -translate-x-4 group-hover/final:opacity-100 group-hover/final:translate-x-0 transition-all duration-500"})]})]}),s.jsxs("div",{className:"p-6 bg-enterprise-50 rounded-[2.5rem] border border-enterprise-100 flex items-start gap-4",children:[s.jsx(Info,{size:16,className:"text-enterprise-400 mt-1 shrink-0"}),s.jsx("p",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest leading-relaxed opacity-60",children:"Sujeto a disponibilidad de inventario al momento del cierre. Validez de 24 horas hbiles."})]})]})]})})},Fb=({cotizacion:e,iniciarNuevaCotizacion:t,guardarCotizacion:r,agregarAComparador:n,mostrarPropuesta:a,configuracion:i,onSaveClient:o,masterContracts:l=[],setMensaje:c})=>{var B;const[d,h]=P.useState(null),[x,f]=P.useState(null),[v,g]=P.useState(!1),[w,k]=P.useState({numero_contrato:"",mc_id:""});if(!e)return null;const m=e.cliente,u=(l||[]).filter(R=>String(R.cliente_id)===String(m==null?void 0:m.id)&&R.estatus==="activo"),p=async R=>{g(!0);try{const E={...m,etapa:R};await o("clientes",E)&&(c({tipo:"exito",texto:`Venta Cerrada! El cliente ahora est en etapa: ${R}`}),h(null))}catch(E){console.error(E)}finally{g(!1)}},j=R=>{f({status:R}),R==="ganada"&&k({numero_contrato:e.numero_contrato||"",mc_id:e.mc_id||""})},_=async R=>{g(!0);try{if(!e.id||String(e.id).startsWith("COT-")){c({tipo:"info",texto:"Primero debes guardar la cotizacin para cambiar su estatus oficial."}),f(null);return}const E={id:e.id,estatus:R};R==="ganada"&&(E.numero_contrato=w.numero_contrato?parseInt(w.numero_contrato):null,E.mc_id=w.mc_id||null,E.fecha_cierre_real=new Date().toISOString()),await o("cotizaciones",E)&&(c({tipo:"exito",texto:`Cotizacin marcada como ${R.toUpperCase()}`}),R==="ganada"&&await o("cobranza",{cotizacion_id:e.id,monto_facturado:e.subtotalGeneral||e.total/1.16,estatus_pago:"pendiente",notas:w.numero_contrato?`Contrato: ${w.numero_contrato}`:"Venta ganada, contrato pendiente"}),R==="ganada"&&m.etapa!=="Cliente"?(f(null),h("Cliente")):f(null))}catch(E){console.error(E)}finally{g(!1)}},b=async()=>{g(!0);try{if(!(m!=null&&m.id)){c({tipo:"error",texto:"No hay un cliente seleccionado para guardar."});return}const R=!e.id||String(e.id).startsWith("COT-"),E={id:R?void 0:e.id,cliente_id:m.id,folio:e.folio||(R?`FOL-${Math.floor(1e5+Math.random()*9e5)}`:e.id),monto_total:e.total||0,dias_campana:e.diasCampana||30,paquete_vix:!!e.paqueteVIX,estatus:e.estatus||"borrador",json_detalles:{items:e.items||[],distribucion:e.distribucion||[],paqueteVIX:e.paqueteVIX||null,costoVIX:e.costoVIX||0,presupuestoBase:e.presupuestoBase||0,subtotalTV:e.subtotalTV||0,subtotalGeneral:e.subtotalGeneral||0,iva:e.iva||0}},U=await r("cotizaciones",E);U&&U.length>0&&(e.id=U[0].id,e.folio=U[0].folio,c({tipo:"exito",texto:"Cotizacin guardada exitosamente en la base de datos!"}))}catch(R){console.error(" Error al guardar:",R),c({tipo:"error",texto:`Error al guardar: ${R.message}`})}finally{g(!1)}},y=e.presupuestoBase||0,N=e.costoVIX||0,S=y-N,T=e.subtotalTV||0,O=S-T,C=N+T,L=O>=0?"text-green-400":"text-red-400";return s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6 animate-in fade-in duration-700",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 border-l-4 border-green-500 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sl,{size:24,className:"text-green-500"}),s.jsx("h2",{className:"text-sm font-black text-gray-800 uppercase tracking-tighter",children:"Cotizacin Generada"})]}),s.jsxs("button",{onClick:t,className:"text-[10px] font-bold text-gray-400 hover:text-red-600 flex items-center gap-1 transition-colors uppercase",children:[s.jsx(At,{size:12})," Nueva"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 items-start",children:[s.jsxs("div",{className:"md:col-span-7 lg:col-span-8 order-2 md:order-1 space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-100 flex items-center gap-2",children:[s.jsx(Kv,{size:14,className:"text-red-600"}),s.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Detalle Inversin Digital"})]}),s.jsx("div",{className:"p-4",children:e.paqueteVIX&&e.paqueteVIX.id?s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-black text-gray-800",children:e.paqueteVIX.nombre}),s.jsxs("p",{className:"text-[10px] font-bold text-gray-400",children:[e.paqueteVIX.impresiones.toLocaleString()," Impresiones | ",e.paqueteVIX.dias," Das"]})]}),s.jsx("p",{className:"text-base font-black text-red-700",children:M(e.costoVIX)})]}):s.jsx("p",{className:"text-xs text-gray-400 italic text-center py-2",children:"Sin inversin digital"})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-100 flex items-center gap-2",children:[s.jsx(mb,{size:14,className:"text-red-600"}),s.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Detalle Pauta TV"})]}),s.jsx("div",{className:"p-4 grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.distribucion.map((R,E)=>{var U;return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsx("p",{className:"font-black text-gray-800 text-[11px] leading-tight line-clamp-1",children:R.producto.tipo}),s.jsxs("p",{className:"text-[9px] font-bold text-red-600 uppercase mb-2",children:[R.producto.canal," | ",R.totalUnidades," Unids."]}),s.jsx("p",{className:"text-xs font-black text-gray-700 border-t pt-2 mt-1",children:M(((U=e.items.find(A=>A.producto.id===R.producto.id))==null?void 0:U.subtotal)||0)})]},E)})})]})]}),s.jsx("div",{className:"md:col-span-5 lg:col-span-4 order-1 md:order-2",children:s.jsxs("div",{className:"bg-slate-900 rounded-2xl p-6 text-white shadow-xl md:sticky md:top-20 w-full max-w-sm mx-auto",children:[s.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-red-500 mb-6 border-b border-white/10 pb-2",children:"Resumen Financiero"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-tighter",children:"Inversin Inicial:"}),s.jsxs("span",{className:"text-xs font-black",children:["$",y.toLocaleString("es-MX")]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-red-500 uppercase tracking-tighter",children:"(-) Inversin Digital:"}),s.jsxs("span",{className:"text-xs font-black text-red-500",children:["-$",N.toLocaleString("es-MX")]})]}),s.jsxs("div",{className:"py-2 border-y border-white/5 my-1 flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-tighter",children:"Sobrante para TV:"}),s.jsxs("span",{className:"text-xs font-black text-white",children:["$",S.toLocaleString("es-MX")]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-red-500 uppercase tracking-tighter",children:"(-) Inversin TV (Net):"}),s.jsxs("span",{className:"text-xs font-black text-red-500",children:["-$",T.toLocaleString("es-MX")]})]}),s.jsxs("div",{className:"pt-6 border-t border-white/10 mt-4 space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest text-gray-500 mb-2",children:"Inversin Total Propuesta"}),s.jsx("div",{className:"inline-block px-5 py-2 bg-red-600 rounded-lg shadow-lg border border-red-500",children:s.jsx("p",{className:"text-lg font-black text-white",children:M(C)})}),s.jsx("p",{className:"text-[8px] font-bold text-gray-500 mt-1 uppercase",children:"ms IVA"})]}),s.jsxs("div",{className:"flex justify-between items-center px-2 py-2 bg-white/5 rounded-lg border border-white/5",children:[s.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-tighter",children:"Saldo Final:"}),s.jsxs("span",{className:`text-sm font-black ${L}`,children:["$",O.toLocaleString("es-MX")]})]}),s.jsxs("div",{className:"space-y-2 pt-2",children:[s.jsxs("button",{onClick:a,className:"w-full h-10 bg-white text-slate-900 rounded-lg font-black text-[10px] uppercase tracking-widest hover:bg-gray-100 flex items-center justify-center transition-all shadow-md",children:[s.jsx(Pn,{className:"mr-2",size:14}),"Generar Propuesta PDF"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{disabled:v,onClick:b,className:"h-8 bg-green-500/10 hover:bg-green-500 text-green-400 hover:text-white border border-green-500/20 rounded-lg font-black text-[9px] flex items-center justify-center transition-all uppercase gap-2",children:[v&&s.jsx(At,{size:10,className:"animate-spin"}),v?"Salvando...":"Guardar"]}),s.jsx("button",{onClick:()=>n(e),className:"h-8 bg-white/5 hover:bg-white/10 text-white border border-white/10 rounded-lg font-black text-[9px] flex items-center justify-center transition-all uppercase",children:"Comparar"})]})]}),s.jsxs("div",{className:"pt-6 border-t border-white/10 space-y-3",children:[e.estatus==="ganada"&&e.numero_contrato&&s.jsxs("div",{className:"mt-4 p-3 bg-emerald-500/10 border border-emerald-500/20 rounded-xl animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(rt,{size:12,className:"text-emerald-400"}),s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-emerald-400",children:"Datos del Cierre"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[8px] font-bold text-gray-500 uppercase",children:"Contrato No."}),s.jsx("span",{className:"text-[10px] font-black text-white",children:e.numero_contrato})]}),e.mc_id&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[8px] font-bold text-gray-500 uppercase",children:"Master Contract"}),s.jsx("span",{className:"text-[10px] font-black text-white truncate max-w-[100px]",children:((B=l.find(R=>String(R.id)===String(e.mc_id)))==null?void 0:B.numero_mc)||"Vinculado"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Er,{size:12,className:"text-gray-500"}),s.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-gray-400",children:"Estatus de Propuesta"})]}),s.jsx("span",{className:`text-[8px] font-black px-2 py-0.5 rounded uppercase ${e.estatus==="ganada"?"bg-emerald-500 text-white":e.estatus==="perdida"?"bg-red-500 text-white":"bg-blue-500 text-white"}`,children:e.estatus||"borrador"})]}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["enviada","ganada","perdida"].map(R=>s.jsx("button",{onClick:()=>j(R),className:`py-2 rounded-lg font-black text-[8px] uppercase tracking-widest transition-all
                                                    ${e.estatus===R?R==="ganada"?"bg-emerald-500 text-white":R==="perdida"?"bg-red-500 text-white":"bg-blue-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:R},R))})]})]})]})]})})]}),x&&x.status==="ganada"&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 bg-slate-900/80 backdrop-blur-md animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl border border-white animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-50 text-emerald-600 rounded-3xl flex items-center justify-center mx-auto mb-6",children:s.jsx(rt,{size:32})}),s.jsx("h3",{className:"text-center text-lg font-black text-slate-900 leading-tight mb-2 uppercase tracking-tighter",children:"Cerrar Venta con xito!"}),s.jsx("p",{className:"text-center text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-8 italic",children:"Puedes agregar el contrato despus desde el panel de cobranza"}),s.jsxs("div",{className:"space-y-4 mb-8",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 tracking-widest uppercase ml-2",children:"Nmero de Contrato"}),s.jsx("input",{type:"number",required:!0,placeholder:"Ej: 850232",value:w.numero_contrato,onChange:R=>k({...w,numero_contrato:R.target.value}),className:"w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-bold focus:ring-2 focus:ring-emerald-500 outline-none"})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 tracking-widest uppercase ml-2",children:"Asociar a Master Contract"}),s.jsxs("select",{value:w.mc_id,onChange:R=>k({...w,mc_id:R.target.value}),className:"w-full max-w-full p-4 bg-slate-50 border-none rounded-2xl text-sm font-bold focus:ring-2 focus:ring-emerald-500 outline-none appearance-none truncate",children:[s.jsx("option",{value:"",children:"Venta nica (S/ Master Contract)"}),u.map(R=>s.jsxs("option",{value:R.id,children:[R.numero_mc," - Saldo: ",M(R.monto_aprobado)]},R.id))]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("button",{disabled:v,onClick:()=>_("ganada"),className:"w-full py-4 bg-emerald-600 text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] hover:bg-slate-900 transition-all active:scale-95 shadow-xl shadow-emerald-100 flex items-center justify-center gap-2",children:[v&&s.jsx(At,{size:14,className:"animate-spin"}),"Confirmar Ganada"]}),s.jsx("button",{onClick:()=>f(null),className:"w-full py-3 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-slate-600",children:"Cancelar"})]})]})}),x&&x.status!=="ganada"&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl border border-white animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:`w-16 h-16 rounded-3xl flex items-center justify-center mx-auto mb-6 ${x.status==="perdida"?"bg-red-50 text-red-600":"bg-blue-50 text-blue-600"}`,children:s.jsx(jt,{size:32})}),s.jsxs("h3",{className:"text-center text-lg font-black text-slate-900 leading-tight mb-2 uppercase",children:["Marcar como ",x.status.toUpperCase(),"?"]}),s.jsxs("div",{className:"flex flex-col gap-2 mt-8",children:[s.jsx("button",{onClick:()=>_(x.status),className:`w-full py-4 text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] transition-all active:scale-95 shadow-xl ${x.status==="perdida"?"bg-red-600":"bg-slate-900"}`,children:"Confirmar Cambio"}),s.jsx("button",{onClick:()=>f(null),className:"w-full py-3 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-slate-600",children:"Cancelar"})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 md:p-6 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl border border-white animate-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce",children:s.jsx(sl,{size:48})}),s.jsx("h3",{className:"text-center text-xl font-black text-slate-900 leading-tight mb-2 uppercase tracking-tighter",children:"Venta Registrada!"}),s.jsxs("p",{className:"text-center text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-8",children:["Deseas promover a ",m.nombre_empresa," a la etapa de CLIENTE?"]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:()=>p("Cliente"),className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] hover:bg-emerald-600 transition-all active:scale-95 shadow-xl",children:"Convertir en Cliente"}),s.jsx("button",{onClick:()=>h(null),className:"w-full py-3 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Mantener etapa actual"})]})]})})]})},$e=({className:e})=>s.jsx("div",{className:`skeleton rounded-xl ${e}`}),Vb=()=>s.jsxs("div",{className:"space-y-10 animate-pulse",children:[s.jsxs("div",{className:"flex justify-between items-center border-b border-enterprise-200 pb-10",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx($e,{className:"h-4 w-32"}),s.jsx($e,{className:"h-10 w-64"}),s.jsx($e,{className:"h-4 w-96"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx($e,{className:"h-12 w-48"}),s.jsx($e,{className:"h-12 w-12"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>s.jsx($e,{className:"h-32 w-full rounded-[2rem]"},e))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[s.jsx($e,{className:"lg:col-span-8 h-80 rounded-[3rem]"}),s.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[s.jsx($e,{className:"h-40 rounded-[2.5rem]"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx($e,{className:"h-32 rounded-[2rem]"}),s.jsx($e,{className:"h-32 rounded-[2rem]"})]})]})]})]}),Bb=()=>s.jsxs("div",{className:"space-y-10 animate-pulse",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[s.jsxs("div",{className:"lg:col-span-4 space-y-8",children:[s.jsx($e,{className:"h-24 rounded-[2rem]"}),s.jsx($e,{className:"h-80 rounded-[2.5rem]"})]}),s.jsx("div",{className:"lg:col-span-8",children:s.jsx($e,{className:"h-[600px] rounded-[3rem]"})})]}),s.jsx("div",{className:"grid grid-cols-1 gap-8",children:s.jsx($e,{className:"h-64 rounded-[3rem]"})})]}),Wb=({data:e,cotizacionState:t,setVistaActual:r,iniciarNuevaCotizacion:n,configuracion:a,mostrarPropuesta:i,guardarCotizacion:o,agregarAComparador:l,mensajeAdmin:c,setMensajeAdmin:d,onSaveClient:h})=>{const{productos:x,clientes:f,paquetesVIX:v,masterContracts:g,ultimaActualizacion:w,loading:k}=e,{clienteSeleccionado:m,setClienteSeleccionado:u,plazaSeleccionada:p,setPlazaSeleccionada:j,presupuesto:_,setPresupuesto:b,duracionDias:y,setDuracionDias:N,paqueteVIX:S,setPaqueteVIX:T,productosSeleccionados:O,cotizacionResult:C,subtotalActual:L,subtotalTVActual:B,subtotalVIXActual:R,calcularPrecioUnitario:E,agregarProducto:U,actualizarCantidad:A,eliminarProducto:z,sugerirDistribucion:D,generarCotizacion:$,historial:H,comparar:K}=t;return k?s.jsx("div",{className:"max-w-[1600px] mx-auto",children:s.jsx(Bb,{})}):s.jsx("div",{className:"animate-in fade-in duration-500",children:s.jsx("div",{children:C?s.jsx(Fb,{cotizacion:C,iniciarNuevaCotizacion:n,guardarCotizacion:o,agregarAComparador:l,mostrarPropuesta:()=>i(C),configuracion:a,onSaveClient:h,masterContracts:g,setMensaje:d}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 items-start",children:[s.jsxs("div",{className:"md:col-span-5 lg:col-span-4 space-y-6",children:[s.jsx(Db,{clientes:f,clienteSeleccionado:m,setClienteSeleccionado:u}),s.jsx(Lb,{productos:x,plazaSeleccionada:p,setPlazaSeleccionada:j,presupuesto:_,setPresupuesto:b,duracionDias:y,setDuracionDias:N,paqueteVIX:S,setPaqueteVIX:T,paquetesVIX:v,sugerirDistribucion:D,clienteSeleccionado:m})]}),s.jsx("div",{className:"md:col-span-7 lg:col-span-8 space-y-6",children:s.jsx(Mb,{productos:x,productosSeleccionados:O,plazaSeleccionada:p,clienteSeleccionado:m,calcularPrecioUnitario:E,agregarProducto:U})})]}),s.jsx("div",{className:"mt-8 animate-in slide-in-from-bottom-5 duration-500",children:s.jsx(Ub,{productos:x,productosSeleccionados:O,paqueteVIX:S,setPaqueteVIX:T,paquetesVIX:v,actualizarCantidad:A,eliminarProducto:z,generarCotizacion:$,presupuesto:_,subtotalActual:L,subtotalTVActual:B,subtotalVIXActual:R,clienteSeleccionado:m,calcularPrecioUnitario:E})})]})})})},Hb=({metas:e,onSaveGoal:t,onRemoveGoal:r})=>{console.log(" GoalManager rendering with metas:",e);const[n,a]=P.useState(new Date().getMonth()+1),[i,o]=P.useState(new Date().getFullYear()),[l,c]=P.useState(""),d=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],h=x=>{if(x.preventDefault(),!l||l<=0)return;const f=e.find(v=>v.mes===parseInt(n)&&v.anio===parseInt(i));t({id:(f==null?void 0:f.id)||"",mes:parseInt(n),anio:parseInt(i),monto_meta:parseFloat(l)}),c("")};return s.jsxs("div",{className:"space-y-6 animate-premium-fade",children:[s.jsxs("div",{className:"bg-enterprise-950 p-6 rounded-2xl md:rounded-b-none flex flex-col md:flex-row justify-between items-center gap-4 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-orange/10 blur-[80px] -mr-32 -mt-32"}),s.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[s.jsx(kn,{size:20,className:"text-brand-orange"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase italic italic-brand flex items-center gap-3 tracking-widest",children:"Objetivos de Rendimiento"})]})]}),s.jsx("div",{className:"bg-white p-8 rounded-b-[2.5rem] shadow-xl border border-enterprise-100",children:s.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase ml-2 tracking-widest",children:"Mes Operativo"}),s.jsx("select",{value:n,onChange:x=>a(x.target.value),className:"w-full bg-enterprise-50 border border-enterprise-100 rounded-2xl px-4 py-3 text-sm font-black focus:ring-1 focus:ring-brand-orange/20 outline-none appearance-none shadow-sm",children:d.map((x,f)=>s.jsx("option",{value:f+1,children:x},f+1))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase ml-2 tracking-widest",children:"Ao Fiscal"}),s.jsx("input",{type:"number",value:i,onChange:x=>o(x.target.value),className:"w-full bg-enterprise-50 border border-enterprise-100 rounded-2xl px-4 py-3 text-sm font-black focus:ring-1 focus:ring-brand-orange/20 outline-none shadow-sm"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase ml-2 tracking-widest",children:"Meta de Ingreso (MXN)"}),s.jsx("input",{type:"number",value:l,onChange:x=>c(x.target.value),placeholder:"Ej: 1500000",className:"w-full bg-enterprise-50 border border-enterprise-100 rounded-2xl px-4 py-3 text-sm font-black focus:ring-1 focus:ring-brand-orange/20 outline-none shadow-sm placeholder:text-enterprise-300"})]}),s.jsxs("button",{type:"submit",className:"bg-enterprise-950 text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-brand-orange transition-all flex items-center justify-center gap-3 h-[46px] shadow-xl shadow-enterprise-900/10 active:scale-95",children:[s.jsx(cr,{size:16})," Registrar Meta"]})]})}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-enterprise-100 overflow-hidden",children:[s.jsx("div",{className:"p-6 bg-enterprise-50 border-b border-enterprise-100",children:s.jsxs("span",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(ui,{size:14,className:"text-brand-orange"})," Histrico de Objetivos"]})}),s.jsx("div",{className:"divide-y divide-enterprise-50",children:e&&e.length>0?e.map(x=>{var f;return s.jsxs("div",{className:"p-6 flex items-center justify-between hover:bg-enterprise-50/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-enterprise-950 text-white flex items-center justify-center font-black text-[11px] uppercase shadow-lg",children:(f=d[x.mes-1])==null?void 0:f.substring(0,3)}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-black text-enterprise-950 uppercase italic italic-brand leading-tight",children:[d[x.mes-1]," ",x.anio]}),s.jsx("p",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mt-0.5",children:"Vigente"})]})]}),s.jsxs("div",{className:"flex items-center gap-8",children:[s.jsx("span",{className:"text-lg font-black text-enterprise-950 tabular-nums",children:M(x.monto_meta)}),s.jsx("button",{onClick:()=>{window.confirm("Eliminar esta meta?")&&r(x.id)},className:"p-3 text-enterprise-200 hover:text-brand-magenta hover:bg-brand-magenta/5 rounded-xl transition-all",children:s.jsx(Nt,{size:18})})]})]},x.id)}):s.jsxs("div",{className:"p-20 text-center",children:[s.jsx(kn,{className:"mx-auto text-enterprise-100 mb-6",size:64}),s.jsxs("p",{className:"text-[11px] font-black text-enterprise-300 uppercase tracking-widest italic leading-relaxed",children:["No hay proyecciones financieras ",s.jsx("br",{})," registradas para este periodo"]})]})})]})]})},Gb=({onSave:e,setMensaje:t,clienteEdicion:r=null,onCancel:n=null})=>{const[a,i]=P.useState({nombre_empresa:"",nombre_contacto:"",email:"",telefono:"",direccion_completa:"",plaza:"MERIDA",segmento:"PYME",tipo_acuerdo:"SIN_ACUERDO",tipo:"prospecto",etapa:"Prospecto",notas_generales:""});Ga.useEffect(()=>{i(r?{...r,nombre_empresa:r.nombre_empresa||"",nombre_contacto:r.nombre_contacto||"",email:r.email||"",telefono:r.telefono||"",direccion_completa:r.direccion_completa||"",plaza:r.plaza||"MERIDA",segmento:r.segmento||"PYME",tipo_acuerdo:r.tipo_acuerdo||"SIN_ACUERDO",tipo:r.tipo||"prospecto",etapa:r.etapa||"Prospecto",notas_generales:r.notas_generales||""}:{nombre_empresa:"",nombre_contacto:"",email:"",telefono:"",direccion_completa:"",plaza:"MERIDA",segmento:"PYME",tipo_acuerdo:"SIN_ACUERDO",tipo:"prospecto",etapa:"Prospecto",notas_generales:""})},[r]);const o=c=>{const{name:d,value:h}=c.target;i(x=>({...x,[d]:h}))},l=async c=>{if(c.preventDefault(),!a.nombre_empresa){t({tipo:"error",texto:"El nombre de la empresa es obligatorio."});return}const d={...a,estatus:a.estatus||"activo"};await e("clientes",d)&&(r?n&&n():i({nombre_empresa:"",nombre_contacto:"",email:"",telefono:"",direccion_completa:"",plaza:"MERIDA",segmento:"PYME",tipo_acuerdo:"SIN_ACUERDO",tipo:"prospecto",etapa:"Prospecto",notas_generales:""}))};return s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-2xl overflow-hidden border border-gray-100 flex flex-col lg:flex-row",children:[s.jsxs("div",{className:"lg:w-1/4 bg-gray-900 p-8 text-white flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"w-12 h-12 bg-red-600 rounded-2xl flex items-center justify-center shadow-lg shadow-red-900/40 mb-6",children:s.jsx(Ap,{size:24})}),s.jsx("h3",{className:"text-2xl font-black tracking-tighter mb-2",children:r?"Editar Cliente":"Nuevo Cliente"}),s.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-widest leading-relaxed",children:r?"Actualiza los datos de la cuenta en el sistema central.":"Registra una nueva cuenta en el CRM centralizado de Televisa MID."})]}),r&&s.jsxs("button",{onClick:n,className:"mt-4 text-xs font-bold text-red-500 uppercase tracking-widest hover:text-red-400 transition-colors flex items-center gap-2",children:[s.jsx($t,{size:14})," Cancelar Edicin"]}),s.jsx("div",{className:"space-y-4 pt-8 border-t border-gray-800",children:s.jsxs("div",{className:"flex items-center gap-3 text-[10px] font-black uppercase tracking-widest text-gray-500",children:[s.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Base de Datos Segura"]})})]}),s.jsxs("form",{onSubmit:l,className:"flex-1 p-8 md:p-12 space-y-8",children:[s.jsxs("div",{className:"bg-gray-50 p-6 rounded-[2rem] border border-gray-100 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-[0.3em]",children:"Flujo Comercial CRM"}),s.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter shadow-sm
                            ${a.etapa==="Cliente"?"bg-green-500 text-white":a.etapa==="No Interesado"?"bg-gray-400 text-white":"bg-red-600 text-white"}`,children:a.etapa})]}),s.jsx("div",{className:"flex gap-2 h-1.5",children:["Prospecto","Contactado","Interesado","No Interesado","Cliente"].map((c,d)=>{const x=["Prospecto","Contactado","Interesado","No Interesado","Cliente"].indexOf(a.etapa),f=d<=x&&a.etapa!=="No Interesado",v=a.etapa==="No Interesado"&&d===3;return s.jsx("div",{className:`flex-1 rounded-full transition-all duration-500 ${v?"bg-gray-400":f?d===4?"bg-green-500":"bg-red-600":"bg-gray-200"}`},d)})}),s.jsx("div",{className:"flex justify-between mt-3",children:["Prospecto","Cliente"].map(c=>s.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase tracking-widest",children:c},c))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-[10px] font-black text-red-500 uppercase tracking-[0.3em] mb-4",children:"Informacin de Empresa"}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Razn Social / Nombre Comercial"}),s.jsx("input",{type:"text",name:"nombre_empresa",value:a.nombre_empresa,onChange:o,required:!0,placeholder:"Ej: Corporativo del Sur S.A.",className:"w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Plaza Base"}),s.jsx("select",{name:"plaza",value:a.plaza,onChange:o,className:"w-full max-w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none appearance-none truncate",children:["MERIDA","CANCUN","CAMPECHE","CDMX"].map(c=>s.jsx("option",{value:c,children:c},c))})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Segmento"}),s.jsx("select",{name:"segmento",value:a.segmento,onChange:o,className:"w-full max-w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none appearance-none truncate",children:["PYME","CORPORATIVO","GOBIERNO","OTROS"].map(c=>s.jsx("option",{value:c,children:c},c))})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h4",{className:"text-[10px] font-black text-red-500 uppercase tracking-[0.3em] mb-4",children:"Contacto Directo"}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Persona de Contacto"}),s.jsxs("div",{className:"relative",children:[s.jsx(rt,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"text",name:"nombre_contacto",value:a.nombre_contacto,onChange:o,placeholder:"Nombre del responsable",className:"w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Telfono"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fa,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"tel",name:"telefono",value:a.telefono,onChange:o,placeholder:"999...",className:"w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(hi,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"email",name:"email",value:a.email,onChange:o,placeholder:"correo@empresa.com",className:"w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-1.5 md:col-span-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Tipo de Acuerdo"}),s.jsx("select",{name:"tipo_acuerdo",value:a.tipo_acuerdo,onChange:o,className:"w-full max-w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none appearance-none truncate",children:["SIN_ACUERDO","ACUERDO_ANUAL","PRECIO_FIJO"].map(c=>s.jsx("option",{value:c,children:c.replace(/_/g," ")},c))})]}),s.jsxs("div",{className:"space-y-1.5 md:col-span-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Etapa Comercial"}),s.jsx("select",{name:"etapa",value:a.etapa,onChange:o,className:"w-full max-w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none appearance-none truncate",children:["Prospecto","Contactado","Interesado","No Interesado","Cliente"].map(c=>s.jsx("option",{value:c,children:c},c))})]}),s.jsxs("div",{className:"space-y-1.5 md:col-span-1",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Direccin Completa"}),s.jsxs("div",{className:"relative",children:[s.jsx(ws,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"text",name:"direccion_completa",value:a.direccion_completa,onChange:o,placeholder:"Calle, Nmero, Colonia, Ciudad",className:"w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-bold outline-none"})]})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest ml-1",children:"Notas Generales / Alertas"}),s.jsx("textarea",{name:"notas_generales",value:a.notas_generales,onChange:o,placeholder:"Informacin relevante para ventas y facturacin...",rows:"2",className:"w-full p-4 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-2xl transition-all font-medium outline-none"})]})]}),s.jsxs("button",{type:"submit",className:"w-full bg-red-600 text-white py-5 rounded-2xl font-black uppercase tracking-widest hover:bg-red-700 transition-all flex items-center justify-center shadow-xl shadow-red-200 active:scale-[0.98]",children:[s.jsx(cr,{className:"mr-3",size:24}),r?"Actualizar Datos del Cliente":"Guardar Cliente en CRM"]})]})]})},qb=({clientes:e=[],onToggleEstatus:t,onEliminar:r,onEdit:n,onNew:a})=>{const[i,o]=P.useState(""),[l,c]=P.useState("activo"),d=(e||[]).filter(h=>{const x=(h.nombre_empresa||"").toLowerCase().includes(i.toLowerCase())||(h.plaza||"").toLowerCase().includes(i.toLowerCase())||(h.nombre_contacto||"").toLowerCase().includes(i.toLowerCase()),f=l==="todos"?!0:h.estatus===l;return x&&f});return s.jsxs("div",{className:"space-y-6 animate-premium-fade",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-enterprise-950 tracking-tight leading-none mb-1",children:"Directorio de Entidades"}),s.jsxs("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.3em] flex items-center gap-2",children:[s.jsx(Js,{size:12,className:"text-brand-orange"}),"Master Business Registry v2.0"]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"relative flex-1 md:w-64",children:[s.jsx("input",{type:"text",placeholder:"Buscar Razn Social, Contacto...",value:i,onChange:h=>o(h.target.value),className:"premium-input pl-11 h-12 text-sm"}),s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-300",size:18})]}),s.jsx("div",{className:"flex bg-enterprise-100 p-1.5 rounded-2xl border border-enterprise-200",children:["activo","inactivo","todos"].map(h=>s.jsx("button",{onClick:()=>c(h),className:`px-4 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all
                                    ${l===h?"bg-enterprise-900 text-white shadow-lg":"text-enterprise-400 hover:text-enterprise-600"}`,children:h},h))}),s.jsxs("button",{onClick:a,className:"h-12 bg-brand-orange text-white px-6 rounded-2xl flex items-center gap-2 font-black uppercase tracking-widest text-[10px] shadow-lg shadow-brand-orange/20 hover:scale-[1.02] active:scale-[0.98] transition-all",children:[s.jsx(nl,{size:16}),"Aadir Partner"]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-premium border border-enterprise-100 overflow-hidden",children:[s.jsxs("table",{className:"enterprise-table",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-enterprise-950 text-white",children:[s.jsx("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Socio Comercial"}),s.jsx("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Enlace Externo"}),s.jsx("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Nivel Contractual"}),s.jsx("th",{className:"px-8 py-6 text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Operacin"}),s.jsx("th",{className:"px-8 py-6 text-center text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Terminal Accin"})]})}),s.jsx("tbody",{className:"divide-y divide-enterprise-50",children:d.length>0?d.map(h=>{var x,f;return s.jsxs("tr",{className:`hover:bg-enterprise-50/50 transition-colors ${h.estatus==="inactivo"?"opacity-50":""}`,children:[s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-enterprise-950 rounded-2xl flex items-center justify-center text-white font-black text-lg border-2 border-white shadow-xl shadow-enterprise-900/10",children:(x=h.nombre_empresa)==null?void 0:x.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-sm font-black text-enterprise-950 uppercase tracking-tight",children:h.nombre_empresa}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${h.estatus==="activo"?"bg-emerald-500":"bg-brand-orange"}`}),s.jsxs("span",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:["ID-ENTT:",h.id.slice(0,6)]})]})]})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-enterprise-700 font-bold text-xs",children:[s.jsx(Tr,{size:12,className:"text-brand-orange"}),h.nombre_contacto||"No asignado"]}),s.jsx("div",{className:"text-[10px] text-enterprise-400 font-medium",children:h.segmento||"General Market"})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(js,{size:14,className:"text-emerald-500"}),s.jsx("span",{className:"text-[10px] font-black text-enterprise-700 uppercase tracking-widest",children:((f=h.tipo_acuerdo)==null?void 0:f.replace(/_/g," "))||"PRECIO LISTA"})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ws,{size:14,className:"text-brand-orange"}),s.jsx("span",{className:"text-[10px] font-bold text-enterprise-950 uppercase",children:h.plaza})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>n(h),className:"w-10 h-10 flex items-center justify-center bg-enterprise-50 text-enterprise-500 hover:bg-enterprise-900 hover:text-white rounded-xl transition-all shadow-sm",children:s.jsx(jn,{size:16})}),s.jsx("button",{onClick:()=>t(h),className:"w-10 h-10 flex items-center justify-center bg-enterprise-50 text-enterprise-500 hover:bg-brand-orange hover:text-white rounded-xl transition-all shadow-sm",children:s.jsx(wn,{size:16})}),s.jsx("button",{onClick:()=>{window.confirm("Eliminar definitivamente?")&&r(h.id)},className:"w-10 h-10 flex items-center justify-center bg-brand-orange/5 text-brand-orange hover:bg-brand-magenta hover:text-white rounded-xl transition-all",children:s.jsx(Nt,{size:16})})]})})]},h.id)}):s.jsx("tr",{children:s.jsxs("td",{colSpan:"5",className:"py-20 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-enterprise-50 rounded-full flex items-center justify-center mx-auto mb-6 text-enterprise-200",children:s.jsx(ks,{size:32})}),s.jsx("h3",{className:"text-lg font-black text-enterprise-900 uppercase tracking-tight",children:"Registro Vaco"}),s.jsx("p",{className:"text-xs text-enterprise-400 font-bold uppercase tracking-widest mt-2 italic",children:"Ajuste sus parmetros de bsqueda"})]})})})]}),s.jsxs("div",{className:"bg-enterprise-50 px-8 py-5 border-t border-enterprise-200 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex -space-x-2",children:[1,2,3].map(h=>s.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white bg-enterprise-200 flex items-center justify-center",children:s.jsx(Tr,{size:12,className:"text-enterprise-400"})},h))}),s.jsxs("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest",children:[e.length," Cuentas sincronizadas con CRM Regional"]})]}),s.jsxs("button",{className:"text-[10px] font-black text-brand-orange hover:underline uppercase tracking-widest flex items-center gap-2",children:["Exportar a Excel ",s.jsx(Sv,{size:12})]})]})]})]})},Kb=({clientes:e,productos:t,condicionesCliente:r,onSave:n,setMensaje:a})=>{const[i,o]=P.useState(""),[l,c]=P.useState(""),[d,h]=P.useState([]);P.useEffect(()=>{h([])},[i,e]);const x=(k,m,u)=>{h(p=>p.map(j=>{if(j.id===k){const _=m==="factor";return{...j,factor:_?u:j.factor,costoFijo:_?j.costoFijo:u,tipoAjuste:_?"FACTOR":"FIJO"}}return j}))},f=k=>{if(!d.find(m=>m.id===k.id)){const m=r.find(u=>String(u.clienteId)===String(i)&&String(u.productoId)===String(k.id));h(u=>[...u,{...k,factor:(m==null?void 0:m.factorDescuento)||"",costoFijo:(m==null?void 0:m.costoFijo)||"",tipoAjuste:(m==null?void 0:m.tipoAjuste)||"FACTOR"}])}},v=k=>{h(m=>m.filter(u=>u.id!==k))},g=async()=>{if(!i||d.length===0){a({tipo:"error",texto:"Selecciona un cliente y al menos un producto para guardar."});return}let k=!1,m=[];if(d.forEach(p=>{const j=parseFloat(p.factor),_=parseFloat(p.costoFijo);let b="",y="";if(j>0&&(isNaN(_)||_===""))b="FACTOR",y=j;else if(_>0&&(isNaN(j)||j===""))b="FIJO",y=_;else if(j>0&&_>0)b=p.tipoAjuste,y=b==="FACTOR"?j:_;else{k=!0,a({tipo:"error",texto:`El producto ${p.tipo} requiere Factor o Precio Fijo.`});return}if(k)return;const N=r.find(S=>String(S.clienteId)===String(i)&&String(S.productoId)===String(p.id));m.push({...N!=null&&N.id?{id:N.id}:{},cliente_id:i,producto_id:p.id,tipo_ajuste:b,factor_descuento:b==="FACTOR"?y:null,costo_fijo:b==="FIJO"?y:null})}),k)return;await n("condiciones_cliente",m)&&(a({tipo:"exito",texto:"Se actualizaron las tarifas con xito!"}),h([]))},w=P.useMemo(()=>t.filter(k=>k.disponible&&!d.some(m=>m.id===k.id)&&(k.canal.toLowerCase().includes(l.toLowerCase())||k.tipo.toLowerCase().includes(l.toLowerCase())||k.horario.toLowerCase().includes(l.toLowerCase()))),[t,l,d]);return s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 mt-8",children:[s.jsx("div",{className:"bg-slate-900 p-4",children:s.jsxs("h3",{className:"text-sm font-black text-white flex items-center gap-3",children:[s.jsx(gs,{size:20,className:"text-red-500"}),"Precios Especiales por Cliente"]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-2 block ml-1",children:"1. Seleccionar Cliente"}),s.jsxs("select",{value:i,onChange:k=>o(k.target.value),className:"w-full max-w-full p-2.5 bg-gray-50 border border-gray-100 rounded-xl focus:ring-1 focus:ring-red-500 transition-all font-bold text-[10px] text-gray-800 truncate outline-none",children:[s.jsx("option",{value:"",children:"-- Seleccionar un cliente --"}),e.map(k=>s.jsx("option",{value:k.id,children:k.nombre_empresa},k.id))]})]}),i&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-in fade-in slide-in-from-bottom-5 duration-500",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest block ml-1",children:"2. Buscar Productos"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),placeholder:"Ver catlogo...",className:"w-full p-2.5 pl-10 bg-gray-50 border border-gray-100 rounded-xl focus:ring-1 focus:ring-red-500 transition-all font-bold text-[10px] outline-none"}),s.jsx(at,{size:14,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto space-y-1 pr-2 custom-scrollbar",children:w.map(k=>s.jsxs("div",{className:"group flex items-center justify-between p-2.5 border border-gray-100 rounded-lg bg-gray-50 hover:bg-white hover:border-red-200 transition-all",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"font-black text-gray-800 text-[10px] truncate leading-tight",children:[k.canal," - ",k.tipo]}),s.jsxs("p",{className:"text-[8px] font-bold text-gray-400 uppercase tracking-tighter",children:[k.plaza," | ",k.horario]})]}),s.jsx("button",{onClick:()=>f(k),className:"ml-2 bg-white text-red-600 p-1.5 rounded-full border border-red-100 hover:bg-red-600 hover:text-white transition-all shadow-sm",children:s.jsx(kt,{size:12,strokeWidth:4})})]},k.id))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest block ml-1",children:["3. Definir Condiciones (",d.length,")"]}),s.jsx("div",{className:"max-h-[350px] overflow-y-auto space-y-3 pr-2 custom-scrollbar",children:d.length===0?s.jsx("div",{className:"h-40 flex items-center justify-center border-2 border-dashed border-gray-100 rounded-2xl bg-gray-50",children:s.jsx("p",{className:"text-gray-400 text-[10px] font-black uppercase tracking-widest",children:"Agrega productos"})}):d.map(k=>s.jsxs("div",{className:"p-3 border border-red-100 rounded-xl bg-white shadow-sm relative group",children:[s.jsx("button",{onClick:()=>v(k.id),className:"absolute -top-1.5 -right-1.5 bg-white text-gray-400 hover:text-red-600 hover:scale-110 shadow-md rounded-full p-1 transition-all z-10",children:s.jsx($t,{size:12,strokeWidth:4})}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("p",{className:"font-black text-gray-800 text-[10px] leading-tight",children:[k.canal," - ",k.tipo]}),s.jsxs("p",{className:"text-[8px] font-bold text-red-700 uppercase",children:[k.plaza," | ",k.horario," | Original: ",M(k.costoBase)]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Factor"}),s.jsx("input",{type:"number",step:"0.01",value:k.factor,onChange:m=>x(k.id,"factor",m.target.value),onFocus:m=>m.target.select(),className:`w-full p-1.5 rounded-lg border text-[10px] font-black transition-all outline-none ${k.tipoAjuste==="FACTOR"?"bg-red-50 border-red-300 text-red-800":"bg-gray-50 border-gray-100"}`,placeholder:"0.85"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Precio NeTo"}),s.jsx("input",{type:"number",value:k.costoFijo,onChange:m=>x(k.id,"costoFijo",m.target.value),onFocus:m=>m.target.select(),className:`w-full p-1.5 rounded-lg border text-[10px] font-black transition-all outline-none ${k.tipoAjuste==="FIJO"?"bg-red-50 border-red-300 text-red-800":"bg-gray-50 border-gray-100"}`,placeholder:"1500"})]})]})]},k.id))}),d.length>0&&s.jsxs("button",{onClick:g,className:"w-full bg-green-600 text-white py-2.5 rounded-xl font-black uppercase tracking-widest hover:bg-green-700 transition-all flex items-center justify-center shadow-lg active:scale-95 text-[10px]",children:[s.jsx(cr,{className:"mr-2",size:14}),"Actualizar Tarifas"]})]})]})]})]})},Xb=({productos:e=[],onSave:t,setMensaje:r})=>{const[n,a]=P.useState(""),[i,o]=P.useState(null),l=(e||[]).filter(h=>{var x,f,v;return((x=h.canal)==null?void 0:x.toLowerCase().includes(n.toLowerCase()))||((f=h.tipo)==null?void 0:f.toLowerCase().includes(n.toLowerCase()))||((v=h.plaza)==null?void 0:v.toLowerCase().includes(n.toLowerCase()))}),c=async h=>{const x=!h.activo,f=x?"reactivar":"suspender";window.confirm(`Deseas ${f} la disponibilidad de "${h.canal} - ${h.tipo}"?`)&&await t("productos",{...h,activo:x})&&r({tipo:"exito",texto:`Inventario ${x?"habilitado":"congelado"} para cotizacin.`})},d=async()=>{await t("productos",i)&&(r({tipo:"exito",texto:"Tarifa base actualizada en el motor de clculo."}),o(null))};return s.jsxs("div",{className:"space-y-6 animate-premium-fade",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-enterprise-950 uppercase italic italic-brand tracking-tighter leading-none mb-2",children:"Catlogo de Activos"}),s.jsxs("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.3em] flex items-center gap-2",children:[s.jsx(cc,{size:14,className:"text-brand-orange"}),"Inventory Pricing Engine"]})]}),s.jsx("div",{className:"flex flex-wrap items-center gap-4 w-full md:w-auto",children:s.jsxs("div",{className:"relative flex-1 md:w-80 group",children:[s.jsx("input",{type:"text",placeholder:"Canal, Medio o Regin...",value:n,onChange:h=>a(h.target.value),className:"premium-input pl-11 h-12 text-sm shadow-sm border border-enterprise-100 bg-white focus:ring-1 focus:ring-brand-orange/20"}),s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-300 group-focus-within:text-brand-orange transition-colors",size:18})]})})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-enterprise-100 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"enterprise-table w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-enterprise-950 text-white font-black uppercase text-[9px] tracking-[0.2em]",children:[s.jsx("th",{className:"px-8 py-6 opacity-80",children:"Power Status"}),s.jsx("th",{className:"px-8 py-6 opacity-80",children:"Plataforma / Canal"}),s.jsx("th",{className:"px-8 py-6 opacity-80",children:"Especificacin"}),s.jsx("th",{className:"px-8 py-6 opacity-80",children:"Regin"}),s.jsx("th",{className:"px-8 py-6 text-right opacity-80",children:"Tarifa Base (MXN)"}),s.jsx("th",{className:"px-8 py-6 text-center opacity-80",children:"Tuning"})]})}),s.jsx("tbody",{className:"divide-y divide-enterprise-50",children:l.length>0?l.map(h=>s.jsxs("tr",{className:`group hover:bg-enterprise-50/50 transition-all ${h.activo?"":"bg-enterprise-50/30"}`,children:[s.jsx("td",{className:"px-8 py-6",children:s.jsx("button",{onClick:()=>c(h),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all shadow-sm ${h.activo?"bg-emerald-50 text-emerald-600 border border-emerald-500/20 hover:bg-brand-orange hover:text-white hover:border-brand-orange":"bg-enterprise-50 text-enterprise-400 border border-enterprise-200 hover:bg-emerald-500 hover:text-white hover:border-emerald-500"}`,children:h.activo?s.jsxs(s.Fragment,{children:[s.jsx(rr,{size:12})," Live"]}):s.jsxs(s.Fragment,{children:[s.jsx(ab,{size:12})," Hold"]})})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-enterprise-950 rounded-xl flex items-center justify-center text-white shadow-lg",children:s.jsx(Ba,{size:18,className:"text-brand-orange"})}),s.jsx("span",{className:"text-sm font-black text-enterprise-950 uppercase",children:h.canal})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-xs font-bold text-enterprise-600 uppercase tracking-tight",children:h.tipo}),s.jsx("span",{className:"text-[9px] font-black text-enterprise-300 uppercase tracking-widest",children:"Std Duration"})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gs,{size:12,className:"text-brand-orange"}),s.jsx("span",{className:"text-[10px] font-black text-enterprise-700 uppercase tracking-widest",children:h.plaza})]})}),s.jsx("td",{className:"px-8 py-6 text-right",children:(i==null?void 0:i.id)===h.id?s.jsx("div",{className:"flex items-center justify-end gap-2 animate-premium-fade",children:s.jsx("input",{type:"number",value:i.costo_base,onChange:x=>o({...i,costo_base:x.target.value}),className:"w-32 h-11 bg-white border-2 border-brand-orange/30 rounded-xl text-right font-black text-base px-3 focus:ring-1 focus:ring-brand-orange/20 outline-none shadow-sm",autoFocus:!0})}):s.jsx("span",{className:"text-lg font-black text-enterprise-950 tabular-nums",children:M(h.costo_base)})}),s.jsx("td",{className:"px-8 py-6",children:s.jsx("div",{className:"flex items-center justify-center gap-3",children:(i==null?void 0:i.id)===h.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:d,className:"w-11 h-11 flex items-center justify-center bg-emerald-500 text-white rounded-xl shadow-lg shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95",children:s.jsx(cr,{size:18})}),s.jsx("button",{onClick:()=>o(null),className:"w-11 h-11 flex items-center justify-center bg-enterprise-100 text-enterprise-400 rounded-xl hover:bg-enterprise-200 transition-all active:scale-95",children:s.jsx($t,{size:18})})]}):s.jsx("button",{onClick:()=>o({...h}),className:"w-11 h-11 flex items-center justify-center bg-enterprise-50 text-enterprise-400 hover:bg-enterprise-950 hover:text-white rounded-xl transition-all border border-enterprise-100 hover:border-enterprise-950",children:s.jsx(jn,{size:18})})})})]},h.id)):s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",className:"py-24 text-center",children:[s.jsx(jt,{size:40,className:"mx-auto text-enterprise-200 mb-4"}),s.jsx("p",{className:"text-xs font-black text-enterprise-300 uppercase tracking-widest italic",children:"No se han detectado activos bajo estos parmetros."})]})})})]})}),s.jsx("div",{className:"bg-enterprise-50 px-8 py-6 border-t border-enterprise-100 flex flex-col md:flex-row justify-between items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-xl bg-enterprise-950 shadow-lg",children:s.jsx(wn,{size:16,className:"text-brand-orange"})}),s.jsxs("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.2em]",children:[s.jsx("span",{className:"text-enterprise-700",children:e.filter(h=>h.activo).length})," Activos disponibles en el motor de clculo nacional"]})]})})]})]})},Jb=({configuracion:e,onSave:t,setMensaje:r})=>{const[n,a]=P.useState([]);P.useEffect(()=>{if(e){const l=Object.entries(e).map(([c,d])=>({parametro:c,valor:d,tipo:typeof d=="number"?"NUMERO":"TEXTO"}));a(l)}},[e]);const i=(l,c)=>{a(d=>d.map(h=>h.parametro===l?{...h,valor:c}:h))},o=async l=>{l.preventDefault(),r({tipo:"cargando",texto:"Actualizando configuracin..."});const c=n.map(h=>({parametro:h.parametro,valor:h.valor.toString(),tipo:h.tipo}));await t("configuracion",c,"parametro")&&r({tipo:"exito",texto:"Configuracin global actualizada."})};return s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100 mt-8",children:[s.jsx("div",{className:"bg-slate-900 p-4",children:s.jsxs("h3",{className:"text-sm font-black text-white uppercase flex items-center gap-3",children:[s.jsx(Va,{size:20,className:"text-red-500"}),"Configuracin del Sistema"]})}),s.jsxs("form",{onSubmit:o,className:"p-8 space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(l=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 hover:border-red-100 transition-all",children:[s.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest block mb-2",children:l.parametro.replace(/_/g," ")}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-300",children:l.tipo==="NUMERO"?s.jsx(Av,{size:16}):s.jsx(Cb,{size:16})}),s.jsx("input",{type:l.tipo==="NUMERO"?"number":"text",step:"0.01",value:l.valor,onChange:c=>i(l.parametro,c.target.value),className:"w-full pl-10 p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 outline-none font-bold text-gray-700"})]})]},l.parametro))}),s.jsx("div",{className:"pt-4 border-t border-gray-100",children:s.jsxs("button",{type:"submit",className:"w-full bg-slate-800 text-white py-4 rounded-xl font-black uppercase tracking-widest hover:bg-slate-900 transition-all flex items-center justify-center shadow-lg active:scale-95",children:[s.jsx(cr,{className:"mr-3",size:20}),"Guardar Cambios Globales"]})})]})]})},Rp=({cobranza:e=[],clientes:t=[],onSave:r,setMensaje:n})=>{const[a,i]=P.useState(""),[o,l]=P.useState("todos"),[c,d]=P.useState(null),[h,x]=P.useState(null),[f,v]=P.useState(!1),[g,w]=P.useState({numero_factura:"",fecha_programada_cobro:"",estatus_pago:"pendiente",monto_facturado:"",cliente_id_manual:"",notas:""}),k=(e||[]).filter(y=>{var O,C,L,B;const N=((C=(O=y.cotizaciones)==null?void 0:O.clientes)==null?void 0:C.nombre_empresa)||((L=y.clientes)==null?void 0:L.nombre_empresa)||"Cliente Desconocido",S=(((B=y.cotizaciones)==null?void 0:B.folio)||"").toLowerCase().includes(a.toLowerCase())||N.toLowerCase().includes(a.toLowerCase())||(y.numero_factura||"").toLowerCase().includes(a.toLowerCase()),T=o==="todos"||y.estatus_pago===o;return S&&T}),m={total:k.reduce((y,N)=>y+parseFloat(N.monto_facturado||0),0),cobrado:k.filter(y=>y.estatus_pago==="cobrado").reduce((y,N)=>y+parseFloat(N.monto_facturado||0),0),vencido:k.filter(y=>y.estatus_pago==="cobrado"||!y.fecha_programada_cobro?!1:new Date(y.fecha_programada_cobro)<new Date).reduce((y,N)=>y+parseFloat(N.monto_facturado||0),0)},u=y=>{d(y.id),w({numero_factura:y.numero_factura||"",fecha_programada_cobro:y.fecha_programada_cobro||"",estatus_pago:y.estatus_pago||"pendiente",notas:y.notas||""})},p=async y=>{await r("cobranza",{...g,id:y})&&(n({tipo:"exito",texto:"Registro de cobranza actualizado"}),d(null))},j=async()=>{if(!g.cliente_id_manual||!g.monto_facturado||!g.numero_factura){n({tipo:"error",texto:"Por favor completa cliente, folio e importe del subtotal."});return}const y={numero_factura:g.numero_factura,monto_facturado:parseFloat(g.monto_facturado),fecha_programada_cobro:g.fecha_programada_cobro||null,estatus_pago:g.estatus_pago,notas:g.notas};await r("cobranza",y)&&(n({tipo:"exito",texto:"Nueva factura registrada"}),v(!1),w({numero_factura:"",fecha_programada_cobro:"",estatus_pago:"pendiente",monto_facturado:"",cliente_id_manual:"",notas:""}))},_=async(y,N)=>{const S=y.target.files[0];if(S){x(N);try{const T=`facturas/${N}_${Date.now()}.pdf`,{data:O,error:C}=await re.storage.from("comprobantes").upload(T,S);if(C)throw C;const{data:{publicUrl:L}}=re.storage.from("comprobantes").getPublicUrl(T);await r("cobranza",{id:N,url_archivo_pdf:L}),n({tipo:"exito",texto:"Factura PDF subida correctamente"})}catch(T){console.error(T),n({tipo:"error",texto:'Error al subir el archivo. Verifica que el storage "comprobantes" sea pblico.'})}finally{x(null)}}},b=y=>{const N=y.estatus_pago!=="cobrado"&&y.fecha_programada_cobro&&new Date(y.fecha_programada_cobro)<new Date;return y.estatus_pago==="cobrado"?{label:"Cobrado",color:"bg-emerald-50 text-emerald-600",icon:s.jsx(rr,{size:12})}:N?{label:"Vencido",color:"bg-brand-magenta/10 text-brand-magenta",icon:s.jsx(jt,{size:12})}:y.estatus_pago==="programado"?{label:"Programado",color:"bg-blue-50 text-blue-600",icon:s.jsx(ui,{size:12})}:{label:"Pendiente",color:"bg-enterprise-50 text-enterprise-400",icon:s.jsx(lc,{size:12})}};return s.jsxs("div",{className:"space-y-4 md:space-y-6 pb-24 animate-premium-fade max-w-7xl mx-auto px-4 md:px-0 overflow-hidden",children:[s.jsxs("div",{className:"bg-enterprise-950 p-6 rounded-2xl md:rounded-b-none flex flex-col md:flex-row justify-between items-center gap-4 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-orange/10 blur-[80px] -mr-32 -mt-32"}),s.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[s.jsx(Ke,{size:20,className:"text-brand-orange"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase italic italic-brand flex items-center gap-3 tracking-widest",children:"Gestin de Cobranza Premium"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4",children:[s.jsxs("div",{className:"bg-white px-3 md:px-6 py-5 rounded-xl md:rounded-2xl shadow-sm border border-enterprise-100 hover:shadow-lg transition-all duration-300",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-1 md:mb-2",children:"Cartera Individual"}),s.jsxs("div",{className:"flex items-baseline gap-1 md:gap-2",children:[s.jsx("h4",{className:"text-sm md:text-xl font-black text-enterprise-950 tracking-tighter",children:M(m.total)}),s.jsx("span",{className:"text-[6px] md:text-[7px] font-bold text-enterprise-300 uppercase tracking-tighter",children:"Subt."})]})]}),s.jsxs("div",{className:"bg-white px-3 md:px-6 py-5 rounded-xl md:rounded-2xl shadow-sm border border-enterprise-100 border-l-4 border-l-emerald-500 hover:shadow-lg transition-all duration-300",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-emerald-600 uppercase tracking-widest mb-1 md:mb-2",children:"Recuperado"}),s.jsx("h4",{className:"text-sm md:text-xl font-black text-emerald-600 tracking-tighter",children:M(m.cobrado)})]}),s.jsxs("div",{className:"bg-white px-3 md:px-6 py-5 rounded-xl md:rounded-2xl shadow-sm border border-enterprise-100 border-l-4 border-l-brand-magenta hover:shadow-lg transition-all duration-300",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-brand-magenta uppercase tracking-widest mb-1 md:mb-2",children:"Vencido"}),s.jsx("h4",{className:"text-sm md:text-xl font-black text-brand-magenta tracking-tighter",children:M(m.vencido)})]}),s.jsxs("div",{className:"bg-enterprise-950 px-3 md:px-6 py-5 rounded-xl md:rounded-2xl shadow-xl flex items-center justify-between group relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-orange/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-1 md:mb-2",children:"Facturas Totales"}),s.jsx("h4",{className:"text-sm md:text-xl font-black text-white tracking-tighter",children:k.length})]}),s.jsx(Ke,{size:24,className:"text-brand-orange opacity-50 relative z-10 group-hover:scale-110 transition-transform"})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative group w-full",children:[s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-400 group-focus-within:text-brand-orange transition-colors",size:14}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente o factura...",value:a,onChange:y=>i(y.target.value),className:"w-full pl-10 pr-4 py-3 bg-white border border-enterprise-100 rounded-xl font-bold text-[10px] shadow-sm outline-none focus:ring-1 focus:ring-brand-orange/20 transition-all placeholder:text-enterprise-300"})]}),s.jsx("div",{className:"flex bg-enterprise-950 rounded-xl p-1 w-fit shadow-lg",children:["todos","pendiente","programado","cobrado"].map(y=>s.jsx("button",{onClick:()=>l(y),className:`px-4 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-widest whitespace-nowrap transition-all
                                ${o===y?"bg-brand-orange text-white shadow-lg":"text-enterprise-400 hover:text-enterprise-200"}`,children:y},y))}),s.jsxs("button",{onClick:()=>v(!0),className:"w-full md:w-auto bg-brand-orange hover:bg-brand-magenta text-white px-6 py-3 rounded-xl font-black uppercase text-[9px] tracking-[0.2em] transition-all active:scale-95 shadow-xl shadow-brand-orange/20 flex items-center justify-center gap-2",children:[s.jsx(kt,{size:14})," Nueva Factura"]})]}),f&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-2 md:p-4 bg-enterprise-950/60 backdrop-blur-md animate-premium-fade",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl md:rounded-[3rem] p-6 md:p-12 shadow-2xl relative overflow-y-auto max-h-[90vh]",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-brand-orange"}),s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("h2",{className:"text-xl md:text-2xl font-black text-enterprise-950 uppercase italic italic-brand tracking-tighter flex items-center gap-3",children:[s.jsx(kt,{className:"text-brand-orange"})," Registrar Factura"]}),s.jsx("button",{onClick:()=>v(!1),className:"p-3 hover:bg-enterprise-50 rounded-full transition-colors",children:s.jsx($t,{size:20,className:"text-enterprise-400"})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Seleccionar Cliente"}),s.jsxs("select",{value:g.cliente_id_manual,onChange:y=>w({...g,cliente_id_manual:y.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl font-bold text-sm outline-none focus:ring-1 focus:ring-brand-orange/20 appearance-none",children:[s.jsx("option",{value:"",children:"Elegir empresa..."}),t.map(y=>s.jsx("option",{value:y.id,children:y.nombre_empresa},y.id))]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Folio Factura"}),s.jsx("input",{type:"text",placeholder:"Ej: F-1234",value:g.numero_factura,onChange:y=>w({...g,numero_factura:y.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl font-bold text-sm outline-none focus:ring-1 focus:ring-brand-orange/20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Monto Subtotal"}),s.jsx("input",{type:"number",placeholder:"0.00",value:g.monto_facturado,onChange:y=>w({...g,monto_facturado:y.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl font-bold text-sm outline-none focus:ring-1 focus:ring-brand-orange/20 font-mono"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Fecha Programada Cobro"}),s.jsx("input",{type:"date",value:g.fecha_programada_cobro,onChange:y=>w({...g,fecha_programada_cobro:y.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl font-bold text-sm outline-none focus:ring-1 focus:ring-brand-orange/20"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Notas Internas"}),s.jsx("textarea",{placeholder:"Detalles adicionales sobre el cobro...",value:g.notas,onChange:y=>w({...g,notes:y.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl font-bold text-sm outline-none focus:ring-1 focus:ring-brand-orange/20 min-h-[100px] resize-none"})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{onClick:()=>v(!1),className:"flex-1 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-enterprise-400 hover:bg-enterprise-50 rounded-2xl transition-all",children:"Cancelar"}),s.jsx("button",{onClick:j,className:"flex-[2] py-4 bg-enterprise-950 text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] hover:bg-brand-orange transition-all shadow-xl shadow-enterprise-900/10",children:"Guardar Registro"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-[1.5rem] md:rounded-[2.5rem] shadow-xl border border-enterprise-100 overflow-hidden",children:[s.jsx("div",{className:"hidden lg:block overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-[900px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-enterprise-950 text-white font-black uppercase text-[8px] tracking-[0.2em]",children:[s.jsx("th",{className:"px-6 py-5",children:"Status"}),s.jsx("th",{className:"px-6 py-5",children:"Cliente / Origen"}),s.jsx("th",{className:"px-6 py-5",children:"Factura / Folio"}),s.jsx("th",{className:"px-6 py-5 text-center",children:"Fecha Pago"}),s.jsx("th",{className:"px-6 py-5 text-right",children:"Subtotal Neto"}),s.jsx("th",{className:"px-6 py-5 text-center",children:"Documentos"}),s.jsx("th",{className:"px-6 py-5 text-center",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-enterprise-50",children:k.map(y=>{var O,C,L,B,R;const N=b(y),S=c===y.id,T=((C=(O=y.cotizaciones)==null?void 0:O.clientes)==null?void 0:C.nombre_empresa)||((L=y.clientes)==null?void 0:L.nombre_empresa)||"Cliente S/N";return s.jsxs("tr",{className:`hover:bg-enterprise-50/50 transition-colors ${S?"bg-brand-orange/5":""}`,children:[s.jsx("td",{className:"px-6 py-5",children:S?s.jsxs("select",{value:g.estatus_pago,onChange:E=>w({...g,estatus_pago:E.target.value}),className:"w-full p-2 bg-white border border-brand-orange/20 rounded-lg text-[8px] font-black uppercase outline-none focus:ring-1 focus:ring-brand-orange/20",children:[s.jsx("option",{value:"pendiente",children:"Pendiente"}),s.jsx("option",{value:"programado",children:"Programado"}),s.jsx("option",{value:"cobrado",children:"Cobrado"})]}):s.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-tighter ${N.color}`,children:[N.icon," ",N.label]})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsx("p",{className:"text-xs font-black text-enterprise-950 uppercase truncate max-w-[180px]",children:T}),s.jsxs("p",{className:"text-[9px] font-bold text-enterprise-400",children:["Contrato: ",((B=y.cotizaciones)==null?void 0:B.numero_contrato)||"S/N"]})]}),s.jsx("td",{className:"px-6 py-5",children:S?s.jsx("input",{type:"text",value:g.numero_factura,placeholder:"Factura",onChange:E=>w({...g,numero_factura:E.target.value}),className:"w-full p-2 bg-white border border-brand-orange/20 rounded-lg text-[10px] font-black outline-none focus:ring-1 focus:ring-brand-orange/20"}):s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-[10px] font-black text-enterprise-950",children:y.numero_factura||"Por asignar"}),s.jsx("p",{className:"text-[8px] font-bold text-brand-orange uppercase tracking-widest",children:((R=y.cotizaciones)==null?void 0:R.folio)||"Manual"})]})}),s.jsx("td",{className:"px-6 py-5 text-center",children:S?s.jsx("input",{type:"date",value:g.fecha_programada_cobro,onChange:E=>w({...g,fecha_programada_cobro:E.target.value}),className:"w-full p-2 bg-white border border-brand-orange/20 rounded-lg text-[10px] font-black outline-none focus:ring-1 focus:ring-brand-orange/20"}):s.jsx("p",{className:"text-[10px] font-black text-enterprise-700",children:y.fecha_programada_cobro?new Date(y.fecha_programada_cobro).toLocaleDateString("es-MX"):"--"})}),s.jsxs("td",{className:"px-6 py-5 text-right",children:[s.jsx("p",{className:"text-sm font-black text-enterprise-950",children:M(y.monto_facturado)}),s.jsx("p",{className:"text-[7px] font-bold text-enterprise-300 uppercase tracking-widest",children:"Antes de IVA"})]}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex justify-center gap-2",children:y.url_archivo_pdf?s.jsx("a",{href:y.url_archivo_pdf,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-brand-orange/10 text-brand-orange rounded-xl hover:bg-brand-orange hover:text-white transition-all shadow-sm",children:s.jsx(Er,{size:16})}):s.jsxs("label",{className:`p-2.5 bg-enterprise-50 text-enterprise-400 rounded-xl hover:bg-brand-orange/10 hover:text-brand-orange cursor-pointer transition-all border border-transparent hover:border-brand-orange/20 ${h===y.id?"animate-pulse":""}`,children:[s.jsx("input",{type:"file",accept:".pdf",className:"hidden",onChange:E=>_(E,y.id),disabled:h===y.id}),s.jsx(Gd,{size:16})]})})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex justify-center gap-1",children:S?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>p(y.id),className:"p-2.5 text-white bg-emerald-500 hover:bg-emerald-600 rounded-xl shadow-lg shadow-emerald-500/20 transition-all",children:s.jsx(cr,{size:16})}),s.jsx("button",{onClick:()=>d(null),className:"p-2.5 text-white bg-enterprise-400 hover:bg-enterprise-500 rounded-xl shadow-lg shadow-enterprise-400/20 transition-all",children:s.jsx($t,{size:16})})]}):s.jsx("button",{onClick:()=>u(y),className:"p-2.5 text-enterprise-400 hover:text-enterprise-950 hover:bg-enterprise-100 rounded-xl transition-all",children:s.jsx(jn,{size:16})})})})]},y.id)})})]})}),s.jsx("div",{className:"lg:hidden divide-y divide-enterprise-50 bg-white",children:k.map(y=>{var O,C,L,B,R;const N=b(y),S=c===y.id,T=((C=(O=y.cotizaciones)==null?void 0:O.clientes)==null?void 0:C.nombre_empresa)||((L=y.clientes)==null?void 0:L.nombre_empresa)||"Cliente S/N";return s.jsxs("div",{className:`p-6 transition-colors ${S?"bg-brand-orange/5":""}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-[7px] font-black uppercase w-fit shadow-sm ${N.color}`,children:[N.icon," ",N.label]}),s.jsx("h3",{className:"font-black text-enterprise-950 uppercase text-[12px] leading-tight mt-2",children:T}),s.jsxs("p",{className:"text-[9px] font-bold text-enterprise-400 uppercase tracking-widest mt-1",children:[((B=y.cotizaciones)==null?void 0:B.folio)||"Manual","  Contrato: ",((R=y.cotizaciones)==null?void 0:R.numero_contrato)||"S/N"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-black text-enterprise-950",children:M(y.monto_facturado)}),s.jsx("p",{className:"text-[8px] font-bold text-enterprise-300 uppercase tracking-tighter",children:"Subtotal"})]})]}),S?s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6 p-6 bg-enterprise-50 rounded-2xl border border-brand-orange/20 shadow-xl",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-2 block",children:"Estatus"}),s.jsxs("select",{value:g.estatus_pago,onChange:E=>w({...g,estatus_pago:E.target.value}),className:"w-full p-3 bg-white border border-enterprise-100 rounded-xl text-[10px] font-black uppercase outline-none focus:ring-1 focus:ring-brand-orange/20",children:[s.jsx("option",{value:"pendiente",children:"Pendiente"}),s.jsx("option",{value:"programado",children:"Programado"}),s.jsx("option",{value:"cobrado",children:"Cobrado"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-2 block",children:"Factura"}),s.jsx("input",{type:"text",value:g.numero_factura,onChange:E=>w({...g,numero_factura:E.target.value}),className:"w-full p-3 bg-white border border-enterprise-100 rounded-xl text-[10px] font-black outline-none focus:ring-1 focus:ring-brand-orange/20"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-2 block",children:"Fecha Programada"}),s.jsx("input",{type:"date",value:g.fecha_programada_cobro,onChange:E=>w({...g,fecha_programada_cobro:E.target.value}),className:"w-full p-3 bg-white border border-enterprise-100 rounded-xl text-[10px] font-black outline-none focus:ring-1 focus:ring-brand-orange/20"})]}),s.jsxs("div",{className:"col-span-2 flex gap-3 pt-3",children:[s.jsx("button",{onClick:()=>p(y.id),className:"flex-1 py-3 bg-emerald-500 text-white rounded-xl text-[9px] font-black uppercase shadow-lg shadow-emerald-500/20",children:"Guardar"}),s.jsx("button",{onClick:()=>d(null),className:"flex-1 py-3 bg-enterprise-200 text-enterprise-600 rounded-xl text-[9px] font-black uppercase",children:"Cancelar"})]})]}):s.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-enterprise-50",children:[s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-widest",children:"Factura"}),s.jsx("p",{className:"text-[10px] font-black text-enterprise-950 uppercase",children:y.numero_factura||"--"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-widest",children:"Fecha Pago"}),s.jsx("p",{className:"text-[10px] font-black text-enterprise-950",children:y.fecha_programada_cobro?new Date(y.fecha_programada_cobro).toLocaleDateString():"--"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex gap-2",children:y.url_archivo_pdf?s.jsxs("a",{href:y.url_archivo_pdf,target:"_blank",rel:"noreferrer",className:"p-3 bg-brand-orange/10 text-brand-orange rounded-xl flex items-center gap-2 border border-brand-orange/10 transition-all hover:bg-brand-orange hover:text-white",children:[s.jsx(Er,{size:18}),s.jsx("span",{className:"text-[9px] font-black uppercase",children:"PDF"})]}):s.jsxs("label",{className:`p-3 bg-enterprise-50 text-enterprise-400 rounded-xl hover:bg-brand-orange/10 hover:text-brand-orange transition-all cursor-pointer flex items-center gap-2 border border-enterprise-100 hover:border-brand-orange/20 ${h===y.id?"animate-pulse":""}`,children:[s.jsx("input",{type:"file",accept:".pdf",className:"hidden",onChange:E=>_(E,y.id),disabled:h===y.id}),s.jsx(Gd,{size:18}),s.jsx("span",{className:"text-[9px] font-black uppercase",children:"Subir"})]})}),s.jsx("button",{onClick:()=>u(y),className:"p-3 text-enterprise-400 bg-enterprise-50 hover:bg-enterprise-950 hover:text-white rounded-xl transition-all border border-enterprise-100 hover:border-enterprise-950",children:s.jsx(jn,{size:18})})]})]})]},y.id)})}),k.length===0&&s.jsxs("div",{className:"col-span-full py-40 text-center bg-white rounded-[3rem] border-2 border-dashed border-enterprise-100",children:[s.jsx(Ke,{className:"mx-auto text-enterprise-100 mb-6",size:80}),s.jsx("h4",{className:"text-xl font-black text-enterprise-200 uppercase tracking-[0.4em]",children:"No hay facturas pendientes"}),s.jsx("p",{className:"text-[10px] font-bold text-enterprise-400 uppercase tracking-widest mt-4",children:o==="todos"?"Las ventas ganadas aparecern aqu automticamente":`No hay registros con estatus ${o}`})]})]})]})},Qb=({perfil:e,perfiles:t=[],onSave:r,onEliminar:n,setMensaje:a,onLogout:i})=>{const[o,l]=P.useState(!1),[c,d]=P.useState(null),[h,x]=P.useState({nombre_completo:"",telefono:"",puesto:"Asesor Comercial",email:"",newPassword:"",confirmPassword:""}),[f,v]=P.useState(!1),g=u=>{d(u),x({nombre_completo:u.nombre_completo||"",telefono:u.telefono||"",puesto:u.puesto||"Asesor Comercial",email:u.email||"",newPassword:"",confirmPassword:""}),l(!0),window.scrollTo({top:0,behavior:"smooth"})},w=()=>{d(null),x({nombre_completo:"",telefono:"",puesto:"Asesor Comercial",email:"",newPassword:"",confirmPassword:""}),l(!0),window.scrollTo({top:0,behavior:"smooth"})},k=async u=>{u.preventDefault(),v(!0);try{if(h.newPassword){if(h.newPassword.length<6)throw new Error("La contrasea debe tener al menos 6 caracteres");if(h.newPassword!==h.confirmPassword)throw new Error("Las contraseas no coinciden")}let p=!1;if((c==null?void 0:c.id)===(e==null?void 0:e.id)){const _={};if(h.email!==e.email&&(_.email=h.email,p=!0),h.newPassword&&(_.password=h.newPassword,p=!0),Object.keys(_).length>0){const{error:b}=await re.auth.updateUser(_);if(b)throw b}}const j={nombre_completo:h.nombre_completo,telefono:h.telefono,puesto:h.puesto,email:h.email,id:c==null?void 0:c.id};await r("perfiles",j),p?(a({tipo:"exito",texto:"Credenciales actualizadas correctamente. Redirigiendo..."}),setTimeout(()=>{i()},1500)):(l(!1),a({tipo:"exito",texto:c?"Datos guardados correctamente":"Nuevo usuario creado"}))}catch(p){console.error(" Error Admin Sync:",p),a({tipo:"error",texto:p.message})}finally{v(!1)}},m=async u=>{if(t.length<=1){a({tipo:"error",texto:"No puedes eliminar al nico usuario del sistema"});return}if(u.id===(e==null?void 0:e.id)){a({tipo:"error",texto:"No puedes eliminarte a ti mismo."});return}window.confirm(`Seguro que deseas revocar el acceso a ${u.nombre_completo}?`)&&await n(u.id)};return e?s.jsxs("div",{className:"space-y-8 max-w-5xl mx-auto animate-in fade-in duration-500 pb-20",children:[s.jsxs("div",{className:"bg-white rounded-[2rem] md:rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100",children:[s.jsxs("div",{className:"px-4 py-4 bg-slate-900 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(js,{size:20,className:"text-red-500"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Mi Cuenta y Directorio"})]}),!o&&s.jsxs("button",{onClick:w,className:"px-3 md:px-4 py-2 bg-white text-slate-900 rounded-lg font-black uppercase tracking-widest text-[8px] md:text-[9px] hover:bg-red-600 hover:text-white transition-all shadow-md flex items-center gap-2 active:scale-95",children:[s.jsx(Ap,{size:14})," ",s.jsx("span",{className:"hidden xs:inline",children:"Nuevo"})]})]}),o?s.jsxs("div",{className:"p-6 md:p-8 animate-in slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 md:mb-8 pb-4 border-b border-gray-100",children:[s.jsx("h4",{className:"text-[10px] md:text-[11px] font-black text-slate-900 uppercase tracking-[0.2em] md:tracking-[0.3em]",children:c?`Edicin: ${c.nombre_completo}`:"Nuevo Registro de Colaborador"}),s.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-red-600 transition-all",children:s.jsx($t,{size:20})})]}),s.jsxs("form",{onSubmit:k,className:"space-y-6 md:space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8",children:[s.jsxs("div",{className:"space-y-4 md:space-y-5",children:[s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Nombre Completo"}),s.jsxs("div",{className:"relative",children:[s.jsx(Tr,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"text",value:h.nombre_completo,onChange:u=>x({...h,nombre_completo:u.target.value}),className:"w-full p-3.5 pl-12 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-xl transition-all font-bold outline-none text-sm",required:!0})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Puesto Corporativo"}),s.jsxs("div",{className:"relative",children:[s.jsx(rt,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"text",value:h.puesto,onChange:u=>x({...h,puesto:u.target.value}),className:"w-full p-3.5 pl-12 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-xl transition-all font-bold outline-none text-sm"})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest ml-1",children:"Telfono Directo"}),s.jsxs("div",{className:"relative",children:[s.jsx(Fa,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"tel",value:h.telefono,onChange:u=>x({...h,telefono:u.target.value}),className:"w-full p-3.5 pl-12 bg-gray-50 border border-transparent focus:border-red-500 focus:bg-white rounded-xl transition-all font-bold outline-none text-sm"})]})]})]}),s.jsxs("div",{className:"bg-slate-50 p-5 md:p-6 rounded-[1.5rem] md:rounded-[2rem] space-y-4 md:space-y-5 border border-slate-100",children:[s.jsxs("h5",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] flex items-center gap-2 mb-1",children:[s.jsx(al,{size:12,className:"text-red-500"})," Credenciales de Sistema"]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Email de Acceso"}),s.jsxs("div",{className:"relative",children:[s.jsx(hi,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"email",value:h.email,onChange:u=>x({...h,email:u.target.value}),disabled:c&&c.id!==e.id,className:"w-full p-3.5 pl-12 bg-white border border-gray-100 focus:border-red-500 rounded-xl transition-all font-bold outline-none text-sm disabled:opacity-60",required:!0})]})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1",children:(c==null?void 0:c.id)===(e==null?void 0:e.id)?"Cambiar Contrasea":"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(al,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-300",size:18}),s.jsx("input",{type:"password",value:h.newPassword,onChange:u=>x({...h,newPassword:u.target.value}),disabled:c&&c.id!==e.id,placeholder:(c==null?void 0:c.id)===(e==null?void 0:e.id)?"Mnimo 6 caracteres":"Restringido",className:"w-full p-3.5 pl-12 bg-white border border-gray-100 focus:border-red-500 rounded-xl transition-all font-bold outline-none text-sm disabled:opacity-60"})]})]}),(c==null?void 0:c.id)===(e==null?void 0:e.id)&&h.newPassword&&s.jsxs("div",{className:"space-y-1.5",children:[s.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Confirmar Password"}),s.jsx("input",{type:"password",value:h.confirmPassword,onChange:u=>x({...h,confirmPassword:u.target.value}),className:"w-full p-3.5 bg-white border border-gray-100 focus:border-red-500 rounded-xl transition-all font-bold outline-none text-sm"})]}),c&&c.id!==e.id&&s.jsxs("div",{className:"p-3 bg-slate-100/50 rounded-lg flex items-start gap-2",children:[s.jsx(jt,{size:14,className:"text-slate-400 mt-0.5"}),s.jsx("p",{className:"text-[8px] font-bold text-slate-400 uppercase leading-relaxed italic",children:"Las claves de acceso son privadas. Solo el titular puede modificarlas desde su propio panel."})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 pt-4 border-t border-gray-100",children:[s.jsxs("button",{type:"submit",disabled:f,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl font-black uppercase tracking-widest text-[9px] md:text-[10px] hover:bg-emerald-600 transition-all shadow-xl flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50",children:[f?s.jsx(At,{className:"animate-spin",size:16}):s.jsx(cr,{size:16}),c?"Aplicar y Sincronizar":"Vincular a Sistema"]}),s.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-6 md:px-8 py-4 bg-gray-50 text-slate-400 rounded-xl font-black uppercase tracking-widest text-[9px] md:text-[10px] hover:bg-gray-100 transition-all",children:"Cancelar"})]})]})]}):s.jsxs("div",{className:"w-full",children:[s.jsx("div",{className:"grid grid-cols-1 md:hidden divide-y divide-gray-100",children:t.map(u=>{var p;return s.jsxs("div",{className:`p-5 flex items-center justify-between gap-4 ${u.id===e.id?"bg-red-50/20":""}`,children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex-shrink-0 flex items-center justify-center font-black shadow-sm
                                            ${u.id===e.id?"bg-red-600 text-white":"bg-slate-100 text-slate-400"}`,children:(p=u.nombre_completo)==null?void 0:p.charAt(0).toUpperCase()}),s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("p",{className:"font-black text-slate-900 text-xs truncate uppercase tracking-tight",children:u.nombre_completo}),u.id===e.id&&s.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"})]}),s.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest truncate",children:u.puesto||"Colaborador"})]})]}),s.jsx("button",{onClick:()=>g(u),className:"p-3 bg-slate-50 text-slate-400 rounded-xl active:bg-slate-900 active:text-white transition-all",children:s.jsx(ar,{size:18})})]},u.id)})}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"bg-slate-50/50 border-b border-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Identidad"}),s.jsx("th",{className:"px-8 py-4 text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Contacto / Email"}),s.jsx("th",{className:"px-8 py-4 text-right text-[9px] font-black text-gray-400 uppercase tracking-widest",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-50",children:t.map(u=>{var p;return s.jsxs("tr",{className:`hover:bg-slate-50/30 transition-colors group ${u.id===e.id?"bg-red-50/10":""}`,children:[s.jsx("td",{className:"px-8 py-5",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black transition-all shadow-sm
                                                        ${u.id===e.id?"bg-red-600 text-white":"bg-slate-100 text-slate-400 group-hover:bg-slate-900 group-hover:text-white"}`,children:(p=u.nombre_completo)==null?void 0:p.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-black text-slate-900 text-sm truncate uppercase tracking-tight leading-none",children:u.nombre_completo}),u.id===e.id&&s.jsx("span",{className:"bg-emerald-50 text-emerald-600 text-[7px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest",children:"T (ADMIN)"})]}),s.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mt-1.5",children:u.puesto||"Colaborador"})]})]})}),s.jsxs("td",{className:"px-8 py-5",children:[s.jsx("p",{className:"text-xs font-bold text-slate-600 mb-1 leading-none",children:u.email}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-black text-slate-300 uppercase tracking-widest",children:[s.jsx(Fa,{size:10,className:"text-slate-200"}),u.telefono||"S/N"]})]}),s.jsx("td",{className:"px-8 py-5 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>g(u),className:"p-2 bg-gray-50 text-gray-400 hover:bg-slate-900 hover:text-white rounded-lg transition-all shadow-sm",title:"Editar",children:s.jsx(bb,{size:14})}),u.id!==e.id&&s.jsx("button",{onClick:()=>m(u),className:"p-2 bg-red-50 text-red-300 hover:bg-red-600 hover:text-white rounded-lg transition-all shadow-sm",title:"Eliminar",children:s.jsx(Nt,{size:14})})]})})]},u.id)})})]})})]})]}),s.jsx("p",{className:"text-center text-[7px] md:text-[8px] font-black text-gray-300 uppercase tracking-[0.4em] md:tracking-[0.6em] mt-8",children:"Infraestructura de Gestin Segura  Televisa MID 2025"})]}):s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl p-20 text-center border border-gray-100 max-w-2xl mx-auto flex flex-col items-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-red-600 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-gray-400 font-black uppercase text-[10px] tracking-widest",children:"Sincronizando perfiles..."})]})},Yb=({limpiarTabla:e,historial:t,clientes:r,masterContracts:n,metasComerciales:a,cobranza:i,setMensaje:o})=>{const[l,c]=P.useState(""),[d,h]=P.useState(!1),[x,f]=P.useState(null),v="TVSA_ADMIN_2025",g=m=>{m.preventDefault(),l===v?(h(!0),o({tipo:"exito",texto:"Acceso administrativo concedido."})):o({tipo:"error",texto:"Contrasea incorrecta."})},w=async m=>{if(d)try{switch(m){case"COTZ":await e("cotizaciones");break;case"CLIENTS":await e("clientes");break;case"MC":await e("master_contracts");break;case"GOALS":await e("metas_comerciales");break;case"BILLING":await e("cobranza");break;case"ALL":await e("cobranza"),await e("cotizaciones"),await e("condiciones_cliente"),await e("master_contracts"),await e("clientes"),await e("metas_comerciales");break;default:break}f(null)}catch(u){console.error("Error en limpieza:",u)}};if(!d)return s.jsxs("div",{className:"max-w-md mx-auto mt-24 p-10 bg-white rounded-[3rem] shadow-2xl border border-enterprise-100 text-center animate-premium-fade relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-brand-orange"}),s.jsx("div",{className:"w-20 h-20 bg-enterprise-50 text-brand-orange rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-inner",children:s.jsx(js,{size:40})}),s.jsx("h2",{className:"text-2xl font-black text-enterprise-950 uppercase italic italic-brand tracking-tighter mb-2",children:"Seguridad de Infraestructura"}),s.jsx("p",{className:"text-enterprise-400 text-[10px] font-black uppercase tracking-[0.2em] mb-10 leading-relaxed max-w-xs mx-auto",children:"Zona restringida para mantenimiento crtico. Ingrese la clave de autorizacin corporativa."}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsx("input",{type:"password",value:l,onChange:m=>c(m.target.value),placeholder:"TERMINAL CODE",className:"w-full bg-enterprise-50 border border-enterprise-100 p-5 rounded-2xl text-center font-black tracking-[0.8em] focus:ring-1 focus:ring-brand-orange/20 outline-none transition-all placeholder:tracking-normal placeholder:opacity-30 text-enterprise-950"}),s.jsx("button",{type:"submit",className:"w-full bg-enterprise-950 text-white font-black uppercase tracking-[0.3em] py-5 rounded-2xl hover:bg-brand-orange transition-all active:scale-95 shadow-xl shadow-enterprise-900/10 text-[10px]",children:"Validar Acceso"})]})]});const k=[{id:"COTZ",label:"Historial de Cotizaciones",desc:"Borra todas las propuestas (ganadas, perdidas, borradores).",count:(t==null?void 0:t.length)||0,icon:At,color:"blue"},{id:"MC",label:"Master Contracts",desc:"Vacia las bolsas de inversin de todos los clientes.",count:(n==null?void 0:n.length)||0,icon:Wd,color:"amber"},{id:"CLIENTS",label:"Catlogo de Clientes",desc:"Borra empresas y TODA su informacin vinculada (CASCADE).",count:(r==null?void 0:r.length)||0,icon:ks,color:"red"},{id:"GOALS",label:"Metas Comerciales",desc:"Vacia el histrico de metas mensuales.",count:(a==null?void 0:a.length)||0,icon:kn,color:"purple"},{id:"BILLING",label:"Control de Cobranza",desc:"Limpia el registro de facturas y pagos.",count:(i==null?void 0:i.length)||0,icon:Ke,color:"emerald"}];return s.jsxs("div",{className:"max-w-4xl mx-auto py-8 animate-premium-fade",children:[s.jsxs("div",{className:"bg-enterprise-950 p-6 rounded-2xl md:rounded-b-none flex flex-col md:flex-row justify-between items-center gap-4 transition-all duration-300 mb-8 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-orange/10 blur-[80px] -mr-32 -mt-32"}),s.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[s.jsx(Wd,{size:20,className:"text-brand-orange"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase italic italic-brand flex items-center gap-3 tracking-widest",children:"Mantenimiento Transaccional"})]}),s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 bg-brand-magenta/10 rounded-lg text-brand-magenta text-[9px] font-black uppercase tracking-[0.2em] border border-brand-magenta/20 relative z-10 shadow-lg",children:[s.jsx(il,{size:14})," Modo Depuracin"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[k.map(m=>s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-enterprise-100 shadow-sm flex items-center justify-between group hover:border-brand-orange/20 transition-all hover:shadow-xl",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center bg-enterprise-50 text-enterprise-950 group-hover:bg-enterprise-950 group-hover:text-white transition-all shadow-inner",children:s.jsx(m.icon,{size:24,className:"group-hover:text-brand-orange transition-colors"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-black text-enterprise-950 text-xs uppercase italic italic-brand tracking-widest",children:m.label}),s.jsx("p",{className:"text-[10px] font-bold text-enterprise-400 max-w-[180px] leading-tight mt-1",children:m.desc}),s.jsxs("span",{className:"inline-block mt-3 px-3 py-1 bg-enterprise-50 rounded-full text-[8px] font-black text-enterprise-500 uppercase tracking-widest shadow-sm",children:[m.count," registros vinculados"]})]})]}),s.jsx("button",{onClick:()=>f(m.id),className:"p-4 bg-enterprise-50 text-enterprise-300 hover:bg-brand-orange/10 hover:text-brand-orange rounded-2xl transition-all border border-transparent hover:border-brand-orange/20",children:s.jsx(Nt,{size:20})})]},m.id)),s.jsxs("button",{onClick:()=>f("ALL"),className:"md:col-span-2 bg-brand-magenta text-white p-10 rounded-[3rem] font-black uppercase tracking-[0.4em] flex flex-col items-center justify-center gap-4 hover:bg-enterprise-950 transition-all shadow-2xl shadow-brand-magenta/20 active:scale-[0.98] group",children:[s.jsx(il,{size:32,className:"group-hover:scale-110 transition-transform"}),s.jsx("span",{className:"text-[12px]",children:"Restablecimiento Global de Infraestructura"}),s.jsx("span",{className:"text-[8px] opacity-60 tracking-[0.1em] font-bold",children:"Resetea todas las tablas de produccin (Irreversible)"})]})]}),x&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center px-4 bg-enterprise-950/70 backdrop-blur-md animate-premium-fade",children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[4rem] p-12 text-center shadow-2xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-brand-magenta"}),s.jsx("div",{className:"w-24 h-24 bg-brand-magenta/5 text-brand-magenta rounded-[2.5rem] flex items-center justify-center mx-auto mb-8 animate-pulse shadow-inner border border-brand-magenta/10",children:s.jsx(Nt,{size:48})}),s.jsx("h2",{className:"text-2xl font-black text-enterprise-950 uppercase italic italic-brand tracking-tighter mb-4",children:"Confirmacin Final"}),s.jsxs("p",{className:"text-enterprise-400 text-[10px] font-black uppercase tracking-[0.2em] mb-10 leading-relaxed mx-auto max-w-[240px]",children:["Los datos sern purgados de forma permanente de la infraestructura. No existe mtodo de recuperacin.",s.jsx("span",{className:"block mt-2 text-brand-magenta",children:x==="ALL"?"RESET TOTAL DEL SISTEMA":`LIMPIEZA DE ${x}`})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("button",{onClick:()=>w(x),className:"w-full bg-brand-magenta text-white font-black uppercase tracking-[0.3em] py-5 rounded-2xl hover:bg-enterprise-950 transition-all shadow-xl shadow-brand-magenta/20 text-[10px]",children:"Confirmar Purgado de Datos"}),s.jsx("button",{onClick:()=>f(null),className:"w-full bg-enterprise-50 text-enterprise-400 font-black uppercase tracking-[0.3em] py-5 rounded-2xl hover:bg-enterprise-100 transition-all text-[10px]",children:"Cancelar Operacin"})]})]})})]})},Op=({clientes:e,productos:t,calcularPrecioUnitario:r})=>{const[n,a]=P.useState(""),[i,o]=P.useState(""),l=t.filter(d=>d.activo&&(d.canal.toLowerCase().includes(i.toLowerCase())||d.tipo.toLowerCase().includes(i.toLowerCase()))),c=e.find(d=>String(d.id)===String(n));return s.jsxs("div",{className:"space-y-6 animate-premium-fade pb-20",children:[s.jsxs("div",{className:"bg-enterprise-950 p-6 rounded-2xl md:rounded-b-none flex flex-col md:flex-row justify-between items-center gap-4 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-orange/10 blur-[80px] -mr-32 -mt-32"}),s.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[s.jsx(gs,{size:20,className:"text-brand-orange"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase italic italic-brand flex items-center gap-3 tracking-widest",children:"Tarifario Institucional"})]})]}),s.jsx("div",{className:"bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-enterprise-100 mb-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-end gap-6",children:[s.jsxs("div",{className:"w-full lg:w-1/2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-brand-orange uppercase tracking-[0.2em] block ml-1",children:"1. Seleccionar Cliente"}),s.jsxs("select",{value:n,onChange:d=>a(d.target.value),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl focus:ring-1 focus:ring-brand-orange/20 font-bold text-sm text-enterprise-950 outline-none appearance-none truncate shadow-sm",children:[s.jsx("option",{value:"",children:"Elegir empresa..."}),e.map(d=>s.jsx("option",{value:d.id,children:d.nombre_empresa},d.id))]})]}),s.jsxs("div",{className:"w-full lg:w-1/2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.2em] block ml-1",children:"2. Filtrar Portafolio"}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"text",value:i,onChange:d=>o(d.target.value),placeholder:"Canal, programa o tipo de pauta...",className:"w-full p-4 pl-12 bg-enterprise-50 border border-enterprise-100 rounded-2xl focus:ring-1 focus:ring-brand-orange/20 font-bold text-sm text-enterprise-950 outline-none placeholder:text-enterprise-300 transition-all"}),s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-400 group-focus-within:text-brand-orange transition-colors",size:18})]})]})]})}),n?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-enterprise-950 p-8 rounded-[3rem] shadow-2xl flex flex-col md:flex-row justify-between items-center gap-6 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-orange/5 blur-3xl"}),s.jsxs("div",{className:"flex items-center gap-6 relative z-10",children:[s.jsx("div",{className:"w-16 h-16 bg-brand-orange rounded-2xl flex items-center justify-center text-white shadow-xl shadow-brand-orange/20",children:s.jsx(Ua,{size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-white uppercase italic italic-brand tracking-tighter leading-tight",children:c==null?void 0:c.nombre_empresa}),s.jsxs("p",{className:"text-brand-orange font-black text-[10px] uppercase tracking-[0.3em] mt-1",children:[c==null?void 0:c.segmento," | ",c==null?void 0:c.plaza]})]})]}),s.jsxs("button",{onClick:()=>alert("Prximamente: Lista en PDF"),className:"w-full md:w-auto px-8 py-4 bg-white/5 text-white border border-white/10 rounded-2xl flex items-center justify-center gap-3 font-black uppercase tracking-widest text-[10px] hover:bg-brand-orange transition-all shadow-xl",children:[s.jsx(Cp,{size:16})," Descargar Tarifario"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:l.map(d=>{const h=r?r(d.id,n):d.costo_base,x=(d.costo_base||0)-(h||0),f=x>0?x/d.costo_base*100:0;return s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-lg border border-enterprise-100 hover:border-brand-orange/30 transition-all duration-300 group relative overflow-hidden flex flex-col h-full hover:shadow-2xl",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest",children:d.canal}),s.jsx("h4",{className:"text-xl font-black text-enterprise-950 uppercase italic italic-brand leading-tight tracking-tighter group-hover:text-brand-orange transition-colors",children:d.tipo})]}),s.jsx("div",{className:"flex flex-col items-end gap-1",children:s.jsxs("span",{className:"flex items-center gap-2 text-[9px] font-black text-enterprise-500 bg-enterprise-50 border border-enterprise-100 px-3 py-1 rounded-full uppercase tracking-widest shadow-sm",children:[s.jsx(ws,{size:12})," ",d.plaza]})})]}),s.jsxs("div",{className:"bg-enterprise-50 p-6 rounded-3xl mb-6 space-y-4 flex-1",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:"Precio Lista"}),s.jsx("span",{className:"text-xs font-bold text-enterprise-300 line-through",children:M(d.costo_base)})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-enterprise-100",children:[s.jsxs("span",{className:"text-[9px] font-black text-enterprise-950 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(gs,{size:12,className:"text-brand-orange"})," Tarifa Neta"]}),s.jsx("span",{className:"text-2xl font-black text-brand-orange tracking-tighter",children:M(h)})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:[d.horario," | ",d.duracion]}),x>0&&s.jsxs("div",{className:"flex items-center gap-1 text-emerald-600 font-black text-[11px] uppercase tracking-tighter bg-emerald-50 px-3 py-1 rounded-full shadow-sm",children:[s.jsx(Sp,{size:14})," -",f.toFixed(0),"%"]})]})]},d.id)})})]}):s.jsxs("div",{className:"py-40 text-center bg-white rounded-[4rem] border-2 border-dashed border-enterprise-100 animate-premium-fade shadow-sm",children:[s.jsx(at,{className:"mx-auto text-enterprise-100 mb-8",size:80}),s.jsx("p",{className:"text-enterprise-400 font-black uppercase text-[10px] tracking-[0.3em] max-w-md mx-auto leading-relaxed",children:"Selecciona un cliente para visualizar su portafolio de productos y tarifas institucionales personalizadas."})]})]})},Zb=({setVistaActual:e,mensajeAdmin:t,setMensajeAdmin:r,guardarRegistro:n,eliminarRegistro:a,clientes:i,productos:o,condicionesCliente:l,configuracion:c,cobranza:d,metasComerciales:h,perfil:x,perfiles:f,limpiarTabla:v,historial:g,masterContracts:w,calcularPrecioUnitario:k,onLogout:m})=>{const[u,p]=P.useState("clientes"),[j,_]=P.useState(null),[b,y]=P.useState(!1),N=[{id:"clientes",label:"Clientes",icon:ks},{id:"tarifas",label:"Especiales",icon:gs},{id:"catalogo",label:"Catlogo",icon:Jv},{id:"tarifario",label:"Tarifario",icon:Ep},{id:"metas",label:"Metas",icon:kn},{id:"cobranza",label:"Cobranza",icon:Ke},{id:"config",label:"Config",icon:pb},{id:"mantenimiento",label:"Limpieza",icon:Ob},{id:"cuenta",label:"Mi Cuenta",icon:nl}],S=O=>{_(O),y(!0)},T=()=>{_(null),y(!0)};return s.jsxs("div",{className:"min-h-screen bg-enterprise-50 pb-20 animate-premium-fade",children:[s.jsxs("div",{className:"bg-enterprise-950 pt-10 pb-36 px-4 md:px-8 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-brand-orange/10 blur-[100px] -mr-48 -mt-48"}),s.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-brand-orange rounded-xl flex items-center justify-center text-white shadow-lg shadow-brand-orange/20",children:s.jsx(Va,{size:20})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-sm font-black text-white uppercase italic italic-brand tracking-[0.3em]",children:"Central de Operaciones"}),s.jsx("p",{className:"text-[9px] font-bold text-enterprise-400 uppercase tracking-widest mt-0.5",children:"Premium Management Suite"})]})]})}),s.jsxs("button",{onClick:()=>e("dashboard"),className:"w-full md:w-auto h-14 px-8 bg-white/5 border border-white/10 text-white rounded-2xl font-black uppercase tracking-widest hover:bg-brand-orange transition-all shadow-xl active:scale-95 text-[10px] flex items-center justify-center gap-3",children:[s.jsx(nl,{size:18}),"Terminal Directiva"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-9 gap-3 mt-10",children:N.map(O=>s.jsxs("button",{onClick:()=>p(O.id),className:`
                                    flex items-center justify-center gap-3 px-4 py-3 rounded-2xl font-black uppercase italic italic-brand tracking-widest text-[9px] transition-all
                                    ${u===O.id?"bg-brand-orange text-white shadow-xl shadow-brand-orange/40 scale-105 z-10":"bg-enterprise-900/50 text-enterprise-400 hover:text-white hover:bg-enterprise-900 border border-white/5"}
                                `,children:[s.jsx(O.icon,{size:14,className:u===O.id?"text-white":"text-brand-orange"}),O.label]},O.id))})]})]}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 -mt-24 relative z-20",children:[s.jsxs("div",{className:"bg-enterprise-50 rounded-[3rem] p-6 md:p-10 shadow-2xl border border-white/20 animate-in slide-in-from-bottom-4 duration-500 min-h-[600px]",children:[u==="clientes"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx(qb,{clientes:i,onToggleEstatus:O=>n("clientes",O),onEliminar:O=>a("clientes","id",O),onEdit:S,onNew:T,setMensaje:r}),b&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 md:p-8",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>y(!1)}),s.jsx("div",{className:"relative w-full max-w-5xl max-h-[90vh] overflow-y-auto animate-in zoom-in-95 duration-200",children:s.jsx(Gb,{onSave:async(O,C)=>{const L=await n(O,C);return L&&y(!1),L},setMensaje:r,clienteEdicion:j,onCancel:()=>y(!1)})})]})]}),u==="tarifas"&&s.jsx(Kb,{clientes:i,productos:o,condicionesCliente:l,onSave:n,setMensaje:r}),u==="catalogo"&&s.jsx(Xb,{productos:o,onSave:n,setMensaje:r}),u==="config"&&s.jsx(Jb,{configuracion:c,onSave:n,setMensaje:r}),u==="metas"&&s.jsx(Hb,{metas:h,onSaveGoal:O=>n("metas_comerciales",O),onRemoveGoal:O=>a("metas_comerciales","id",O)}),u==="tarifario"&&s.jsx(Op,{productos:o,clientes:i,setVistaActual:e,calcularPrecioUnitario:k}),u==="cobranza"&&s.jsx(Rp,{cobranza:d,clientes:i,onSave:n,setMensaje:r}),u==="mantenimiento"&&s.jsx(Yb,{limpiarTabla:v,historial:g,clientes:i,masterContracts:w,metasComerciales:h,cobranza:d,setMensaje:r}),u==="cuenta"&&s.jsx(Qb,{perfil:x,perfiles:f,onSave:n,onEliminar:O=>a("perfiles","id",O),setMensaje:r,onLogout:m})]}),s.jsxs("div",{className:"mt-24 text-center pb-10",children:[s.jsx("p",{className:"text-[10px] font-black text-enterprise-300 uppercase tracking-[0.5em] opacity-60",children:"Televisa MID Admin Layer  Enterprise Deployment v2.0"}),s.jsx("p",{className:"text-[8px] font-bold text-enterprise-200 uppercase tracking-[0.3em] mt-2 italic italic-brand",children:"High-Performance Media Budgeting Engine"})]})]})]})},ey=({setVistaActual:e,historial:t=[],setCotizacion:r,agregarAComparador:n,mostrarPropuesta:a,eliminarCotizacion:i,onSaveQuote:o,setMensaje:l,masterContracts:c=[]})=>{const[d,h]=P.useState(""),[x,f]=P.useState("todos"),[v,g]=P.useState(null),[w,k]=P.useState(!1),[m,u]=P.useState({numero_contrato:"",mc_id:"",fecha_registro_sistema:"",folio_sistema:""}),p=(b,y)=>{g({quote:b,status:y}),y==="ganada"&&u({numero_contrato:b.numero_contrato||"",mc_id:b.mc_id||"",fecha_registro_sistema:b.fecha_registro_sistema||"",folio_sistema:b.folio_sistema||""})},j=P.useMemo(()=>(t||[]).filter(b=>{var L,B,R;const y=(((L=b.cliente)==null?void 0:L.nombre_empresa)||"").toLowerCase(),N=(b.id||"").toLowerCase(),S=(((B=b.cliente)==null?void 0:B.plaza)||"").toLowerCase(),T=d.toLowerCase(),O=y.includes(T)||N.includes(T)||S.includes(T),C=x==="todos"||x==="vix"&&((R=b.paqueteVIX)==null?void 0:R.nombre)!=="Ninguno"||x==="no_vix"&&(!b.paqueteVIX||b.paqueteVIX.nombre==="Ninguno");return O&&C}),[t,d,x]),_=async(b,y)=>{var N;if(y==="ganada"&&!m.numero_contrato){l({tipo:"error",texto:"El nmero de contrato es obligatorio."});return}k(!0);try{const S={id:b.id,estatus:y};y==="ganada"&&(S.numero_contrato=parseInt(m.numero_contrato),S.mc_id=m.mc_id||null,S.fecha_registro_sistema=m.fecha_registro_sistema||null,S.folio_sistema=m.folio_sistema||null,S.fecha_cierre_real=b.fecha_cierre_real||new Date().toISOString()),await o("cotizaciones",S)&&(l({tipo:"exito",texto:`Estatus actualizado: ${y.toUpperCase()}`}),y==="ganada"&&await o("cobranza",{cotizacion_id:b.id,monto_facturado:b.subtotalGeneral||((N=b.data)==null?void 0:N.total)/1.16||b.total/1.16,estatus_pago:"pendiente",notas:`Contrato: ${m.numero_contrato}`}),g(null),u({numero_contrato:"",mc_id:"",fecha_registro_sistema:"",folio_sistema:""}))}catch(S){console.error(S)}finally{k(!1)}};return s.jsxs("div",{className:"space-y-6 animate-premium-fade",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-2",children:[s.jsx("button",{onClick:()=>e("cotizador"),className:"p-2 sm:p-2.5 bg-white rounded-2xl shadow-premium border border-enterprise-100 text-enterprise-400 hover:text-brand-orange transition-all active:scale-90",children:s.jsx(Np,{size:window.innerWidth<640?16:20})}),s.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-black text-enterprise-950 tracking-tight leading-none uppercase italic italic-brand",children:["Historical ",s.jsx("span",{className:"text-brand-orange not-italic",children:"Records"})]})]}),s.jsx("p",{className:"text-[9px] sm:text-[10px] font-bold text-enterprise-500 uppercase tracking-widest ml-12 sm:ml-14",children:"Master Database / Commercial Activity"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-white p-3 rounded-2xl shadow-premium border border-enterprise-100 w-full md:w-auto",children:[s.jsxs("div",{className:"relative flex-1 md:w-64",children:[s.jsx("input",{type:"text",placeholder:"Buscar Cliente o ID...",value:d,onChange:b=>h(b.target.value),className:"w-full h-11 bg-enterprise-50 border border-enterprise-100 rounded-xl pl-10 pr-4 text-xs font-bold focus:border-brand-orange outline-none transition-all"}),s.jsx(at,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-enterprise-400",size:16})]}),s.jsxs("select",{value:x,onChange:b=>f(b.target.value),className:"h-11 bg-enterprise-50 border border-enterprise-100 rounded-xl px-4 text-[10px] font-black uppercase tracking-widest outline-none transition-all cursor-pointer",children:[s.jsx("option",{value:"todos",children:"Todos los Escenarios"}),s.jsx("option",{value:"vix",children:"Plan Digital VIX"}),s.jsx("option",{value:"no_vix",children:"Televisin Abierta"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-premium border border-enterprise-100 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-enterprise-950 text-white border-b border-white/5",children:[s.jsx("th",{className:"px-6 py-5 text-left text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Timeline"}),s.jsx("th",{className:"px-6 py-5 text-left text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Entidad Legal / Referencia"}),s.jsx("th",{className:"px-6 py-5 text-center text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Fase Comercial"}),s.jsx("th",{className:"px-6 py-5 text-center text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Carga"}),s.jsx("th",{className:"px-6 py-5 text-right text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Valor Neto"}),s.jsx("th",{className:"px-6 py-5 text-center text-[10px] font-black uppercase tracking-[0.2em] opacity-60",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-enterprise-50",children:j.length>0?j.map(b=>{var y;return s.jsxs("tr",{className:"group hover:bg-enterprise-50/50 transition-all duration-300",children:[s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-enterprise-100 flex flex-col items-center justify-center",children:s.jsx(ov,{size:16,className:"text-enterprise-400"})}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-xs font-black text-enterprise-900 leading-none mb-1",children:b.fecha instanceof Date&&!isNaN(b.fecha)?b.fecha.toLocaleDateString("es-MX"):"-- / --"}),s.jsx("span",{className:"text-[10px] font-bold text-enterprise-400 uppercase tracking-tighter",children:"Sincronizado"})]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{children:[s.jsx("span",{className:"block text-sm font-black text-enterprise-950 uppercase truncate max-w-[200px] mb-1",children:((y=b.cliente)==null?void 0:y.nombre_empresa)||"Cliente S/N"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[9px] font-black text-brand-orange uppercase tracking-widest",children:b.folio||b.id.slice(0,8)}),b.numero_contrato&&s.jsxs("span",{className:"px-1.5 py-0.5 bg-emerald-50 text-emerald-600 text-[8px] font-black rounded uppercase",children:["CT: ",b.numero_contrato]})]})]})}),s.jsx("td",{className:"px-6 py-5",children:s.jsx("div",{className:"flex justify-center gap-1.5",children:["enviada","ganada","perdida"].map(N=>s.jsx("button",{onClick:()=>p(b,N),className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest transition-all ${b.estatus===N?N==="ganada"?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":N==="perdida"?"bg-brand-magenta text-white shadow-lg shadow-brand-magenta/20":"bg-enterprise-950 text-white shadow-lg shadow-enterprise-950/20":"bg-enterprise-100 text-enterprise-400 hover:bg-enterprise-200"}`,children:N},N))})}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsxs("span",{className:"w-8 h-8 rounded-lg bg-enterprise-50 flex items-center justify-center text-[10px] font-black text-enterprise-600",title:"Productos",children:[b.items.length,"P"]}),b.paqueteVIX&&s.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-orange animate-pulse",title:"Digital Activo"})]})}),s.jsx("td",{className:"px-6 py-5 text-right font-black text-enterprise-900 tracking-tight",children:M(b.subtotalGeneral||(b.monto_total||b.total)/1.16)}),s.jsx("td",{className:"px-6 py-5",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{onClick:()=>{r(b),e("cotizador")},className:"w-9 h-9 flex items-center justify-center bg-enterprise-50 text-enterprise-400 hover:bg-enterprise-900 hover:text-white rounded-xl transition-all",title:"Revisar Parmetros",children:s.jsx(Ep,{size:16})}),s.jsx("button",{onClick:()=>a(b),className:"w-9 h-9 flex items-center justify-center bg-enterprise-50 text-enterprise-500 hover:bg-brand-orange hover:text-white rounded-xl transition-all",title:"Generar Exportable",children:s.jsx(Pn,{size:16})}),s.jsx("button",{onClick:()=>{window.confirm("Eliminar registro?")&&i(b.id)},className:"w-9 h-9 flex items-center justify-center bg-enterprise-50 text-enterprise-500 hover:bg-brand-orange/10 hover:text-brand-orange rounded-xl transition-all",title:"Archivar",children:s.jsx(Nt,{size:16})})]})})]},b.id)}):s.jsx("tr",{children:s.jsxs("td",{colSpan:"6",className:"py-20 text-center",children:[s.jsx("div",{className:"bg-enterprise-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-enterprise-200",children:s.jsx(at,{size:32})}),s.jsx("h3",{className:"text-lg font-black text-enterprise-900 uppercase",children:"Sin Actividad Estratgica"}),s.jsx("p",{className:"text-xs text-enterprise-400 font-bold uppercase tracking-widest mt-1 italic",children:"Realiza una consulta diferente"})]})})})]})}),s.jsxs("div",{className:"bg-enterprise-50 p-6 border-t border-enterprise-100 flex items-center justify-between",children:[s.jsxs("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest",children:["Mostrando ",j.length," de ",t.length," transacciones registradas."]}),s.jsx("div",{className:"flex gap-2 text-enterprise-300",children:s.jsx(Nv,{size:20})})]})]}),v&&s.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-enterprise-950/80 backdrop-blur-md animate-premium-fade",children:s.jsxs("div",{className:"bg-white w-full max-w-md rounded-[3rem] p-10 shadow-2xl relative overflow-hidden border border-enterprise-100",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-brand-orange"}),s.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[s.jsx("div",{className:"w-14 h-14 bg-brand-orange/10 rounded-[1.5rem] flex items-center justify-center text-brand-orange",children:s.jsx(rv,{size:28})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black text-enterprise-900 uppercase leading-none mb-1",children:"Protocolo de Cierre"}),s.jsx("p",{className:"text-[10px] font-bold text-enterprise-400 uppercase tracking-widest",children:"Validacin de Estatus Comercial"})]})]}),v.status==="ganada"?s.jsxs("div",{className:"space-y-6 mb-8",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Referencia Contrato SAP/MID"}),s.jsx("input",{type:"number",value:m.numero_contrato,onChange:b=>u({...m,numero_contrato:b.target.value}),className:"premium-input text-lg py-4 h-16",placeholder:"Ej: 994021"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Folio Sistema"}),s.jsx("input",{type:"text",value:m.folio_sistema,onChange:b=>u({...m,folio_sistema:b.target.value}),className:"premium-input text-xs",placeholder:"CP-XXXX"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-1",children:"Fecha Registro"}),s.jsx("input",{type:"date",value:m.fecha_registro_sistema,onChange:b=>u({...m,fecha_registro_sistema:b.target.value}),className:"premium-input text-xs"})]})]})]}):s.jsxs("div",{className:"p-6 bg-enterprise-50 rounded-2xl mb-8 border border-enterprise-100 flex items-center gap-4",children:[s.jsx(jt,{size:24,className:"text-brand-orange"}),s.jsxs("p",{className:"text-xs font-bold text-enterprise-700 uppercase tracking-widest leading-relaxed",children:["Confirma el cambio a ",v.status.toUpperCase(),". Esto archivar el registro en la fase correspondiente."]})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("button",{onClick:()=>_(v.quote,v.status),className:"w-full h-14 bg-brand-orange text-white rounded-2xl font-black uppercase tracking-widest text-xs flex items-center justify-center gap-3 shadow-xl shadow-brand-orange/20 hover:bg-brand-magenta hover:shadow-brand-magenta/40 hover:-translate-y-1 active:scale-[0.98] transition-all duration-300",children:w?s.jsx(At,{className:"animate-spin",size:18}):s.jsx("span",{children:"Confirmar Operacin"})}),s.jsx("button",{onClick:()=>g(null),className:"w-full h-12 text-[10px] font-black uppercase tracking-widest text-enterprise-400 hover:text-enterprise-600 transition-colors",children:"Regresar"})]})]})})]})},ty=({setVistaActual:e,comparar:t,setComparar:r,mostrarPropuesta:n})=>{const a=i=>{r(o=>o.filter(l=>l.id!==i))};return s.jsx("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8 animate-in fade-in duration-500",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border-b-8 border-gray-800",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("button",{onClick:()=>e("cotizador"),className:"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition-all",children:s.jsx(Np,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-black text-gray-800 tracking-tight",children:"Comparador de Escenarios"}),s.jsx("p",{className:"text-gray-400 font-bold uppercase text-[10px] tracking-widest mt-1",children:"Anlisis de rendimiento y costos"})]})]}),t.length>0&&s.jsxs("button",{onClick:()=>r([]),className:"flex items-center gap-2 text-red-600 font-black uppercase text-[10px] tracking-widest hover:text-red-700 transition-all",children:[s.jsx(Nt,{size:16})," Limpiar todo"]})]})}),t.length===0?s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-20 text-center border border-gray-100",children:[s.jsx("div",{className:"bg-gray-50 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx(kt,{size:40,className:"text-gray-300"})}),s.jsx("h2",{className:"text-2xl font-black text-gray-800 mb-2",children:"No hay escenarios seleccionados"}),s.jsx("p",{className:"text-gray-400 font-medium max-w-sm mx-auto",children:'Selecciona "Comparar" desde el historial o despus de generar una cotizacin para ver las diferencias.'})]}):s.jsx("div",{className:"overflow-x-auto pb-8",children:s.jsx("div",{className:"flex gap-6 min-w-max",children:t.map(i=>s.jsxs("div",{className:"w-80 bg-white rounded-3xl shadow-2xl border-2 border-transparent hover:border-red-500 transition-all duration-300 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:()=>a(i.id),className:"bg-white/80 backdrop-blur shadow-md p-2 rounded-full text-red-600 hover:bg-red-600 hover:text-white transition-all",children:s.jsx(Nt,{size:16})})}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-1",children:"Escenario"}),s.jsx("h3",{className:"text-xl font-black text-gray-800 leading-tight",children:i.cliente.nombre}),s.jsxs("p",{className:"text-xs font-bold text-red-600 mt-1",children:[i.items.length," Productos | ",i.paqueteVIX?"VIX ON":"VIX OFF"]})]}),s.jsxs("div",{className:"space-y-4 py-6 border-y border-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Inversin Bruta"}),s.jsx("span",{className:"font-bold text-gray-800",children:M(i.subtotalGeneral)})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Unidades Totales"}),s.jsx("span",{className:"font-black text-gray-800",children:i.distribucion.reduce((o,l)=>o+l.totalUnidades,0)})]}),s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"Duracin"}),s.jsxs("span",{className:"font-black text-gray-800",children:[i.diasCampana," DAS"]})]})]}),s.jsxs("div",{className:"py-8 text-center",children:[s.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1",children:"Total Final con IVA"}),s.jsx("p",{className:"text-3xl font-black text-red-700",children:M(i.total)})]}),s.jsx("div",{className:"space-y-3",children:s.jsxs("button",{onClick:()=>n(i),className:"w-full h-12 bg-red-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs hover:bg-red-700 transition-all shadow-lg active:scale-95 flex items-center justify-center gap-2",children:[s.jsx(Pn,{size:16})," Imprimir Escenario"]})})]}),s.jsxs("div",{className:"bg-gray-50 p-6",children:[s.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3",children:"Distribucin"}),s.jsxs("div",{className:"space-y-2",children:[i.distribucion.slice(0,3).map((o,l)=>s.jsxs("div",{className:"flex justify-between items-center text-[11px] font-bold",children:[s.jsx("span",{className:"text-gray-600 truncate mr-2",children:o.producto.tipo}),s.jsx("span",{className:"bg-gray-200 px-1.5 rounded text-gray-800",children:o.totalUnidades})]},l)),i.distribucion.length>3&&s.jsxs("p",{className:"text-[9px] font-black text-gray-300 text-center uppercase mt-2",children:["+",i.distribucion.length-3," productos ms"]})]})]})]},i.id))})})]})})},ea=({title:e,value:t,icon:r,colorClass:n,isCurrency:a=!1,trend:i=null})=>s.jsxs("div",{className:"bg-white p-5 sm:p-7 rounded-[2rem] sm:rounded-[2.5rem] shadow-premium-hover border border-enterprise-100 flex items-start gap-4 sm:gap-6 transition-all hover:shadow-2xl hover:-translate-y-1 group animate-premium-fade min-w-0",children:[s.jsx("div",{className:`p-3 sm:p-4 rounded-xl sm:rounded-2xl ${n} flex-shrink-0 transition-transform group-hover:rotate-12 duration-500`,children:s.jsx(r,{size:window.innerWidth<640?20:24})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-[9px] sm:text-[10px] font-black text-enterprise-500 uppercase tracking-widest mb-1 sm:mb-1.5 truncate",children:e}),s.jsx("h3",{className:"text-2xl sm:text-3xl font-black text-enterprise-950 tracking-tighter leading-none mb-1 sm:mb-2 truncate",children:a?M(t,0):t}),i&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsxs("div",{className:"flex items-center gap-0.5 bg-emerald-50 text-emerald-600 px-1.5 sm:px-2 py-0.5 rounded-full border border-emerald-100",children:[s.jsx(Sp,{size:10,strokeWidth:3}),s.jsxs("span",{className:"text-[8px] sm:text-[9px] font-black uppercase tracking-tighter",children:["+",i,"%"]})]}),s.jsx("span",{className:"text-[8px] sm:text-[9px] font-bold text-enterprise-500 uppercase tracking-widest",children:"Vs Last Period"})]})]})]}),qd=({historial:e=[],clientes:t=[],cobranza:r=[],metasComerciales:n=[],setVistaActual:a,actualizarDashboard:i,iniciarNuevaCotizacion:o})=>{const[l,c]=P.useState("mes"),[d,h]=P.useState(!1),x=async()=>{h(!0),await(i==null?void 0:i()),setTimeout(()=>h(!1),800)},f=P.useMemo(()=>{var N;const v=new Date,g=new Date;l==="mes"?g.setDate(1):g.setMonth(0,1),g.setHours(0,0,0,0);const w=e.filter(S=>{const T=S.fecha_cierre_real||S.fecha;if(!T)return!1;const O=new Date(T);return O>=g&&O<=v}),k=w.filter(S=>S.estatus==="ganada"),m=w.filter(S=>S.estatus!=="ganada"&&S.estatus!=="perdida"),u=k.reduce((S,T)=>S+(parseFloat(T.subtotalGeneral||T.total/1.16)||0),0),p=m.reduce((S,T)=>S+(parseFloat(T.subtotalGeneral||T.total/1.16)||0),0),j=v.getMonth()+1,_=((N=n.find(S=>Number(S.mes)===j))==null?void 0:N.monto_meta)||15e5,b=Math.round(u/_*100),y=r.filter(S=>S.estatus_pago==="cobrado").reduce((S,T)=>S+(parseFloat(T.monto_facturado)||0),0);return{totalVenta:u,valorPipeline:p,cumplimiento:b,meta:_,totalCobrado:y,countLeads:t.filter(S=>new Date(S.created_at)>=g).length}},[e,t,l,n,r]);return s.jsxs("div",{className:"space-y-12 animate-premium-fade pb-20",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 sm:gap-10 border-b border-enterprise-100 pb-8 sm:pb-12 text-balance",children:[s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"inline-flex items-center gap-2.5 px-3 py-1.5 bg-[#111111] text-white rounded-full shadow-lg",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),s.jsx("span",{className:"text-[8px] sm:text-[9px] font-black uppercase tracking-widest leading-none",children:"Global Sync Active"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-black text-enterprise-950 tracking-tighter leading-none uppercase italic",children:["Commercial ",s.jsx("span",{className:"text-[#FF5900] not-italic",children:"Intelligence"})]}),s.jsx("p",{className:"text-[10px] sm:text-[11px] font-bold text-enterprise-600 max-w-xl",children:"Performance control panel for TelevisaUnivision Mxico."})]})]}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"flex bg-white p-1.5 rounded-[1.5rem] border border-enterprise-100 shadow-xl overflow-hidden",children:["mes","anio"].map(v=>s.jsx("button",{onClick:()=>c(v),className:`px-4 sm:px-8 h-10 sm:h-12 rounded-xl text-[9px] sm:text-[10px] font-black uppercase tracking-widest transition-all
                                    ${l===v?"bg-enterprise-950 text-white shadow-xl":"text-enterprise-500 hover:text-enterprise-950 hover:bg-enterprise-50"}`,children:v==="mes"?"Este Mes":"Ao Fiscal"},v))}),s.jsx("button",{onClick:x,className:"w-14 h-14 bg-white text-enterprise-950 border border-enterprise-100 rounded-[1.25rem] flex items-center justify-center hover:bg-enterprise-950 hover:text-white hover:shadow-2xl transition-all active:scale-90 shadow-xl group",children:s.jsx(At,{size:22,className:`${d?"animate-spin":"group-hover:rotate-180 transition-transform duration-500"}`})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsx(ea,{title:"Venta Realizada",value:f.totalVenta,isCurrency:!0,icon:Ke,colorClass:"bg-[#FF5900] text-white",trend:"24.1"}),s.jsx(ea,{title:"Cobranza Liquidada",value:f.totalCobrado,isCurrency:!0,icon:rr,colorClass:"bg-[#059669] text-white"}),s.jsx(ea,{title:"Pipeline Reservado",value:f.valorPipeline,isCurrency:!0,icon:wn,colorClass:"bg-[#111111] text-white"}),s.jsx(ea,{title:"Captacin Mensual",value:f.countLeads,icon:ks,colorClass:"bg-enterprise-100 text-enterprise-900 border border-enterprise-200"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-10",children:[s.jsx("div",{className:"lg:col-span-8",children:s.jsxs("div",{className:"bg-[#111111] p-6 sm:p-12 rounded-[2.5rem] sm:rounded-[3.5rem] text-white relative overflow-hidden shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-[#FF5900] opacity-10 blur-[100px] -mr-40 -mt-40"}),s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-8 sm:gap-12 relative z-10",children:[s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs("span",{className:"text-[10px] sm:text-[11px] font-black text-[#FF5900] uppercase tracking-widest flex items-center gap-3",children:[s.jsx(kn,{size:16})," KPI Status: High Performance"]}),s.jsxs("div",{className:"space-y-1 sm:space-y-2",children:[s.jsxs("h2",{className:"text-5xl sm:text-6xl lg:text-7xl font-black tracking-tighter leading-none",children:[f.cumplimiento,"%"]}),s.jsx("p",{className:"text-[9px] sm:text-[10px] font-bold text-white/70 uppercase tracking-widest italic leading-none",children:"Operational Goal Fulfillment"})]})]}),s.jsxs("div",{className:"bg-white/5 border border-white/10 p-5 sm:p-8 rounded-3xl sm:rounded-[2.5rem] backdrop-blur-md w-full md:w-auto",children:[s.jsx("span",{className:"block text-[9px] sm:text-[10px] font-black text-white/50 uppercase tracking-widest mb-1 sm:mb-2 text-left md:text-right",children:"Target Amount"}),s.jsx("span",{className:"text-2xl sm:text-4xl font-black tracking-tight",children:M(f.meta,0)}),s.jsxs("div",{className:"flex items-center justify-start md:justify-end gap-2 mt-2 sm:mt-3 text-[#34d399]",children:[s.jsx(Pp,{size:14,"sm:size":16}),s.jsx("span",{className:"text-[9px] sm:text-[10px] font-black uppercase tracking-widest",children:"Optimized Track"})]})]})]}),s.jsxs("div",{className:"mt-10 sm:mt-20 space-y-6 sm:space-y-8 relative z-10",children:[s.jsx("div",{className:"h-6 sm:h-8 bg-white/5 rounded-full p-1.5 sm:p-2 border border-white/10",children:s.jsx("div",{className:"h-full bg-brand-orange rounded-full shadow-brand shadow-2xl transition-all duration-1000 ease-out flex items-center justify-end pr-3 overflow-hidden",style:{width:`${Math.min(f.cumplimiento,100)}%`},children:f.cumplimiento>5&&s.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white rounded-full animate-pulse"})})}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-white/50 uppercase tracking-widest",children:"Current Revenue"}),s.jsx("span",{className:"text-base sm:text-lg font-black",children:M(f.totalVenta,0)})]}),s.jsx("div",{className:"w-px h-8 sm:h-10 bg-white/10"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-black text-white/50 uppercase tracking-widest text-brand-orange",children:"Shortfall (Gap)"}),s.jsx("span",{className:"text-base sm:text-lg font-black text-brand-orange/90",children:M(Math.max(0,f.meta-f.totalVenta),0)})]})]}),s.jsxs("div",{className:"text-[10px] sm:text-[11px] font-black uppercase tracking-widest flex items-center gap-3 text-white/60 hover:text-white transition-colors cursor-pointer",children:["Full Audit Report ",s.jsx(ar,{size:16})]})]})]})]})}),s.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[s.jsx("button",{onClick:o,className:"w-full group bg-univision-gradient p-[2px] rounded-[2.5rem] shadow-2xl shadow-orange-500/20 transition-all hover:scale-[1.02] active:scale-[0.98]",children:s.jsxs("div",{className:"bg-[#111111] p-10 rounded-[2.4rem] flex items-center justify-between text-white overflow-hidden relative",children:[s.jsxs("div",{className:"relative z-10 flex flex-col items-start gap-6",children:[s.jsx("div",{className:"w-14 h-14 bg-white/10 rounded-2xl flex items-center justify-center group-hover:bg-[#FF5900] group-hover:text-white transition-all shadow-md",children:s.jsx(pi,{size:24,className:"fill-current"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"block text-[11px] font-black uppercase tracking-widest opacity-50 mb-1 leading-none",children:"Commercial Engine"}),s.jsxs("span",{className:"text-xl font-black uppercase leading-tight",children:["Generar Nueva",s.jsx("br",{}),"Cotizacin"]})]})]}),s.jsx("div",{className:"absolute right-[-30px] top-[-30px] opacity-10 group-hover:opacity-20 transition-opacity",children:s.jsx(oc,{className:"w-48 h-48"})})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("button",{onClick:()=>a("reportes"),className:"bg-white p-8 rounded-[2.5rem] border border-enterprise-100 flex flex-col gap-6 text-left shadow-premium hover:border-brand-orange transition-all group",children:[s.jsx("div",{className:"w-12 h-12 bg-enterprise-50 rounded-2xl flex items-center justify-center text-enterprise-400 group-hover:bg-brand-orange/5 group-hover:text-brand-orange transition-all",children:s.jsx(Xs,{size:24})}),s.jsxs("span",{className:"text-[10px] font-black text-enterprise-950 uppercase tracking-widest leading-tight",children:["Analytics",s.jsx("br",{}),"Reports"]})]}),s.jsxs("button",{onClick:()=>a("crm"),className:"bg-white p-8 rounded-[2.5rem] border border-enterprise-100 flex flex-col gap-6 text-left shadow-premium hover:border-enterprise-950 transition-all group",children:[s.jsx("div",{className:"w-12 h-12 bg-enterprise-50 rounded-2xl flex items-center justify-center text-enterprise-400 group-hover:bg-enterprise-950 group-hover:text-white transition-all",children:s.jsx(wn,{size:24})}),s.jsxs("span",{className:"text-[10px] font-black text-enterprise-950 uppercase tracking-widest leading-tight",children:["Pipeline",s.jsx("br",{}),"Manager"]})]})]}),s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-enterprise-100 flex items-center justify-between shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 animate-ping"}),s.jsx("span",{className:"text-[10px] font-black text-enterprise-500 uppercase tracking-widest leading-none",children:"Real-time DB Sync"})]}),s.jsx("div",{className:"flex -space-x-3",children:[1,2,3].map(v=>s.jsx("div",{className:`w-8 h-8 border-2 border-white bg-enterprise-100 rounded-full flex items-center justify-center text-[10px] font-black ${v===1?"bg-orange-50 text-brand-orange":v===2?"bg-blue-50 text-blue-600":"bg-emerald-50 text-emerald-600"}`,children:v},v))})]})]})]})]})},ry=()=>{const[e,t]=P.useState(""),[r,n]=P.useState(""),[a,i]=P.useState(!1),[o,l]=P.useState(null),c=async d=>{d.preventDefault(),i(!0),l(null);try{const{error:h}=await re.auth.signInWithPassword({email:e,password:r});if(h)throw h}catch(h){l(h.message==="Invalid login credentials"?"Credenciales no reconocidas por el sistema de seguridad.":h.message)}finally{i(!1)}};return s.jsxs("div",{className:"h-screen bg-enterprise-50 flex flex-col lg:flex-row overflow-hidden font-sans",children:[s.jsxs("div",{className:"hidden lg:flex w-7/12 bg-[#111111] relative overflow-hidden items-center justify-center p-20",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#FF5900] opacity-10 blur-[120px] -translate-x-1/2 -translate-y-1/2"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-full h-full bg-[#C83378] opacity-10 blur-[150px] translate-x-1/2 translate-y-1/2"}),s.jsxs("div",{className:"relative z-10 text-white space-y-16 max-w-xl",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"w-20 h-20 bg-white rounded-3xl p-5 shadow-2xl flex items-center justify-center rotate-3 hover:rotate-0 transition-transform duration-500",children:s.jsx("img",{src:"/logo-tvsa.png",alt:"Televisa",className:"w-full h-full object-contain"})}),s.jsx("div",{className:"h-14 w-px bg-white/20"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-[#FF5900]",children:"Security First"}),s.jsxs("p",{className:"text-2xl font-black tracking-tighter uppercase italic",children:["Institutional ",s.jsx("span",{className:"text-white/30 not-italic",children:"Gate"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-[14px] font-black uppercase tracking-[0.5em] text-[#FF5900]/70",children:"Enterprise Resource Planning"}),s.jsxs("h1",{className:"text-8xl font-black tracking-tight leading-[0.9] uppercase text-white",children:["Comercial",s.jsx("br",{}),s.jsx("span",{className:"text-transparent bg-clip-text bg-univision-gradient italic",children:"Suite"})]}),s.jsxs("p",{className:"text-xl font-bold text-white/80 leading-relaxed",children:["Acceso unificado a la plataforma de inteligencia comercial ms avanzada de ",s.jsx("span",{className:"text-[#FF5900] font-black",children:"TelevisaUnivision Mxico"}),"."]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-10 pt-10 border-t border-white/10",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"block text-5xl font-black text-white italic",children:"0.1ms"}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#FF5900]",children:"Latency Response"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"block text-5xl font-black text-white italic",children:"256b"}),s.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#FF5900]",children:"AES-Encryption"})]})]})]}),s.jsxs("div",{className:"absolute bottom-12 left-20 flex items-center gap-4",children:[s.jsx(Js,{size:16,className:"text-[#FF5900] animate-pulse"}),s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-white/40",children:"TelevisaUnivision Intelligence Node  CDMX 2025"})]})]}),s.jsxs("div",{className:"w-full lg:w-5/12 bg-white flex items-center justify-center p-8 md:p-24 relative",children:[s.jsx("div",{className:"lg:hidden absolute top-0 left-0 right-0 h-1 bg-brand-orange"}),s.jsxs("div",{className:"w-full max-w-[440px] space-y-12",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"lg:hidden w-16 h-16 bg-enterprise-50 rounded-2xl p-4 mb-8",children:s.jsx("img",{src:"/logo-tvsa.png",alt:"TU",className:"w-full h-full object-contain"})}),s.jsxs("div",{className:"inline-flex items-center gap-2.5 px-4 py-2 bg-enterprise-50 rounded-full border border-enterprise-100",children:[s.jsx(js,{size:16,className:"text-brand-orange"}),s.jsx("span",{className:"text-[10px] font-black text-enterprise-700 uppercase tracking-widest",children:"Protocolo de Acceso Seguro"})]}),s.jsxs("div",{className:"space-y-2 text-left",children:[s.jsx("h2",{className:"text-5xl font-black text-enterprise-950 tracking-tight leading-none uppercase italic italic-brand",children:"Inicia Sesin"}),s.jsx("p",{className:"text-enterprise-600 font-bold text-base leading-snug",children:"Ingresa tus credenciales TU corporativas para acceder al ecosistema."})]})]}),s.jsxs("form",{onSubmit:c,className:"space-y-8",children:[s.jsxs("div",{className:"space-y-5",children:[s.jsx(Wa,{label:"Direccin de E-mail",type:"email",value:e,onChange:d=>t(d.target.value),icon:hi,required:!0}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Wa,{label:"Contrasea",type:"password",value:r,onChange:d=>n(d.target.value),icon:al,required:!0}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"button",className:"text-[10px] font-black text-brand-orange hover:text-brand-magenta transition-all uppercase tracking-widest",children:"Olvidaste tu acceso?"})})]})]}),o&&s.jsxs("div",{className:"p-5 bg-error-light border border-error/10 rounded-2xl text-[11px] font-black text-error uppercase tracking-wide flex items-center gap-4 animate-in shake duration-500",children:[s.jsx("div",{className:"w-10 h-10 bg-error/10 rounded-xl flex items-center justify-center shrink-0",children:s.jsx(pi,{size:20,className:"fill-error"})}),s.jsx("span",{children:o})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("button",{disabled:a,type:"submit",className:"w-full h-20 bg-enterprise-950 text-white rounded-[2rem] font-black uppercase tracking-[0.25em] text-xs shadow-2xl shadow-enterprise-900/30 hover:bg-brand-orange hover:shadow-brand-orange/40 hover:-translate-y-1 active:scale-[0.98] transition-all duration-500 flex items-center justify-center gap-4 group",children:a?s.jsx(Lv,{className:"animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Autenticar Sesin"}),s.jsx(rb,{size:16,className:"fill-white group-hover:translate-x-1.5 transition-transform"})]})}),s.jsxs("p",{className:"text-[10px] font-bold text-enterprise-400 uppercase tracking-widest text-center leading-loose opacity-60",children:["Este entorno est cifrado con AES-256. ",s.jsx("br",{}),"TelevisaUnivision Cybersecurity Systems."]})]})]})]}),s.jsx("div",{className:"lg:hidden absolute bottom-8 left-0 right-0 text-center px-8",children:s.jsx("p",{className:"text-[8px] font-black uppercase tracking-[0.4em] text-enterprise-300",children:"TU INTELLIGENCE NODE  2025"})})]})]})},sy=({clientes:e,onSelectClient:t,onAddNewClient:r})=>{const[n,a]=P.useState(""),[i,o]=P.useState("Todas"),l=["Todas","Prospecto","Contactado","Interesado","No Interesado","Cliente"],c=(e||[]).filter(h=>{const x=(h.nombre_empresa||"").toLowerCase().includes(n.toLowerCase())||(h.nombre_contacto||"").toLowerCase().includes(n.toLowerCase()),f=i==="Todas"||h.etapa===i;return x&&f}),d=h=>{switch(h){case"Cliente":return"bg-emerald-500";case"No Interesado":return"bg-enterprise-400";case"Prospecto":return"bg-blue-500";case"Contactado":return"bg-brand-orange";case"Interesado":return"bg-brand-magenta";default:return"bg-enterprise-300"}};return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[s.jsxs("div",{className:"bg-[#111111] p-4 rounded-t-2xl flex flex-col md:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(rt,{size:20,className:"text-[#FF5900]"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Pipeline de Clientes"})]}),s.jsxs("button",{onClick:r,className:"w-full md:w-auto px-6 py-2 bg-[#FF5900] text-white rounded-xl font-black uppercase tracking-widest text-[10px] flex items-center justify-center gap-2 hover:bg-[#e65000] transition-all shadow-lg active:scale-95 shadow-orange-500/20",children:[s.jsx(kt,{size:14})," Alta de Prospecto"]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[s.jsxs("div",{className:"flex-1 relative w-full",children:[s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:14}),s.jsx("input",{type:"text",placeholder:"Buscar por empresa o contacto...",value:n,onChange:h=>a(h.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-enterprise-100 rounded-xl text-[10px] font-bold shadow-sm focus:ring-1 focus:ring-brand-orange/20 outline-none transition-all"})]}),s.jsx("div",{className:"flex bg-[#111111] rounded-xl p-1 w-fit overflow-x-auto scrollbar-hide border border-white/5",children:l.map(h=>s.jsx("button",{onClick:()=>o(h),className:`px-4 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest whitespace-nowrap transition-all
                                ${i===h?"bg-[#FF5900] text-white shadow-lg shadow-orange-500/20":"text-white/40 hover:text-white/80"}`,children:h},h))})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-gray-100 overflow-hidden",children:[s.jsxs("div",{className:"hidden lg:grid grid-cols-12 gap-4 px-8 py-4 bg-enterprise-50 border-b border-enterprise-100 items-center",children:[s.jsx("div",{className:"col-span-4 text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:"Empresa / Contacto"}),s.jsx("div",{className:"col-span-2 text-[9px] font-black text-enterprise-400 uppercase tracking-widest text-center",children:"Etapa CRM"}),s.jsx("div",{className:"col-span-2 text-[9px] font-black text-enterprise-400 uppercase tracking-widest text-center",children:"Plaza"}),s.jsx("div",{className:"col-span-3 text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:"Segmento"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx("div",{className:"divide-y divide-gray-50",children:c.length>0?c.map(h=>s.jsxs("div",{onClick:()=>t(h),className:"group lg:grid lg:grid-cols-12 gap-4 px-6 md:px-8 py-6 hover:bg-red-50/30 transition-all cursor-pointer items-center content-center",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-4 flex items-center gap-4 mb-4 lg:mb-0",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-white font-black text-sm shadow-sm ${d(h.etapa)}`,children:h.nombre_empresa.substring(0,1)}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"text-sm font-black text-enterprise-950 tracking-tight group-hover:text-brand-orange transition-colors truncate",children:h.nombre_empresa}),s.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-bold text-gray-400",children:[s.jsx(Tr,{size:10,className:"text-gray-300"}),s.jsx("span",{className:"truncate",children:h.nombre_contacto||"Sin contacto"})]})]})]}),s.jsx("div",{className:"col-span-6 lg:col-span-2 flex justify-start lg:justify-center mb-4 lg:mb-0",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-[8px] font-black text-white uppercase tracking-tighter shadow-sm ${d(h.etapa)}`,children:h.etapa||"Paso 1"})}),s.jsxs("div",{className:"col-span-6 lg:col-span-2 flex items-center justify-end lg:justify-center gap-1.5 text-[10px] font-black text-gray-400 uppercase tracking-widest leading-none mb-4 lg:mb-0",children:[s.jsx(ws,{size:12,className:"text-red-500/50"}),h.plaza||"Mrida"]}),s.jsxs("div",{className:"col-span-6 lg:col-span-3 flex items-center gap-2 text-[9px] font-black uppercase tracking-[0.15em] text-slate-500",children:[s.jsx(Ua,{size:12,className:"text-gray-300"}),h.segmento||"General"]}),s.jsx("div",{className:"col-span-6 lg:col-span-1 flex justify-end",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-enterprise-50 group-hover:bg-brand-orange group-hover:text-white flex items-center justify-center transition-all text-enterprise-300",children:s.jsx(ar,{size:18})})})]},h.id)):s.jsxs("div",{className:"py-20 text-center bg-white",children:[s.jsx(ks,{className:"mx-auto text-enterprise-100 mb-4",size:48}),s.jsx("p",{className:"text-enterprise-400 font-black uppercase text-xs tracking-widest",children:"Sin coincidencias en el CRM"})]})})]}),s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-[8px] font-bold text-gray-300 uppercase tracking-[0.4em]",children:"Propiedad de Televisa Interactive Mrida  2025"})})]})},ny=({cliente:e,cotizaciones:t,masterContracts:r=[],onBack:n,onSaveClient:a,onNewQuote:i,onViewQuote:o,onPrintQuote:l,setMensaje:c})=>{const[d,h]=P.useState(!1),[x,f]=P.useState(""),[v,g]=P.useState(null),[w,k]=P.useState(null),[m,u]=P.useState(!1),[p,j]=P.useState(e),[_,b]=P.useState({numero_contrato:"",mc_id:"",fecha_registro_sistema:"",folio_sistema:""}),y=P.useMemo(()=>!(e!=null&&e.id)||!t?[]:t.filter(E=>String(E.cliente_id)===String(e.id)),[t,e==null?void 0:e.id]),N=P.useMemo(()=>(r||[]).filter(E=>String(E.cliente_id)===String(e==null?void 0:e.id)&&E.estatus==="activo"),[r,e==null?void 0:e.id]),S=["Prospecto","Contactado","Interesado","No Interesado","Cliente"],T=S.indexOf(e.etapa),O=async E=>{if(E){u(!0);try{let U={...e,etapa:E};if(E==="No Interesado"&&x){const D=`[DESCARTE ${new Date().toLocaleDateString("es-MX")}]: ${x}
${e.notas_generales||""}`;U.notas_generales=D}await a("clientes",U)&&(c({tipo:"exito",texto:`El cliente ahora est en etapa: ${E}`}),g(null),f(""))}catch(U){console.error(U)}finally{u(!1)}}},C=(E,U)=>{k({quote:E,status:U}),U==="ganada"&&b({numero_contrato:E.numero_contrato||"",mc_id:E.mc_id||"",fecha_registro_sistema:E.fecha_registro_sistema||"",folio_sistema:E.folio_sistema||""})},L=async(E,U)=>{if(U==="ganada"&&!_.numero_contrato){c({tipo:"error",texto:"El nmero de contrato es obligatorio."});return}u(!0);try{const A={id:E.id,estatus:U};U==="ganada"&&(A.numero_contrato=parseInt(_.numero_contrato),A.mc_id=_.mc_id||null,A.fecha_registro_sistema=_.fecha_registro_sistema||null,A.folio_sistema=_.folio_sistema||null,A.fecha_cierre_real=E.fecha_cierre_real||new Date().toISOString()),await a("cotizaciones",A)&&(c({tipo:"exito",texto:`Cotizacin actualizada a: ${U.toUpperCase()}`}),U==="ganada"&&await a("cobranza",{cotizacion_id:E.id,monto_facturado:E.subtotalGeneral||E.total/1.16,estatus_pago:"pendiente",notas:`Contrato: ${_.numero_contrato}`}),U==="ganada"&&e.etapa!=="Cliente"?(k(null),g("Cliente")):k(null),b({numero_contrato:"",mc_id:"",fecha_registro_sistema:"",folio_sistema:""}))}catch(A){console.error(A)}finally{u(!1)}},B=async()=>{await a("clientes",p)&&(h(!1),c({tipo:"exito",texto:"Datos actualizados correctamente"}))},R=E=>{switch(E){case"ganada":return s.jsx(rr,{className:"text-green-500",size:16});case"perdida":return s.jsx(jt,{className:"text-gray-400",size:16});case"enviada":return s.jsx(lc,{className:"text-blue-500",size:16});default:return s.jsx(Er,{className:"text-slate-300",size:16})}};return s.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[s.jsx("button",{onClick:n,className:"p-3 bg-white hover:bg-slate-900 hover:text-white rounded-2xl shadow-sm border border-gray-100 transition-all active:scale-95",children:s.jsx(pv,{size:20})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tighter",children:e.nombre_empresa}),s.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest leading-none mt-1",children:"Ficha de Cliente / CRM"})]})]}),s.jsx("div",{className:"bg-white p-6 rounded-[2.5rem] shadow-xl border border-gray-100 mb-6 relative overflow-hidden",children:s.jsxs("div",{className:"flex items-center justify-between gap-2 relative",children:[S.map((E,U)=>{const A=U<T&&e.etapa!=="No Interesado",z=U===T,D=e.etapa==="No Interesado"&&E==="No Interesado";return s.jsxs(Ga.Fragment,{children:[s.jsxs("button",{onClick:()=>!z&&g(E),disabled:m,className:"flex flex-col items-center gap-2 group flex-1 relative z-10",children:[s.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center text-[10px] font-black transition-all shadow-sm
                                        ${D?"bg-orange-500 text-white shadow-orange-200":z?"bg-slate-900 text-white scale-110 shadow-slate-300":A?"bg-emerald-500 text-white shadow-emerald-200":"bg-white text-slate-300 border border-slate-100"}`,children:A?s.jsx(rr,{size:16}):U+1}),s.jsx("span",{className:`text-[8px] font-black uppercase tracking-tighter text-center whitespace-nowrap
                                        ${z?"text-slate-900":"text-slate-400 group-hover:text-slate-600"}`,children:E})]}),U<S.length-1&&s.jsx("div",{className:`flex-1 h-0.5 mt-4 -mx-1 relative z-0
                                        ${U<T?"bg-emerald-200":"bg-slate-100"}`})]},E)}),m&&s.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center",children:s.jsx(At,{className:"animate-spin"})})]})}),s.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[s.jsx("div",{className:"xl:w-[400px] flex-shrink-0 space-y-6",children:s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-gray-100",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-[0.3em]",children:"Detalles de Contacto"}),s.jsx("button",{onClick:()=>h(!d),className:"text-red-600",children:s.jsx(jn,{size:18})})]}),d?s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{placeholder:"Nombre",value:p.nombre_contacto,onChange:E=>j({...p,nombre_contacto:E.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl text-xs font-bold"}),s.jsx("input",{placeholder:"Email",value:p.email,onChange:E=>j({...p,email:E.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl text-xs font-bold"}),s.jsx("input",{placeholder:"Tel",value:p.telefono,onChange:E=>j({...p,telefono:E.target.value}),className:"w-full p-3 bg-gray-50 rounded-xl text-xs font-bold"}),s.jsxs("button",{onClick:B,className:"w-full py-3 bg-emerald-500 text-white rounded-xl text-[9px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:[s.jsx(cr,{size:14})," Guardar"]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Tr,{size:18,className:"text-slate-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Contacto"}),s.jsx("p",{className:"text-xs font-bold",children:e.nombre_contacto||"No registrado"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(hi,{size:18,className:"text-slate-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Email"}),s.jsx("p",{className:"text-xs font-bold",children:e.email||"No registrado"})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Fa,{size:18,className:"text-slate-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[8px] font-black text-gray-400 uppercase",children:"Telfono"}),s.jsx("p",{className:"text-xs font-bold",children:e.telefono||"No registrado"})]})]})]})]})}),s.jsx("div",{className:"flex-1 space-y-6",children:s.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-xl border border-gray-100 min-h-[500px]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsx("h4",{className:"text-[10px] font-black text-slate-900 uppercase tracking-[0.3em]",children:"Histrico de Cotizaciones"}),s.jsxs("button",{onClick:i,className:"px-5 py-2.5 bg-red-600 text-white rounded-xl font-black uppercase text-[9px] flex items-center gap-2",children:[s.jsx(kt,{size:14})," Nueva Cotizacin"]})]}),s.jsx("div",{className:"space-y-4",children:y.map(E=>s.jsxs("div",{onClick:()=>o(E),className:"group p-6 bg-slate-50 hover:bg-white rounded-2xl border border-transparent hover:border-red-100 transition-all cursor-pointer flex flex-col md:flex-row justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 bg-white rounded-2xl flex items-center justify-center shadow-sm",children:R(E.estatus)}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",onClick:U=>U.stopPropagation(),children:[s.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase",children:E.folio}),E.estatus==="ganada"&&E.numero_contrato&&s.jsxs("span",{className:"text-[8px] font-black bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-md border border-emerald-200 uppercase tracking-tighter",children:["Contrato: ",E.numero_contrato]}),s.jsx("div",{className:"flex gap-1",children:["enviada","ganada","perdida"].map(U=>s.jsx("button",{onClick:()=>C(E,U),className:`text-[7px] px-2 py-0.5 rounded font-black uppercase ${E.estatus===U?"bg-slate-900 text-white":"bg-white text-slate-400 opacity-60 hover:opacity-100 transition-opacity"}`,children:U},U))})]}),s.jsx("p",{className:"text-lg font-black text-slate-900",children:M(E.subtotalGeneral||E.total/1.16)})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[E.estatus==="ganada"&&s.jsx("button",{onClick:U=>{U.stopPropagation(),C(E,"ganada")},className:"p-3 bg-emerald-50 text-emerald-600 rounded-xl border border-emerald-100 hover:bg-emerald-600 hover:text-white transition-all shadow-sm",title:"Datos de Cierre",children:s.jsx(rt,{size:16})}),s.jsx("button",{onClick:U=>{U.stopPropagation(),l(E)},className:"p-3 bg-white rounded-xl border border-gray-100",children:s.jsx(Pn,{size:16})})]})]},E.id))})]})})]}),w&&s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md",children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl",children:[s.jsxs("h3",{className:"text-center text-lg font-black uppercase mb-4 tracking-tighter",children:["Marcar como ",w.status.toUpperCase(),"?"]}),w.status==="ganada"&&s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase ml-2 tracking-widest",children:"Contrato Corporativo"}),s.jsx("input",{type:"number",placeholder:"Contrato (Obligatorio)",value:_.numero_contrato,onChange:E=>b({..._,numero_contrato:E.target.value}),className:"w-full p-4 bg-slate-50 rounded-2xl text-sm font-bold outline-none ring-2 ring-emerald-500/20 focus:ring-emerald-500"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase ml-2 tracking-widest",children:"Master Contract"}),s.jsxs("select",{value:_.mc_id,onChange:E=>b({..._,mc_id:E.target.value}),className:"w-full max-w-full p-4 bg-slate-50 rounded-2xl text-sm font-bold outline-none truncate",children:[s.jsx("option",{value:"",children:"Venta nica"}),N.map(E=>s.jsx("option",{value:E.id,children:E.numero_mc},E.id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase ml-2 tracking-widest",children:"F. Sistema Televisa"}),s.jsx("input",{type:"date",value:_.fecha_registro_sistema,onChange:E=>b({..._,fecha_registro_sistema:E.target.value}),className:"w-full p-4 bg-slate-50 rounded-2xl text-[10px] font-bold outline-none"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase ml-2 tracking-widest",children:"Folio Sistema (CP)"}),s.jsx("input",{type:"text",placeholder:"Ej: CP-123",value:_.folio_sistema,onChange:E=>b({..._,folio_sistema:E.target.value}),className:"w-full p-4 bg-slate-50 rounded-2xl text-[10px] font-bold outline-none"})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:()=>L(w.quote,w.status),className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black uppercase text-[10px]",children:"Confirmar"}),s.jsx("button",{onClick:()=>k(null),className:"w-full py-3 text-[10px] font-black uppercase text-slate-400",children:"Cancelar"})]})]})}),v&&s.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md",children:s.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] p-8 shadow-2xl text-center",children:[s.jsx(rr,{size:48,className:"mx-auto text-emerald-500 mb-4"}),s.jsx("h3",{className:"text-xl font-black uppercase mb-2 tracking-tighter",children:"Venta Ganada!"}),s.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-8",children:"Promover a CLIENTE en el CRM?"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:()=>O("Cliente"),className:"w-full py-4 bg-slate-900 text-white rounded-2xl font-black uppercase text-[10px]",children:"S, promover"}),s.jsx("button",{onClick:()=>g(null),className:"w-full py-3 text-[10px] font-black uppercase text-slate-400",children:"Ahora no"})]})]})})]})},ay=({masterContracts:e=[],cotizaciones:t=[],clientes:r=[],cobranza:n=[],onSaveMC:a,onSaveQuote:i,setMensaje:o})=>{var y,N,S,T,O;const[l,c]=P.useState("mcs"),[d,h]=P.useState(""),[x,f]=P.useState("todos"),[v,g]=P.useState(!1),[w,k]=P.useState(null),[m,u]=P.useState({numero_mc:"",cliente_id:"",monto_aprobado:"",fecha_inicio:"",fecha_fin:"",notas:"",estatus:"activo"}),p=P.useMemo(()=>(e||[]).map(C=>{const L=r.find(z=>String(z.id)===String(C.cliente_id)),B=t.filter(z=>String(z.mc_id)===String(C.id)&&z.estatus==="ganada"),R=B.reduce((z,D)=>z+(parseFloat(D.subtotalGeneral||D.total/1.16)||0),0),E=B.filter(z=>z.fecha_registro_sistema).reduce((z,D)=>z+(parseFloat(D.subtotalGeneral||D.total/1.16)||0),0),U=(n||[]).filter(z=>{var D;return((D=z.cotizaciones)==null?void 0:D.mc_id)&&String(z.cotizaciones.mc_id)===String(C.id)}),A=U.filter(z=>z.estatus_pago==="cobrado").reduce((z,D)=>z+(parseFloat(D.monto_facturado)||0),0);return{...C,cliente:L,cotizaciones:B,bills:U,montoConsumido:R,montoRegistrado:E,montoCobrado:A,saldoDisponible:parseFloat(C.monto_aprobado)-R,saldoTecnico:parseFloat(C.monto_aprobado)-E,porcentajeConsumo:R/parseFloat(C.monto_aprobado)*100,porcentajeRegistro:E/parseFloat(C.monto_aprobado)*100}}),[e,t,r]),j=P.useMemo(()=>{const C=p.reduce((A,z)=>A+(parseFloat(z.monto_aprobado)||0),0),L=p.reduce((A,z)=>A+(z.montoConsumido||0),0),B=p.reduce((A,z)=>A+(z.montoRegistrado||0),0),R=p.map(A=>A.id),U=n.filter(A=>{var z;return((z=A.cotizaciones)==null?void 0:z.mc_id)&&R.includes(A.cotizaciones.mc_id)}).filter(A=>A.estatus_pago==="cobrado").reduce((A,z)=>A+(parseFloat(z.monto_facturado)||0),0);return{totalAprobado:C,totalConsumido:L,totalRegistrado:B,montoCobrado:U}},[p,n]),_=p.filter(C=>{var R,E,U;const L=((R=C.numero_mc)==null?void 0:R.toLowerCase().includes(d.toLowerCase()))||((U=(E=C.cliente)==null?void 0:E.nombre_empresa)==null?void 0:U.toLowerCase().includes(d.toLowerCase())),B=x==="todos"||C.estatus===x;return L&&B}),b=async C=>{C.preventDefault(),await a("master_contracts",m)&&(o({tipo:"exito",texto:"Master Contract guardado correctamente"}),g(!1),u({numero_mc:"",cliente_id:"",monto_aprobado:"",fecha_inicio:"",fecha_fin:"",notas:"",estatus:"activo"}))};return s.jsxs("div",{className:"min-h-screen bg-enterprise-50 pb-20 animate-premium-fade",children:[s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"bg-enterprise-950 p-4 rounded-2xl md:rounded-b-none flex flex-col md:flex-row justify-between items-center gap-4 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-orange opacity-5 blur-3xl -mr-32 -mt-32"}),s.jsxs("div",{className:"flex items-center gap-3 relative z-10",children:[s.jsx(rt,{size:20,className:"text-brand-orange"}),s.jsx("h3",{className:"text-sm font-black text-white uppercase italic italic-brand",children:"Consolidado de Contratos Maestro"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"relative z-10 w-full md:w-auto px-4 py-1.5 bg-brand-orange text-white rounded-lg font-black uppercase tracking-widest text-[9px] flex items-center justify-center gap-2 hover:bg-brand-magenta transition-all shadow-lg active:scale-95",children:[s.jsx(kt,{size:14})," Nuevo Registro Maestro"]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl md:rounded-2xl shadow-sm border border-enterprise-100",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-1",children:"Bolsa Global"}),s.jsx("h4",{className:"text-sm md:text-lg font-black text-enterprise-950",children:M(j.totalAprobado)})]}),s.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl md:rounded-2xl shadow-sm border border-enterprise-100 border-l-4 border-l-brand-orange",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-brand-orange uppercase tracking-widest mb-1",children:"Consumo Comercial"}),s.jsx("h4",{className:"text-sm md:text-lg font-black text-brand-orange",children:M(j.totalConsumido)})]}),s.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-xl md:rounded-2xl shadow-sm border border-enterprise-100 border-l-4 border-l-blue-500",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-blue-600 uppercase tracking-widest mb-1",children:"Formalizado (Sist.)"}),s.jsx("h4",{className:"text-sm md:text-lg font-black text-blue-600",children:M(j.totalRegistrado)})]}),s.jsxs("div",{className:"bg-enterprise-950 p-3 md:p-4 rounded-xl md:rounded-2xl shadow-xl",children:[s.jsx("p",{className:"text-[7px] md:text-[8px] font-black text-enterprise-400 uppercase tracking-widest mb-1",children:"Recuperado (Cobro)"}),s.jsx("h4",{className:"text-sm md:text-lg font-black text-emerald-400",children:M(j.montoCobrado)})]})]}),s.jsxs("div",{className:"flex bg-enterprise-100 p-1 rounded-xl shadow-sm border border-enterprise-200 max-w-sm mx-auto mb-8",children:[s.jsx("button",{onClick:()=>c("mcs"),className:`flex-1 py-1.5 px-4 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${l==="mcs"?"bg-enterprise-950 text-white shadow-lg":"text-enterprise-400 hover:text-enterprise-600"}`,children:"Master Contracts"}),s.jsx("button",{onClick:()=>c("individuales"),className:`flex-1 py-1.5 px-4 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${l==="individuales"?"bg-enterprise-950 text-white shadow-lg":"text-enterprise-400 hover:bg-enterprise-200"}`,children:"Emisiones (CPs)"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(at,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-enterprise-400",size:14}),s.jsx("input",{type:"text",placeholder:l==="mcs"?"Buscar por cliente o folio MC...":"Buscar contrato...",value:d,onChange:C=>h(C.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-enterprise-100 rounded-xl font-bold text-[10px] shadow-sm outline-none focus:ring-1 focus:ring-brand-orange/20 transition-all placeholder:text-enterprise-300"})]}),l==="mcs"&&s.jsx("div",{className:"flex bg-enterprise-950 rounded-xl p-1 w-fit",children:["todos","activo","agotado","vencido"].map(C=>s.jsx("button",{onClick:()=>f(C),className:`px-4 py-1.5 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all whitespace-nowrap
                                        ${x===C?"bg-brand-orange text-white shadow-lg":"text-enterprise-400 hover:text-white/60"}`,children:C},C))})]}),l==="mcs"?s.jsxs("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-enterprise-100 overflow-hidden mb-10",children:[s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-enterprise-950 text-white font-black uppercase text-[9px] tracking-[0.2em]",children:[s.jsx("th",{className:"px-8 py-5",children:"Cliente / MC"}),s.jsx("th",{className:"px-8 py-5",children:"Status"}),s.jsx("th",{className:"px-8 py-5",children:"Bolsa Aprobada"}),s.jsx("th",{className:"px-8 py-5",children:"Consumo"}),s.jsx("th",{className:"px-8 py-5",children:"Saldo Disponible"}),s.jsx("th",{className:"px-8 py-5 text-center",children:"Acciones"})]})}),s.jsx("tbody",{className:"divide-y divide-enterprise-50",children:_.map(C=>{var L;return s.jsxs("tr",{onClick:()=>k(C),className:"hover:bg-enterprise-50/50 transition-colors cursor-pointer group",children:[s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-enterprise-50 rounded-xl flex items-center justify-center text-enterprise-400 group-hover:bg-brand-orange group-hover:text-white transition-all shadow-sm",children:s.jsx(Ua,{size:18})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-black text-enterprise-950 truncate uppercase tracking-tight group-hover:text-brand-orange transition-colors",children:((L=C.cliente)==null?void 0:L.nombre_empresa)||"S/N"}),s.jsxs("p",{className:"text-[9px] font-bold text-brand-orange tracking-widest uppercase",children:["MC: ",C.numero_mc]})]})]})}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg text-[8px] font-black uppercase tracking-widest shadow-sm
                                                        ${C.estatus==="activo"?"bg-emerald-50 text-emerald-600":"bg-brand-magenta/10 text-brand-magenta"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${C.estatus==="activo"?"bg-emerald-500":"bg-brand-magenta"} animate-pulse`}),C.estatus]})}),s.jsx("td",{className:"px-8 py-6 font-black text-enterprise-950 text-sm",children:M(C.monto_aprobado)}),s.jsx("td",{className:"px-8 py-6",children:s.jsxs("div",{className:"flex flex-col gap-1.5 min-w-[120px]",children:[s.jsxs("div",{className:"flex justify-between text-[8px] font-black uppercase text-enterprise-400 tracking-tight",children:[s.jsxs("span",{children:[C.porcentajeConsumo.toFixed(1),"%"]}),s.jsx("span",{children:M(C.montoConsumido)})]}),s.jsx("div",{className:"h-1.5 w-full bg-enterprise-100 rounded-full overflow-hidden shadow-inner",children:s.jsx("div",{className:`h-full transition-all duration-1000 ${C.porcentajeConsumo>90?"bg-brand-magenta":C.porcentajeConsumo>70?"bg-brand-orange":"bg-emerald-500"}`,style:{width:`${Math.min(C.porcentajeConsumo,100)}%`}})})]})}),s.jsxs("td",{className:"px-8 py-6 text-right",children:[s.jsx("div",{className:`text-sm font-black ${C.saldoDisponible<C.monto_aprobado*.1?"text-brand-magenta":"text-emerald-600"}`,children:M(C.saldoDisponible)}),s.jsx("p",{className:"text-[8px] font-bold text-enterprise-300 uppercase italic",children:"Libre para pauta"})]}),s.jsx("td",{className:"px-8 py-6 text-center",children:s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-10 h-10 bg-enterprise-50 group-hover:bg-brand-orange group-hover:text-white rounded-xl transition-all shadow-sm flex items-center justify-center",children:s.jsx(ar,{size:18})})})})]},C.id)})})]})}),s.jsx("div",{className:"md:hidden divide-y divide-enterprise-50",children:_.map(C=>{var L;return s.jsxs("div",{onClick:()=>k(C),className:"p-6 space-y-4 hover:bg-enterprise-50 transition-all",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-enterprise-950 text-white rounded-xl flex items-center justify-center",children:s.jsx(Ua,{size:18})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-black text-enterprise-950 uppercase tracking-tight truncate max-w-[150px]",children:(L=C.cliente)==null?void 0:L.nombre_empresa}),s.jsx("span",{className:"text-[9px] font-bold text-brand-orange uppercase tracking-widest",children:C.numero_mc})]})]}),s.jsx("div",{className:`px-2 py-0.5 rounded text-[7px] font-black uppercase ${C.estatus==="activo"?"bg-emerald-50 text-emerald-600":"bg-brand-orange/10 text-brand-orange"}`,children:C.estatus})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[8px] font-black text-enterprise-400 uppercase tracking-widest",children:"Aprobado"}),s.jsx("p",{className:"text-xs font-black text-enterprise-950",children:M(C.monto_aprobado)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[8px] font-black text-emerald-600 uppercase tracking-widest",children:"Disponible"}),s.jsx("p",{className:"text-xs font-black text-emerald-600",children:M(C.saldoDisponible)})]})]}),s.jsx("div",{className:"h-1 w-full bg-enterprise-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${C.porcentajeConsumo>90?"bg-brand-magenta":"bg-emerald-500"}`,style:{width:`${Math.min(C.porcentajeConsumo,100)}%`}})})]},C.id)})}),_.length===0&&s.jsxs("div",{className:"py-20 text-center",children:[s.jsx(rt,{size:40,className:"mx-auto text-slate-200 mb-4"}),s.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"No hay Master Contracts registrados"})]})]}):s.jsx("div",{className:"bg-white rounded-[2.5rem] shadow-xl border border-enterprise-100 overflow-hidden mb-10",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-enterprise-950 text-white font-black uppercase text-[9px] tracking-[0.2em]",children:[s.jsx("th",{className:"px-8 py-5",children:"F. Venta"}),s.jsx("th",{className:"px-8 py-5",children:"Cliente / Contrato"}),s.jsx("th",{className:"px-8 py-5",children:"Importe Neto"}),s.jsx("th",{className:"px-8 py-5",children:"F. Sistema (Registro)"}),s.jsx("th",{className:"px-8 py-5",children:"Folio Sistema (CP)"}),s.jsx("th",{className:"px-8 py-5 text-center",children:"Estado Adm."})]})}),s.jsx("tbody",{className:"divide-y divide-enterprise-50",children:(t||[]).filter(C=>C.estatus==="ganada").filter(C=>{var B,R,E,U;const L=d.toLowerCase();return((R=(B=C.cliente)==null?void 0:B.nombre_empresa)==null?void 0:R.toLowerCase().includes(L))||((E=C.numero_contrato)==null?void 0:E.toString().includes(L))||((U=C.folio_sistema)==null?void 0:U.toLowerCase().includes(L))}).sort((C,L)=>new Date(L.fecha)-new Date(C.fecha)).map(C=>{var L;return s.jsxs("tr",{className:"hover:bg-enterprise-50/50 transition-colors",children:[s.jsxs("td",{className:"px-8 py-6",children:[s.jsx("p",{className:"text-[10px] font-black text-enterprise-950 uppercase",children:new Date(C.fecha_cierre_real||C.fecha).toLocaleDateString("es-MX")}),s.jsxs("p",{className:"text-[8px] font-bold text-enterprise-400 uppercase tracking-tighter",children:["Folio: ",C.folio]})]}),s.jsxs("td",{className:"px-8 py-6",children:[s.jsx("p",{className:"text-sm font-black text-enterprise-950 uppercase tracking-tight",children:(L=C.cliente)==null?void 0:L.nombre_empresa}),s.jsxs("span",{className:"text-[9px] font-bold text-brand-orange uppercase tracking-widest",children:["CTR: ",C.numero_contrato]})]}),s.jsx("td",{className:"px-8 py-6 font-black text-enterprise-950 text-sm",children:M(C.subtotalGeneral||C.total/1.16)}),s.jsx("td",{className:"px-8 py-6",children:s.jsx("input",{type:"date",value:C.fecha_registro_sistema||"",onChange:async B=>{await i("cotizaciones",{id:C.id,fecha_registro_sistema:B.target.value})&&o({tipo:"exito",texto:"Fecha de sistema actualizada"})},className:"p-2 bg-enterprise-50 border border-enterprise-100 rounded-lg text-[10px] font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none w-full max-w-[130px] transition-all"})}),s.jsx("td",{className:"px-8 py-6",children:s.jsx("input",{type:"text",placeholder:"Ej: CP-12345",defaultValue:C.folio_sistema||"",onBlur:async B=>{B.target.value!==C.folio_sistema&&await i("cotizaciones",{id:C.id,folio_sistema:B.target.value})&&o({tipo:"exito",texto:"Folio de sistema actualizado"})},className:"p-2 bg-enterprise-50 border border-enterprise-100 rounded-lg text-[10px] font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none w-full transition-all"})}),s.jsx("td",{className:"px-8 py-6 text-center",children:C.fecha_registro_sistema?s.jsx("span",{className:"bg-emerald-50 text-emerald-700 px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest border border-emerald-100",children:"Registrado"}):s.jsx("span",{className:"bg-brand-orange/10 text-brand-orange px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest border border-brand-orange/20",children:"Pendiente"})})]},C.id)})})]})})})]}),v&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-enterprise-950/60 backdrop-blur-md animate-premium-fade",children:s.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[3rem] p-10 shadow-2xl relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-brand-orange"}),s.jsxs("h2",{className:"text-2xl font-black text-enterprise-950 uppercase italic italic-brand tracking-tighter mb-8 flex items-center gap-3",children:[s.jsx(kt,{className:"text-brand-orange"})," Crear Master Contract"]}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2 space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-2",children:"Seleccionar Cliente"}),s.jsxs("select",{required:!0,value:m.cliente_id,onChange:C=>u({...m,cliente_id:C.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl text-sm font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none appearance-none",children:[s.jsx("option",{value:"",children:"Elegir empresa..."}),r.map(C=>s.jsx("option",{value:C.id,children:C.nombre_empresa},C.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-2",children:"Folio MC"}),s.jsx("input",{type:"text",required:!0,placeholder:"Ej: MC-2024-001",value:m.numero_mc,onChange:C=>u({...m,numero_mc:C.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl text-sm font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-2",children:"Inversin Aprobada"}),s.jsx("input",{type:"number",required:!0,placeholder:"$0.00",value:m.monto_aprobado,onChange:C=>u({...m,monto_aprobado:C.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl text-sm font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none font-mono"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-2",children:"Inicio Periodo"}),s.jsx("input",{type:"date",required:!0,value:m.fecha_inicio,onChange:C=>u({...m,fecha_inicio:C.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl text-sm font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-widest ml-2",children:"Fin Periodo"}),s.jsx("input",{type:"date",required:!0,value:m.fecha_fin,onChange:C=>u({...m,fecha_fin:C.target.value}),className:"w-full p-4 bg-enterprise-50 border border-enterprise-100 rounded-2xl text-sm font-bold focus:ring-1 focus:ring-brand-orange/20 outline-none"})]})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-4 text-[10px] font-black uppercase tracking-[0.2em] text-enterprise-400 hover:bg-enterprise-50 rounded-2xl transition-all",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-brand-orange text-white rounded-2xl font-black uppercase tracking-[0.2em] text-[10px] hover:bg-brand-magenta transition-all shadow-xl shadow-brand-orange/20",children:"Guardar Contrato"})]})]})]})}),w&&s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 md:p-10 bg-enterprise-950/80 backdrop-blur-xl animate-premium-fade",children:s.jsxs("div",{className:"bg-white w-full max-w-4xl max-h-[90vh] rounded-[3rem] shadow-2xl relative flex flex-col overflow-hidden",children:[s.jsx("button",{onClick:()=>k(null),className:"absolute right-8 top-8 w-12 h-12 bg-enterprise-50 rounded-full flex items-center justify-center text-enterprise-400 hover:bg-brand-orange/10 hover:text-brand-orange transition-all z-10",children:s.jsx(_p,{className:"rotate-180",size:20})}),s.jsxs("div",{className:"p-12 pb-6 flex items-center gap-6 border-b border-enterprise-50",children:[s.jsx("div",{className:"w-20 h-20 bg-enterprise-950 rounded-[2rem] flex items-center justify-center text-white shadow-2xl shadow-enterprise-900/10",children:s.jsx(rt,{size:36,className:"text-brand-orange"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-black text-enterprise-950 uppercase italic italic-brand tracking-tighter",children:(y=w.cliente)==null?void 0:y.nombre_empresa}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsxs("span",{className:"text-[10px] font-black text-brand-orange uppercase tracking-[0.3em]",children:["Master Contract: ",w.numero_mc]}),s.jsx("span",{className:"w-1 h-1 bg-enterprise-200 rounded-full"}),s.jsxs("span",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.3em]",children:[new Date(w.fecha_inicio).toLocaleDateString()," - ",new Date(w.fecha_fin).toLocaleDateString()]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-8 md:p-12 custom-scrollbar",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 mb-8 md:mb-12",children:[s.jsxs("div",{className:"bg-enterprise-50 p-4 md:p-7 rounded-2xl md:rounded-[2.5rem] border border-enterprise-100 shadow-sm transition-all hover:bg-white hover:shadow-lg",children:[s.jsx("p",{className:"text-[7px] md:text-[10px] font-black text-enterprise-400 uppercase tracking-widest mb-1 md:mb-3",children:"Bolsa Autorizada"}),s.jsx("p",{className:"text-sm md:text-2xl font-black text-enterprise-950 tracking-tighter",children:M(w.monto_aprobado)})]}),s.jsxs("div",{className:"bg-brand-orange/5 p-4 md:p-7 rounded-2xl md:rounded-[2.5rem] border border-brand-orange/10 shadow-sm transition-all hover:bg-brand-orange/10",children:[s.jsx("p",{className:"text-[7px] md:text-[10px] font-black text-brand-orange uppercase tracking-widest mb-1 md:mb-3",children:"Devengado"}),s.jsx("p",{className:"text-sm md:text-2xl font-black text-brand-orange tracking-tighter",children:M(w.montoConsumido)})]}),s.jsxs("div",{className:"bg-blue-50/50 p-4 md:p-7 rounded-2xl md:rounded-[2.5rem] border border-blue-100/50 shadow-sm transition-all hover:bg-blue-50",children:[s.jsx("p",{className:"text-[7px] md:text-[10px] font-black text-blue-600 uppercase tracking-widest mb-1 md:mb-3",children:"Formalizado"}),s.jsx("p",{className:"text-sm md:text-2xl font-black text-blue-600 tracking-tighter",children:M(w.montoRegistrado)})]}),s.jsxs("div",{className:"bg-emerald-600 p-4 md:p-7 rounded-2xl md:rounded-[2.5rem] shadow-xl shadow-emerald-500/10 text-white relative overflow-hidden group",children:[s.jsx("div",{className:"absolute -right-4 -bottom-4 opacity-10 rotate-12 group-hover:scale-110 transition-transform hidden md:block",children:s.jsx(rr,{size:80})}),s.jsx("p",{className:"text-[7px] md:text-[10px] font-black text-emerald-100 uppercase tracking-widest mb-1 md:mb-3 relative z-10",children:"Recuperado (Cobro)"}),s.jsx("p",{className:"text-sm md:text-2xl font-black text-white tracking-tighter relative z-10",children:M(w.montoCobrado)})]})]}),s.jsxs("div",{className:"mt-4 mb-8 bg-enterprise-50 p-4 rounded-2xl border border-enterprise-100 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center text-brand-orange shadow-sm border border-enterprise-100",children:s.jsx(jt,{size:16})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:"Saldo Tcnico Libre"}),s.jsx("p",{className:"text-xs font-black text-enterprise-950",children:M(w.saldoTecnico)})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:"Saldo Comercial Libre"}),s.jsx("p",{className:"text-xs font-black text-brand-magenta",children:M(w.saldoDisponible)})]})]}),s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("h4",{className:"text-[11px] font-black text-enterprise-950 uppercase tracking-[0.4em] flex items-center gap-3 italic italic-brand",children:[s.jsx(Er,{size:16,className:"text-brand-orange"})," Historial de Implementacin"]}),s.jsx("div",{className:"h-px flex-1 bg-enterprise-100 mx-6"}),s.jsxs("span",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest bg-enterprise-50 px-3 py-1 rounded-lg border border-enterprise-100",children:[((N=w.cotizaciones)==null?void 0:N.length)||0," Cotizaciones"]})]}),s.jsx("div",{className:"bg-enterprise-50 rounded-[2.5rem] border border-enterprise-100 p-2 mb-12",children:((S=w.cotizaciones)==null?void 0:S.length)>0?s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:[s.jsx("th",{className:"px-6 py-4",children:"Folio / Contrato"}),s.jsx("th",{className:"px-6 py-4",children:"Fecha Cierre"}),s.jsx("th",{className:"px-6 py-4",children:"Registro Sistema"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Monto Netificado"})]})}),s.jsx("tbody",{className:"divide-y divide-white",children:w.cotizaciones.map(C=>s.jsxs("tr",{className:"hover:bg-white transition-colors group",children:[s.jsx("td",{className:"px-6 py-5 rounded-l-3xl",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center text-enterprise-300 shadow-sm border border-enterprise-50 group-hover:bg-brand-orange group-hover:text-white transition-all",children:s.jsx(rr,{size:16})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-black text-enterprise-950 uppercase",children:["CTR-",C.numero_contrato||"S/N"]}),s.jsxs("p",{className:"text-[9px] font-bold text-enterprise-400 uppercase tracking-tighter",children:["Folio: ",C.folio]})]})]})}),s.jsx("td",{className:"px-6 py-5 text-xs font-bold text-enterprise-700",children:new Date(C.fecha_cierre_real||C.created_at).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-5",children:C.fecha_registro_sistema?s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-[9px] font-black text-emerald-600",children:["#",C.folio_sistema]}),s.jsx("span",{className:"text-[8px] font-bold text-enterprise-400",children:new Date(C.fecha_registro_sistema).toLocaleDateString()})]}):s.jsx("span",{className:"text-[8px] font-black text-brand-orange uppercase tracking-widest",children:"Pendiente"})}),s.jsx("td",{className:"px-6 py-5 text-right rounded-r-3xl",children:s.jsx("p",{className:"text-sm font-black text-enterprise-950",children:M(C.subtotalGeneral||C.total/1.16)})})]},C.id))})]}):s.jsxs("div",{className:"py-20 text-center",children:[s.jsx(oc,{size:24,className:"text-enterprise-200 mx-auto mb-4"}),s.jsx("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.2em]",children:"Sin cargos registrados"})]})}),s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("h4",{className:"text-[11px] font-black text-enterprise-950 uppercase tracking-[0.4em] flex items-center gap-3 italic italic-brand",children:[s.jsx(Ke,{size:16,className:"text-emerald-600"})," Cobranza y Facturacin"]}),s.jsx("div",{className:"h-px flex-1 bg-enterprise-100 mx-6"}),s.jsxs("span",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest bg-enterprise-50 px-3 py-1 rounded-lg border border-enterprise-100",children:[((T=w.bills)==null?void 0:T.length)||0," Facturas"]})]}),s.jsx("div",{className:"bg-enterprise-50 rounded-[2.5rem] border border-enterprise-100 p-2",children:((O=w.bills)==null?void 0:O.length)>0?s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-[9px] font-black text-enterprise-400 uppercase tracking-widest",children:[s.jsx("th",{className:"px-6 py-4",children:"F. Programada"}),s.jsx("th",{className:"px-6 py-4",children:"Factura"}),s.jsx("th",{className:"px-6 py-4 text-center",children:"Estatus"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Importe"})]})}),s.jsx("tbody",{className:"divide-y divide-white",children:w.bills.map(C=>{var L;return s.jsxs("tr",{className:"hover:bg-white transition-colors",children:[s.jsx("td",{className:"px-6 py-5 rounded-l-3xl",children:s.jsx("p",{className:"text-[10px] font-black text-enterprise-950",children:new Date(C.fecha_programada_cobro).toLocaleDateString()})}),s.jsxs("td",{className:"px-6 py-5",children:[s.jsx("p",{className:"text-[10px] font-black text-enterprise-950 uppercase",children:C.numero_factura||"PENDIENTE"}),s.jsxs("p",{className:"text-[8px] font-bold text-enterprise-400 uppercase tracking-tighter",children:["Rel: ",(L=C.cotizaciones)==null?void 0:L.folio]})]}),s.jsx("td",{className:"px-6 py-5 text-center",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest border shadow-sm
                                                            ${C.estatus_pago==="cobrado"?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-brand-orange/5 text-brand-orange border-brand-orange/10"}`,children:C.estatus_pago})}),s.jsx("td",{className:"px-6 py-5 text-right rounded-r-3xl",children:s.jsx("p",{className:"text-sm font-black text-enterprise-950",children:M(C.monto_facturado)})})]},C.id)})})]}):s.jsxs("div",{className:"py-20 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-white rounded-3xl flex items-center justify-center mx-auto mb-4 border border-enterprise-100 shadow-sm",children:s.jsx(Ke,{size:24,className:"text-enterprise-200"})}),s.jsx("p",{className:"text-[10px] font-black text-enterprise-400 uppercase tracking-[0.2em]",children:"Sin facturas emitidas para este contrato"})]})})]}),s.jsx("div",{className:"p-8 bg-enterprise-50 border-t border-enterprise-100 flex justify-end",children:s.jsx("button",{onClick:()=>k(null),className:"px-10 py-4 bg-enterprise-950 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-brand-orange transition-all duration-300 shadow-xl shadow-enterprise-900/10",children:"Cerrar Registro"})})]})})]})},Qi="-",iy=({clientes:e=[],cotizaciones:t=[],cobranza:r=[],masterContracts:n=[]})=>{const[a,i]=P.useState("ventas-mes"),o=new Date,[l,c]=P.useState(new Date(o.getFullYear(),o.getMonth(),1).toISOString().split("T")[0]),[d,h]=P.useState(new Date(o.getFullYear(),o.getMonth()+1,0).toISOString().split("T")[0]),x=u=>{const p=new Date;u==="mes"?(c(new Date(p.getFullYear(),p.getMonth(),1).toISOString().split("T")[0]),h(new Date(p.getFullYear(),p.getMonth()+1,0).toISOString().split("T")[0])):u==="ao"&&(c(new Date(p.getFullYear(),0,1).toISOString().split("T")[0]),h(new Date(p.getFullYear(),11,31).toISOString().split("T")[0]))},f=P.useMemo(()=>(t||[]).filter(u=>{if(u.estatus!=="ganada")return!1;const p=new Date(u.fecha_cierre_real||u.created_at||u.fecha),j=new Date(l),_=new Date(d);return _.setHours(23,59,59,999),p>=j&&p<=_}),[t,l,d]),v=P.useMemo(()=>{const u=["ENE","FEB","MAR","ABR","MAY","JUN","JUL","AGO","SEP","OCT","NOV","DIC"],p={},j=new Set,_={};f.forEach(S=>{const T=(e||[]).find(R=>String(R.id)===String(S.cliente_id)),C=new Date(S.fecha_cierre_real||S.created_at||S.fecha).getMonth();u[C];const L=S.cliente_id,B=parseFloat(S.subtotalGeneral||S.total/1.16)||0;j.add(C),p[L]||(p[L]={nombre:(T==null?void 0:T.nombre_empresa)||"S/N",importes:{}}),p[L].importes[C]=(p[L].importes[C]||0)+B,_[C]=(_[C]||0)+B});const b=Array.from(j).sort((S,T)=>S-T),y=Object.values(p).map(S=>({nombre:S.nombre,importes:S.importes,total:Object.values(S.importes).reduce((T,O)=>T+O,0)})).sort((S,T)=>T.total-S.total),N=Object.values(_).reduce((S,T)=>S+T,0);return{mesesColumnas:b,mesesNombres:u,filas:y,totalesPorMes:_,granTotal:N}},[f,e]),g=P.useMemo(()=>{const u={},p=new Set,j={};f.forEach(N=>{var C;const S=(e||[]).find(L=>String(L.id)===String(N.cliente_id)),T=(S==null?void 0:S.plaza)||"Mrida";p.add(T),(N.items||[]).forEach(L=>{var E;const B=((E=L.producto)==null?void 0:E.canal)||"Otros";u[B]||(u[B]={});const R=L.subtotal||0;u[B][T]=(u[B][T]||0)+R,j[T]=(j[T]||0)+R});const O=parseFloat(N.costoVIX||((C=N.paqueteVIX)==null?void 0:C.inversion)||0);if(O>0){const L="VIX";u[L]||(u[L]={}),u[L][T]=(u[L][T]||0)+O,j[T]=(j[T]||0)+O}});const _=Array.from(p).sort(),b=Object.entries(u).map(([N,S])=>({canal:N,importes:S,total:Object.values(S).reduce((T,O)=>T+O,0)})).sort((N,S)=>S.total-N.total),y=Object.values(j).reduce((N,S)=>N+S,0);return{plazas:_,filas:b,totalesPorPlaza:j,granTotal:y}},[f,e]),w=P.useMemo(()=>{const u={},p=new Set,j={};f.forEach(N=>{const S=(e||[]).find(L=>String(L.id)===String(N.cliente_id)),T=(S==null?void 0:S.plaza)||"Mrida",O=N.cliente_id,C=parseFloat(N.subtotalGeneral||N.total/1.16)||0;p.add(T),u[O]||(u[O]={nombre:(S==null?void 0:S.nombre_empresa)||"S/N",importes:{}}),u[O].importes[T]=(u[O].importes[T]||0)+C,j[T]=(j[T]||0)+C});const _=Array.from(p).sort(),b=Object.values(u).map(N=>({nombre:N.nombre,importes:N.importes,total:Object.values(N.importes).reduce((S,T)=>S+T,0)})).sort((N,S)=>S.total-N.total),y=Object.values(j).reduce((N,S)=>N+S,0);return{plazas:_,filas:b,totalesPorPlaza:j,granTotal:y}},[f,e]),k=u=>{let p=[],j=[],_="";return u==="ventas-mes"?(_="VENTAS POR MES (MATRIZ POR CLIENTE)",p=["Cliente",...v.mesesColumnas.map(b=>v.mesesNombres[b]),"Total"],j=v.filas.map(b=>[b.nombre,...v.mesesColumnas.map(y=>b.importes[y]||0),b.total]),j.push(["TOTAL MENSUAL",...v.mesesColumnas.map(b=>v.totalesPorMes[b]||0),v.granTotal])):u==="ventas-canal"?(_="VENTAS POR CANAL / PRODUCTO",p=["Canal/Producto",...g.plazas,"Total Canal"],j=g.filas.map(b=>[b.canal,...g.plazas.map(y=>b.importes[y]||0),b.total]),j.push(["TOTAL CIUDAD",...g.plazas.map(b=>g.totalesPorPlaza[b]||0),g.granTotal])):u==="ventas-ciudad"?(_="VENTAS POR CIUDAD (MATRIZ TERRITORIAL)",p=["Cliente",...w.plazas,"Total Cliente"],j=w.filas.map(b=>[b.nombre,...w.plazas.map(y=>b.importes[y]||0),b.total]),j.push(["TOTAL CIUDAD",...w.plazas.map(b=>w.totalesPorPlaza[b]||0),w.granTotal])):u==="control-cierres"?(_="CONTROL ADMINISTRATIVO DE CIERRES",p=["Fecha Cierre","Cliente","Folio","Master Contract","Orden","Factura","Inversion Neta"],j=f.map(b=>{const y=(e||[]).find(T=>String(T.id)===String(b.cliente_id)),N=(r||[]).find(T=>String(T.cotizacion_id)===String(b.id)),S=(n||[]).find(T=>String(T.id)===String(b.mc_id));return[new Date(b.fecha_cierre_real||b.created_at).toLocaleDateString("es-MX"),(y==null?void 0:y.nombre_empresa)||"S/N",b.folio||b.id,S?S.numero_mc||S.numero_contrato||S.folio||"VINCULADO":"FALTA",b.numero_contrato||"FALTA",(N==null?void 0:N.numero_factura)||"FALTA",parseFloat(b.subtotalGeneral||b.total/1.16)||0]})):u==="resumen-clientes"?(_="PIPELINE Y EFECTIVIDAD POR CUENTA ($)",p=["Cuenta","Plaza","Valor Abiertas","Valor Ganadas","Valor Perdidas","Venta Acumulada"],j=(e||[]).map(b=>{const y=(t||[]).filter(O=>String(O.cliente_id)===String(b.id)),N=y.filter(O=>O.estatus==="borrador"||O.estatus==="enviada").reduce((O,C)=>O+(parseFloat(C.subtotalGeneral||C.total/1.16)||0),0),S=y.filter(O=>O.estatus==="ganada").reduce((O,C)=>O+(parseFloat(C.subtotalGeneral||C.total/1.16)||0),0),T=y.filter(O=>O.estatus==="perdida").reduce((O,C)=>O+(parseFloat(C.subtotalGeneral||C.total/1.16)||0),0);return N===0&&S===0&&T===0?null:[b.nombre_empresa,b.plaza,N,S,T,S]}).filter(Boolean)):u==="cobranza-periodo"&&(_="REPORTE DE COBRANZA Y FACTURACIN",p=["F. Programada","Cliente","Factura","Monto","Estado","F. Pago Real","Notas"],j=(r||[]).filter(b=>{const y=new Date(b.fecha_programada_cobro||b.created_at),N=new Date(l),S=new Date(d);return S.setHours(23,59,59,999),y>=N&&y<=S}).sort((b,y)=>new Date(b.fecha_programada_cobro)-new Date(y.fecha_programada_cobro)).map(b=>{var y,N,S;return[b.fecha_programada_cobro?new Date(b.fecha_programada_cobro).toLocaleDateString("es-MX"):"-",((N=(y=b.cotizaciones)==null?void 0:y.clientes)==null?void 0:N.nombre_empresa)||"S/N",b.numero_factura||"PENDIENTE",parseFloat(b.monto_facturado)||0,((S=b.estatus_pago)==null?void 0:S.toUpperCase())||"PENDIENTE",b.fecha_cobro_real?new Date(b.fecha_cobro_real).toLocaleDateString("es-MX"):"-",b.notas||"-"]})),{title:_,headers:p,rows:j}},m=(u="current")=>{const p=u==="all"?["ventas-mes","ventas-canal","ventas-ciudad","control-cierres","resumen-clientes","cobranza-periodo"]:[a],j=`
            <?xml version="1.0"?>
            <?mso-application progid="Excel.Sheet"?>
            <Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet"
             xmlns:o="urn:schemas-microsoft-com:office:office"
             xmlns:x="urn:schemas-microsoft-com:office:excel"
             xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet"
             xmlns:html="http://www.w3.org/TR/REC-html40">
             <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">
              <Author>Televisa MID Cotizador</Author>
              <Created>${new Date().toISOString()}</Created>
             </DocumentProperties>
             <Styles>
              <Style ss:ID="Default" ss:Name="Normal">
               <Alignment ss:Vertical="Bottom"/>
               <Borders/>
               <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="11" ss:Color="#000000"/>
               <Interior/>
               <NumberFormat/>
               <Protection/>
              </Style>
              <Style ss:ID="Header">
               <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="12" ss:Color="#FFFFFF" ss:Bold="1"/>
               <Interior ss:Color="#0F172A" ss:Pattern="Solid"/>
              </Style>
              <Style ss:ID="Title">
               <Font ss:FontName="Calibri" x:Family="Swiss" ss:Size="14" ss:Color="#DC2626" ss:Bold="1"/>
              </Style>
              <Style ss:ID="Currency">
               <NumberFormat ss:Format="&quot;$&quot;#,##0.00"/>
              </Style>
             </Styles>
             {SHEETS}
            </Workbook>`;let _="";p.forEach(O=>{const{title:C,headers:L,rows:B}=k(O),R=O==="ventas-mes"?"Mensual":O==="ventas-canal"?"Canal":O==="ventas-ciudad"?"Ciudad":O==="control-cierres"?"Cierres":O==="cobranza-periodo"?"Cobranza":"Pipeline";let E="";E+=`<Row><Cell ss:StyleID="Title"><Data ss:Type="String">${C}</Data></Cell></Row>`,E+=`<Row><Cell><Data ss:Type="String">Periodo: ${l} al ${d}</Data></Cell></Row>`,E+=`<Row><Cell><Data ss:Type="String">Generado: ${new Date().toLocaleString()}</Data></Cell></Row>`,E+="<Row></Row>",E+="<Row>",L.forEach(U=>{E+=`<Cell ss:StyleID="Header"><Data ss:Type="String">${U}</Data></Cell>`}),E+="</Row>",B.forEach(U=>{E+="<Row>",U.forEach((A,z)=>{const D=L[z],$=["Orden","Factura","Folio","Folio Cotz","Master Contract"].includes(D),H=!isNaN(A)&&typeof A!="boolean"&&A!==""&&!$,K=H?"Number":"String",Q=H?' ss:StyleID="Currency"':"",ue=String(A).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;");E+=`<Cell${Q}><Data ss:Type="${K}">${H?A:ue}</Data></Cell>`}),E+="</Row>"}),_+=`
                <Worksheet ss:Name="${R}">
                 <Table>
                  ${E}
                 </Table>
                </Worksheet>`});const b=j.replace("{SHEETS}",_),y=u==="all"?`Reporte_Consolidado_${l}_al_${d}.xls`:`Reporte_${a}_${l}_al_${d}.xls`,N=new Blob([b],{type:"application/vnd.ms-excel"}),S=URL.createObjectURL(N),T=document.createElement("a");T.setAttribute("href",S),T.setAttribute("download",y),T.click()};return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20 print:p-0",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 print:hidden",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-[#111111] p-3 rounded-xl shadow-xl shadow-slate-200",children:s.jsx(Xs,{className:"text-white",size:24})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-black text-slate-900 tracking-tighter uppercase",children:"Reportera Corporativa"}),s.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-widest mt-0.5",children:"Control de Resultados con Totales y Matrices"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 w-full lg:w-auto",children:[s.jsxs("button",{onClick:()=>m("current"),className:"flex-1 bg-white border border-gray-100 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-slate-50 transition-all shadow-sm",title:"Exportar solo la vista actual",children:[s.jsx(Cp,{size:12})," EXCEL (ACTUAL)"]}),s.jsxs("button",{onClick:()=>m("all"),className:"flex-1 bg-white border border-red-100 text-red-600 px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-red-50 transition-all shadow-sm",title:"Exportar todos los reportes en pestaas separadas",children:[s.jsx(Js,{size:12})," EXCEL (TODO)"]}),s.jsxs("button",{onClick:()=>window.print(),className:"flex-1 bg-[#111111] text-white px-4 py-2 rounded-xl font-black text-[9px] uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-[#FF5900] transition-all shadow-xl active:scale-95",children:[s.jsx(Pn,{size:12})," IMPRIMIR"]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 print:hidden bg-white p-2 rounded-2xl shadow-xl border border-gray-100",children:[{id:"ventas-mes",label:"Ventas por Mes",icon:ui},{id:"ventas-canal",label:"Ventas por Canal",icon:Ba},{id:"ventas-ciudad",label:"Ventas por Ciudad",icon:Js},{id:"control-cierres",label:"Control de Cierres",icon:rt},{id:"resumen-clientes",label:"Resumen Pipeline",icon:Er},{id:"cobranza-periodo",label:"Cobranza / Facturas",icon:Ke}].map(u=>s.jsxs("button",{onClick:()=>i(u.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest transition-all
                            ${a===u.id?"bg-[#FF5900] text-white shadow-lg shadow-orange-500/20":"text-enterprise-400 hover:text-enterprise-950 hover:bg-enterprise-50"}`,children:[s.jsx(u.icon,{size:14}),u.label]},u.id))}),s.jsxs("div",{className:"bg-white p-4 rounded-2xl shadow-xl border border-gray-100 flex flex-col md:flex-row items-center gap-4 print:hidden",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lc,{size:14,className:"text-slate-400"}),s.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Ajustar Perodo:"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>x("mes"),className:"px-3 py-1.5 bg-slate-50 rounded-lg text-[8px] font-black uppercase hover:bg-red-50 hover:text-red-600 transition-all border border-slate-100 italic",children:"Mes Actual"}),s.jsx("button",{onClick:()=>x("ao"),className:"px-3 py-1.5 bg-slate-50 rounded-lg text-[8px] font-black uppercase hover:bg-red-50 hover:text-red-600 transition-all border border-slate-100 italic",children:"Ao Completo"})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsx("input",{type:"date",value:l,onChange:u=>c(u.target.value),className:"bg-slate-50 border-none rounded-lg p-1.5 text-[10px] font-bold focus:ring-1 focus:ring-red-500"}),s.jsx("span",{className:"text-gray-300 font-bold",children:"A"}),s.jsx("input",{type:"date",value:d,onChange:u=>h(u.target.value),className:"bg-slate-50 border-none rounded-lg p-1.5 text-[10px] font-bold focus:ring-1 focus:ring-red-500"})]})]}),s.jsxs("div",{className:"bg-white rounded-[2rem] shadow-xl border border-gray-100 overflow-hidden",children:[a==="ventas-mes"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-50 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-slate-900 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black tracking-tighter uppercase",children:"Ventas por Mes (Detallado)"}),s.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 italic",children:"Consolidado mensual por cliente"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[9px] font-black uppercase text-red-500 tracking-widest",children:"Total Gran Acumulado"}),s.jsx("p",{className:"text-2xl font-black",children:M(v.granTotal)})]})]}),s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-gray-200",children:[s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200 sticky left-0 bg-slate-50 z-10",children:"Cuenta / Cliente"}),v.mesesColumnas.map(u=>s.jsx("th",{className:"py-4 px-4 text-center text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200",children:v.mesesNombres[u]},u)),s.jsx("th",{className:"py-4 px-6 text-right text-[9px] font-black text-slate-900 uppercase tracking-widest",children:"Total Cliente"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[v.filas.map((u,p)=>s.jsxs("tr",{className:"hover:bg-slate-50/50",children:[s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 sticky left-0 bg-white group-hover:bg-slate-50 z-10",children:s.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase truncate block max-w-[150px]",children:u.nombre})}),v.mesesColumnas.map(j=>s.jsx("td",{className:"py-4 px-4 text-center text-[10px] font-bold text-slate-500 border-r border-gray-100",children:u.importes[j]?M(u.importes[j]):Qi},j)),s.jsx("td",{className:"py-4 px-6 text-right text-[10px] font-black text-slate-900 bg-slate-50/20",children:M(u.total)})]},p)),s.jsxs("tr",{className:"bg-[#111111] text-white font-black",children:[s.jsx("td",{className:"py-4 px-6 uppercase text-[9px] tracking-widest border-r border-[#222222] sticky left-0 bg-[#111111] z-10",children:"Total Mensual"}),v.mesesColumnas.map(u=>s.jsx("td",{className:"py-4 px-4 text-center text-[10px] border-r border-slate-800",children:M(v.totalesPorMes[u])},u)),s.jsx("td",{className:"py-4 px-6 text-right text-[11px] text-red-500",children:M(v.granTotal)})]})]})]})})]}),a==="ventas-canal"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-50 flex justify-between items-center bg-slate-900 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black tracking-tighter uppercase",children:"Anlisis por Canal"}),s.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 italic",children:"Distribucin territorial de inversin"})]}),s.jsx(Ba,{className:"text-red-500 flex-shrink-0",size:30})]}),s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-[600px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-gray-200",children:[s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200 sticky left-0 bg-slate-50 z-10",children:"Canal / Producto"}),g.plazas.map(u=>s.jsx("th",{className:"py-4 px-6 text-center text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200",children:u},u)),s.jsx("th",{className:"py-4 px-6 text-right text-[9px] font-black text-slate-900 uppercase tracking-widest",children:"Inversin Canal"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[g.filas.map((u,p)=>s.jsxs("tr",{className:"hover:bg-slate-50/50",children:[s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 sticky left-0 bg-white z-10",children:s.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase",children:u.canal})}),g.plazas.map(j=>s.jsx("td",{className:"py-4 px-6 text-center text-[10px] font-bold text-slate-500 border-r border-gray-100",children:u.importes[j]?M(u.importes[j]):Qi},j)),s.jsx("td",{className:"py-4 px-6 text-right text-[10px] font-black text-red-600 bg-slate-50/20",children:M(u.total)})]},p)),s.jsxs("tr",{className:"bg-slate-900 text-white font-black",children:[s.jsx("td",{className:"py-4 px-6 uppercase text-[9px] tracking-widest border-r border-slate-800 sticky left-0 bg-slate-900 z-10",children:"Total Ciudad"}),g.plazas.map(u=>s.jsx("td",{className:"py-4 px-6 text-center text-[10px] border-r border-slate-800",children:M(g.totalesPorPlaza[u])},u)),s.jsx("td",{className:"py-4 px-6 text-right text-[11px] text-red-500",children:M(g.granTotal)})]})]})]})})]}),a==="ventas-ciudad"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-50 flex justify-between items-center bg-slate-900 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black tracking-tighter uppercase",children:"Matriz Territorial"}),s.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 italic",children:"Consolidado por plaza"})]}),s.jsx(Js,{className:"text-red-500 flex-shrink-0",size:30})]}),s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-gray-200",children:[s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200 sticky left-0 bg-slate-50 z-10",children:"Cuenta / Empresa"}),w.plazas.map(u=>s.jsx("th",{className:"py-4 px-6 text-center text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200",children:u},u)),s.jsx("th",{className:"py-4 px-6 text-right text-[9px] font-black text-slate-900 uppercase tracking-widest",children:"Consolidado"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[w.filas.map((u,p)=>s.jsxs("tr",{className:"hover:bg-slate-50/50",children:[s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 sticky left-0 bg-white z-10",children:s.jsx("span",{className:"text-[10px] font-black text-slate-900 uppercase block truncate max-w-[120px]",children:u.nombre})}),w.plazas.map(j=>s.jsx("td",{className:"py-4 px-6 text-center text-[10px] font-bold text-slate-500 border-r border-gray-100",children:u.importes[j]?M(u.importes[j]):Qi},j)),s.jsx("td",{className:"py-4 px-6 text-right text-[10px] font-black text-slate-900 bg-slate-50/20",children:M(u.total)})]},p)),s.jsxs("tr",{className:"bg-slate-900 text-white font-black",children:[s.jsx("td",{className:"py-4 px-6 uppercase text-[9px] tracking-widest border-r border-slate-800 sticky left-0 bg-slate-900 z-10",children:"Total Ciudad"}),w.plazas.map(u=>s.jsx("td",{className:"py-4 px-6 text-center text-[10px] border-r border-slate-800",children:M(w.totalesPorPlaza[u])},u)),s.jsx("td",{className:"py-4 px-6 text-right text-[11px] text-red-500",children:M(w.granTotal)})]})]})]})})]}),a==="control-cierres"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-6 md:p-8 border-b border-gray-50 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-slate-900 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black tracking-tighter uppercase",children:"Control Administrativo de Cierres"}),s.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 italic",children:"Folios, Contratos y Master Contracts"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[9px] font-black uppercase text-red-500 tracking-widest",children:"Cierres en Periodo"}),s.jsx("p",{className:"text-2xl font-black",children:f.length})]})]}),s.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:s.jsxs("table",{className:"w-full text-left border-collapse min-w-[900px]",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 border-b border-gray-200",children:[s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200",children:"Fecha Cierre"}),s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200",children:"Cliente / Empresa"}),s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest border-r border-gray-200",children:"Folio Cotz"}),s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-500 uppercase tracking-widest border-r border-gray-200",children:"Master Contract"}),s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-emerald-600 uppercase tracking-widest border-r border-gray-200",children:"Orden"}),s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-blue-600 uppercase tracking-widest border-r border-gray-200",children:"Factura"}),s.jsx("th",{className:"py-4 px-6 text-right text-[9px] font-black text-slate-900 uppercase tracking-widest",children:"Inversin Neta"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-100",children:[f.sort((u,p)=>new Date(p.fecha_cierre_real)-new Date(u.fecha_cierre_real)).map((u,p)=>{const j=(e||[]).find(_=>String(_.id)===String(u.cliente_id));return s.jsxs("tr",{className:"hover:bg-slate-50/50",children:[s.jsx("td",{className:"py-4 px-6 text-[10px] font-bold text-gray-400 border-r border-gray-100",children:new Date(u.fecha_cierre_real||u.created_at).toLocaleDateString("es-MX")}),s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 font-black text-[10px] text-slate-900 uppercase",children:(j==null?void 0:j.nombre_empresa)||"S/N"}),s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 text-[10px] font-bold text-red-500 uppercase tracking-tighter",children:u.folio||u.id}),s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 text-center",children:(()=>{const _=(n||[]).find(b=>String(b.id)===String(u.mc_id));return s.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase ${_?"bg-slate-100 text-slate-600":"bg-red-50 text-red-400"}`,children:_?_.numero_mc||_.numero_contrato||_.folio||"VINCULADO":"FALTA"})})()}),s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 text-center",children:s.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase ${u.numero_contrato?"bg-emerald-50 text-emerald-600":"bg-red-50 text-red-400"}`,children:u.numero_contrato||"FALTA"})}),s.jsx("td",{className:"py-4 px-6 border-r border-gray-100 text-center",children:(()=>{const _=(r||[]).find(b=>String(b.cotizacion_id)===String(u.id));return s.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase ${_!=null&&_.numero_factura?"bg-blue-50 text-blue-600":"bg-red-50 text-red-400"}`,children:(_==null?void 0:_.numero_factura)||"FALTA"})})()}),s.jsx("td",{className:"py-4 px-6 text-right text-[10px] font-black text-slate-900",children:M(u.subtotalGeneral||u.total/1.16)})]},p)}),f.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-20 text-center text-[10px] font-black text-gray-300 uppercase italic tracking-widest",children:"Sin ventas ganadas en este periodo"})})]})]})})]}),a==="resumen-clientes"&&s.jsxs("div",{className:"overflow-x-auto sm:overflow-hidden",children:[s.jsxs("div",{className:"p-8 border-b border-gray-50 flex justify-between items-center bg-slate-900 text-white",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-black tracking-tighter uppercase",children:"Pipeline de Ventas y Efectividad"}),s.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 italic",children:"Estado actual de propuestas por cuenta"})]}),s.jsx(Yv,{className:"text-red-500",size:30})]}),s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50",children:[s.jsx("th",{className:"py-4 px-6 text-[9px] font-black text-slate-900 uppercase tracking-widest sticky left-0 bg-slate-50 z-10",children:"Cuenta"}),s.jsx("th",{className:"py-4 px-6 text-center text-[9px] font-black text-blue-500 uppercase tracking-widest",children:"Valor Abiertas"}),s.jsx("th",{className:"py-4 px-6 text-center text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"Valor Ganadas"}),s.jsx("th",{className:"py-4 px-6 text-center text-[9px] font-black text-red-500 uppercase tracking-widest",children:"Valor Perdidas"}),s.jsx("th",{className:"py-4 px-6 text-right text-[9px] font-black text-slate-900 uppercase tracking-widest",children:"Venta Acumulada"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-100",children:(e||[]).map(u=>{const p=(t||[]).filter(N=>String(N.cliente_id)===String(u.id)),j=p.filter(N=>N.estatus==="borrador"||N.estatus==="enviada").length,_=p.filter(N=>N.estatus==="ganada").length,b=p.filter(N=>N.estatus==="perdida").length,y=p.filter(N=>N.estatus==="ganada").reduce((N,S)=>N+(parseFloat(S.subtotalGeneral||S.total/1.16)||0),0);return j===0&&_===0&&b===0?null:s.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors",children:[s.jsxs("td",{className:"py-4 px-6 sticky left-0 bg-white z-10",children:[s.jsx("p",{className:"text-[10px] font-black text-slate-900 uppercase",children:u.nombre_empresa}),s.jsx("p",{className:"text-[8px] font-bold text-gray-300 uppercase tracking-widest italic",children:u.plaza})]}),s.jsx("td",{className:"py-4 px-6 text-center font-bold text-[10px] text-blue-600",children:M(p.filter(N=>N.estatus==="borrador"||N.estatus==="enviada").reduce((N,S)=>N+(parseFloat(S.subtotalGeneral||S.total/1.16)||0),0))}),s.jsx("td",{className:"py-4 px-6 text-center font-bold text-[10px] text-emerald-600",children:M(p.filter(N=>N.estatus==="ganada").reduce((N,S)=>N+(parseFloat(S.subtotalGeneral||S.total/1.16)||0),0))}),s.jsx("td",{className:"py-4 px-6 text-center font-bold text-[10px] text-red-600",children:M(p.filter(N=>N.estatus==="perdida").reduce((N,S)=>N+(parseFloat(S.subtotalGeneral||S.total/1.16)||0),0))}),s.jsx("td",{className:"py-4 px-6 text-right text-[10px] font-black text-slate-900",children:M(y)})]},u.id)}).filter(Boolean)})]})]}),a==="cobranza-periodo"&&s.jsx(s.Fragment,{children:(()=>{const u=(r||[]).filter(b=>{const y=new Date(b.fecha_programada_cobro||b.created_at),N=new Date(l),S=new Date(d);return S.setHours(23,59,59,999),y>=N&&y<=S}),p=u.reduce((b,y)=>b+(parseFloat(y.monto_facturado)||0),0),j=u.filter(b=>b.estatus_pago==="cobrado").reduce((b,y)=>b+(parseFloat(y.monto_facturado)||0),0),_=p-j;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-8 border-b border-gray-50 bg-slate-900 text-white flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-emerald-500/10 p-4 rounded-3xl border border-emerald-500/20",children:s.jsx(Ke,{className:"text-emerald-500",size:32})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-black uppercase tracking-tighter",children:"Reporte de Facturacin y Cobranza"}),s.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Corte peridico de ingresos proyectados vs reales"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-8",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest mb-1 italic",children:"Total Facturado"}),s.jsx("p",{className:"text-xl font-black",children:M(p)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest mb-1 italic",children:"Total Cobrado"}),s.jsx("p",{className:"text-xl font-black text-emerald-500",children:M(j)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest mb-1 italic",children:"Pendiente Pago"}),s.jsx("p",{className:"text-xl font-black text-red-500",children:M(_)})]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 text-[10px] font-black text-slate-900 uppercase tracking-widest",children:[s.jsx("th",{className:"px-8 py-5",children:"F. Programada"}),s.jsx("th",{className:"px-8 py-5",children:"Cliente"}),s.jsx("th",{className:"px-8 py-5",children:"Factura"}),s.jsx("th",{className:"px-8 py-5 text-right",children:"Importe"}),s.jsx("th",{className:"px-8 py-5 text-center",children:"Estatus"}),s.jsx("th",{className:"px-8 py-5 text-center",children:"Fecha Cobro"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-50",children:[u.sort((b,y)=>new Date(b.fecha_programada_cobro)-new Date(y.fecha_programada_cobro)).map((b,y)=>{var N,S,T;return s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsx("td",{className:"px-8 py-5 text-[11px] font-bold text-slate-500",children:b.fecha_programada_cobro?new Date(b.fecha_programada_cobro).toLocaleDateString():"-"}),s.jsxs("td",{className:"px-8 py-5",children:[s.jsx("p",{className:"text-xs font-black text-slate-900 uppercase",children:((S=(N=b.cotizaciones)==null?void 0:N.clientes)==null?void 0:S.nombre_empresa)||"S/N"}),s.jsxs("p",{className:"text-[9px] font-bold text-red-600 uppercase tracking-tight",children:["Folio Q: ",((T=b.cotizaciones)==null?void 0:T.folio)||"S/N"]})]}),s.jsx("td",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:b.numero_factura||"PENDIENTE"}),s.jsx("td",{className:"px-8 py-5 text-right font-black text-slate-900 text-sm",children:M(b.monto_facturado)}),s.jsx("td",{className:"px-8 py-5 text-center",children:s.jsx("span",{className:`px-4 py-1.5 rounded-xl text-[9px] font-black uppercase tracking-widest
                                                                ${b.estatus_pago==="cobrado"?"bg-emerald-50 text-emerald-600 border border-emerald-100":b.estatus_pago==="vencido"?"bg-red-50 text-red-600 border border-red-100":"bg-orange-50 text-orange-600 border border-orange-100"}`,children:b.estatus_pago})}),s.jsx("td",{className:"px-8 py-5 text-center text-[10px] font-black text-slate-400 uppercase italic",children:b.fecha_cobro_real?new Date(b.fecha_cobro_real).toLocaleDateString():"Pendiente"})]},y)}),u.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:"6",className:"py-24 text-center",children:s.jsx("p",{className:"text-xs font-black text-slate-300 uppercase italic tracking-widest",children:"Sin registros de cobranza en este periodo"})})})]})]})})]})})()})]}),s.jsxs("div",{className:"hidden print:flex flex-col border-t-2 border-slate-900 pt-8 mt-12 bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-900",children:"Reporte Ejecutivo de Televisin Local"}),s.jsxs("p",{className:"text-[8px] text-gray-400 font-bold mt-1 uppercase",children:["Corte de Ventas Ganadas - ",a.replace("-"," ").toUpperCase()]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("p",{className:"text-[10px] font-black text-slate-900",children:["Periodo: ",l," / ",d]})})]}),s.jsxs("div",{className:"flex justify-end gap-12 pt-12",children:[s.jsxs("div",{className:"text-center w-48",children:[s.jsx("div",{className:"border-b border-slate-900 mb-2"}),s.jsx("p",{className:"text-[8px] font-black uppercase text-slate-400",children:"Revisado Por"})]}),s.jsxs("div",{className:"text-center w-48",children:[s.jsx("div",{className:"border-b border-slate-900 mb-2"}),s.jsx("p",{className:"text-[8px] font-black uppercase text-slate-400",children:"Autorizado Por"})]})]})]})]})},oy=({session:e,vistaActual:t,setVistaActual:r,onLogout:n})=>{var x;const[a,i]=P.useState(!1),o=((x=e==null?void 0:e.user)==null?void 0:x.email)||"N/A";P.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[a]);const l=[{id:"crm",label:"Clientes",icon:ks},{id:"cotizador",label:"Cotizador",icon:oc},{id:"historial",label:"Historial",icon:Ov},{id:"master-contracts",label:"Contratos",icon:rt},{id:"cobranza",label:"Cobranza",icon:Ke}],c=async()=>{n&&await n()},d=f=>t===f,h=({id:f,icon:v,label:g,onClick:w,className:k=""})=>s.jsxs("button",{onClick:w||(()=>r(f)),className:`w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center rounded-xl transition-all relative group
                ${d(f)?"bg-enterprise-50":"hover:bg-enterprise-50"} ${k}`,title:g,children:[s.jsx(v,{size:19,className:d(f)?"text-brand-orange":"text-enterprise-400 group-hover:text-enterprise-950"}),d(f)&&s.jsx("div",{className:"absolute -bottom-1 left-2 right-2 h-[3px] bg-brand-orange rounded-full"})]});return s.jsxs(s.Fragment,{children:[s.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-[60] bg-white border-b border-enterprise-100 shadow-sm h-16 sm:h-20 flex items-center px-4 sm:px-6",children:[s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-brand-orange"}),s.jsxs("div",{className:"max-w-[1600px] mx-auto w-full flex items-center gap-2 sm:gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 cursor-pointer group flex-shrink-0",onClick:()=>r("dashboard"),children:[s.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-enterprise-950 rounded-xl flex items-center justify-center p-1.5 shadow-lg group-hover:scale-105 transition-transform",children:s.jsx("img",{src:"/logo-tvsa.png",alt:"TU",className:"w-full h-full object-contain brightness-0 invert"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-enterprise-950 font-black text-[14px] sm:text-[16px] tracking-tighter leading-none uppercase italic",children:["Commercial ",s.jsx("span",{className:"text-brand-orange not-italic",children:"Suite"})]}),s.jsx("span",{className:"text-enterprise-500 text-[8px] font-black uppercase tracking-widest hidden lg:block",children:ol.ORGANIZATION})]})]}),s.jsx("div",{className:"hidden lg:flex items-center gap-1 xl:gap-2 ml-4",children:l.map(f=>s.jsxs("button",{onClick:()=>r(f.id),className:`px-2 xl:px-3 h-10 rounded-xl text-[10px] font-black uppercase tracking-tight transition-all flex items-center gap-2 group whitespace-nowrap
                                    ${d(f.id)?"text-enterprise-950 bg-enterprise-50/80 shadow-sm":"text-enterprise-500 hover:text-enterprise-950 hover:bg-enterprise-50/50"}`,children:[s.jsx(f.icon,{size:15,className:d(f.id)?"text-brand-orange":"text-enterprise-400 group-hover:text-brand-orange transition-colors"}),s.jsx("span",{children:f.label})]},f.id))}),s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 ml-auto",children:[s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 bg-enterprise-50/40 p-1 rounded-2xl border border-enterprise-100/50",children:[s.jsx(h,{id:"dashboard",icon:Ji,label:"Dashboard"}),s.jsx(h,{id:"reportes",icon:Xs,label:"Reportes"}),s.jsx(h,{id:"administracion",icon:Va,label:"Administracin"}),s.jsx(h,{id:"logout",icon:Hd,label:"Log Out",onClick:c})]}),s.jsx("button",{onClick:()=>i(!0),className:"lg:hidden w-10 h-10 sm:w-11 sm:h-11 flex items-center justify-center bg-enterprise-950 text-white rounded-xl shadow-lg hover:shadow-brand-orange/30 active:scale-95 transition-all",children:s.jsx(Wv,{size:22})})]})]})]}),a&&s.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#111111] text-white flex flex-col h-[100dvh] w-screen animate-in fade-in duration-300",children:[s.jsxs("header",{className:"h-14 flex items-center justify-between px-6 border-b border-white/5 bg-black/40 backdrop-blur-xl flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx(h,{id:"dashboard",icon:Ji,label:"D",onClick:()=>{r("dashboard"),i(!1)},className:"bg-white/5 w-9 h-9"}),s.jsx(h,{id:"reportes",icon:Xs,label:"R",onClick:()=>{r("reportes"),i(!1)},className:"bg-white/5 w-9 h-9"}),s.jsx(h,{id:"administracion",icon:Va,label:"A",onClick:()=>{r("administracion"),i(!1)},className:"bg-white/5 w-9 h-9"}),s.jsx(h,{id:"logout",icon:Hd,label:"E",onClick:()=>{c(),i(!1)},className:"bg-white/5 w-9 h-9"})]}),s.jsx("button",{onClick:()=>i(!1),className:"w-10 h-10 flex items-center justify-center bg-brand-orange rounded-xl shadow-lg",children:s.jsx($t,{size:20})})]}),s.jsxs("main",{className:"flex-1 flex flex-col justify-center px-6 py-4 space-y-1.5 overflow-hidden",children:[s.jsx("p",{className:"text-[8px] font-black text-white/20 uppercase tracking-[0.4em] mb-2 text-center",children:"Executive Intelligence Menu"}),[{id:"dashboard",label:"Dashboard",icon:Ji},...l,{id:"reportes",label:"Reportes",icon:Xs}].map(f=>s.jsxs("button",{onClick:()=>{r(f.id),i(!1)},className:`w-full flex items-center justify-between px-5 py-2.5 rounded-xl transition-all border group
                                    ${d(f.id)?"bg-brand-orange border-brand-orange text-white":"bg-white/5 border-white/10 text-white/50 hover:bg-white/10"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${d(f.id)?"bg-white/20":"bg-brand-orange/10"}`,children:s.jsx(f.icon,{size:18,className:d(f.id)?"text-white":"text-brand-orange"})}),s.jsx("span",{className:"font-black uppercase tracking-[0.1em] text-[10px] sm:text-[11px]",children:f.label})]}),s.jsx(ar,{size:14,className:"opacity-20"})]},f.id))]}),s.jsxs("footer",{className:"p-4 border-t border-white/5 bg-black/20 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-7 h-7 bg-brand-orange/20 rounded-lg flex items-center justify-center text-brand-orange",children:s.jsx(Tr,{size:14})}),s.jsx("span",{className:"text-[9px] font-black uppercase text-white/30 truncate max-w-[100px]",children:o.split("@")[0]})]}),s.jsx("span",{className:"text-[7px] font-bold text-white/20 uppercase tracking-widest italic",children:ol.FULL_VERSION_LABEL})]})]})]})},ly=({tipo:e,texto:t,setMensaje:r})=>{if(P.useEffect(()=>{if(t&&e!=="cargando"){const o=setTimeout(()=>{r({tipo:"",texto:""})},4e3);return()=>clearTimeout(o)}},[t,e,r]),!t)return null;let n,a,i;switch(e){case"exito":a="bg-emerald-500",i="shadow-emerald-500/20",n=s.jsx(sl,{size:24,className:"text-white"});break;case"error":a="bg-red-600",i="shadow-red-600/20",n=s.jsx(jt,{size:24,className:"text-white"});break;case"cargando":a="bg-slate-900",i="shadow-slate-900/20",n=s.jsx(At,{className:"animate-spin text-white",size:24});break;default:a="bg-slate-700",i="shadow-slate-700/20",n=s.jsx(jt,{size:24,className:"text-white"})}return s.jsxs("div",{className:"fixed inset-0 z-[999] flex items-end justify-center sm:items-center p-4 sm:p-6 pointer-events-none animate-in fade-in duration-300",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/10 backdrop-blur-[2px] pointer-events-auto",onClick:()=>r({tipo:"",texto:""})}),s.jsxs("div",{className:`
                relative w-full max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden pointer-events-auto
                ${i} animate-in slide-in-from-bottom-10 sm:slide-in-from-bottom-4 duration-500
            `,children:[s.jsxs("div",{className:"flex items-center p-5 gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-12 h-12 ${a} rounded-2xl flex items-center justify-center shadow-lg`,children:n}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-0.5",children:"Notificacin"}),s.jsx("p",{className:"text-sm font-black text-slate-800 leading-tight",children:t})]}),s.jsx("button",{onClick:()=>r({tipo:"",texto:""}),className:"flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-400 transition-colors",children:s.jsx($t,{size:18})})]}),e!=="cargando"&&s.jsx("div",{className:"h-1 w-full bg-gray-50",children:s.jsx("div",{className:`h-full ${a} animate-toast-progress`})})]}),s.jsx("style",{dangerouslySetInnerHTML:{__html:`
                @keyframes toast-progress {
                    from { width: 100%; }
                    to { width: 0%; }
                }
                .animate-toast-progress {
                    animation: toast-progress 4s linear forwards;
                }
            `}})]})},cy=()=>{const[e,t]=P.useState(null),[r,n]=P.useState(!0),[a,i]=P.useState("dashboard"),[o,l]=P.useState(null);P.useEffect(()=>{re.auth.getSession().then(({data:{session:H}})=>{t(H),n(!1)});const{data:{subscription:$}}=re.auth.onAuthStateChange((H,K)=>{t(K)});return()=>$.unsubscribe()},[]);const c=async()=>{try{const{error:$}=await re.auth.signOut();if($)throw $;t(null),i("dashboard")}catch($){console.error("Error al cerrar sesin:",$)}},d=Bg(e),h=Wg(d),{cargarDatos:x,guardarRegistro:f,eliminarRegistro:v,limpiarTabla:g,mensajeAdmin:w,setMensajeAdmin:k,configuracion:m,masterContracts:u,historial:p,clientes:j,productos:_,condicionesCliente:b,paquetesVIX:y,metasComerciales:N}=d,[S,T]=P.useState([]),{setCotizacionResult:O,setHistorial:C,setComparar:L,iniciarNuevaCotizacion:B}=h,R=Ga.useMemo(()=>p?p.map($=>{var H;try{if(!$.id)return null;const K=typeof $.json_detalles=="string"?JSON.parse($.json_detalles):$.json_detalles||{},Q=(j||[]).find(me=>String(me.id)===String($.cliente_id)),ue=y.find(me=>me.id===$.paquete_vix_id)||{nombre:"Ninguno",inversion:0};return{...$,fecha:$.created_at?new Date($.created_at):new Date,cliente:Q||{nombre_empresa:"Externo",plaza:"Externa",id:"EXT"},total:parseFloat($.monto_total)||0,subtotalGeneral:K.subtotalGeneral||(parseFloat(K.subtotal_tv)||0)+(parseFloat(K.costo_vix)||0)||parseFloat($.monto_total)/1.16,items:K.items||[],distribucion:K.distribucion||[],paqueteVIX:K.paqueteVIX||ue,costoVIX:K.costoVIX||((H=K.paqueteVIX)==null?void 0:H.inversion)||0,presupuestoBase:K.presupuestoBase||$.monto_total}}catch(K){return console.error("Error formatting history row:",$,K),null}}).filter(Boolean):[],[p,j,y]);if(P.useEffect(()=>{C(R)},[R,C]),r)return s.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-12 border-4 border-red-600 border-t-transparent rounded-full animate-spin"})});if(!e)return s.jsx(ry,{});if(d.loading&&j.length===0)return s.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[s.jsx("div",{className:"h-20 bg-white border-b border-enterprise-100 mb-10"}),s.jsx("main",{className:"flex-1 max-w-[1600px] w-full mx-auto px-6",children:s.jsx(Vb,{})})]});const E=$=>{Hg($,d.configuracion)},U=$=>{T(H=>H.some(K=>K.id===$.id)?H:[...H,$]),k({tipo:"exito",texto:"Aadido al comparador"})},A=async $=>{await d.eliminarRegistro("cotizaciones",$)&&k({tipo:"exito",texto:"Registro eliminado correctamente"})},z=$=>{l($),i("ficha-cliente")},D=()=>{switch(a){case"administracion":return s.jsx(Zb,{setVistaActual:i,mensajeAdmin:w,setMensajeAdmin:k,guardarRegistro:f,eliminarRegistro:v,clientes:j,productos:_,condicionesCliente:b,configuracion:m,cobranza:d.cobranza,historial:R,metasComerciales:N,perfil:d.perfil,perfiles:d.perfiles,limpiarTabla:g,masterContracts:u,calcularPrecioUnitario:h.calcularPrecioUnitario,onLogout:c});case"lista-precios":return s.jsx(Op,{setVistaActual:i,clientes:j,productos:_,calcularPrecioUnitario:h.calcularPrecioUnitario});case"historial":return s.jsx(ey,{historial:R,setVistaActual:i,setCotizacion:O,agregarAComparador:U,mostrarPropuesta:E,eliminarCotizacion:A,onSaveQuote:f,setMensaje:k,masterContracts:u});case"comparar":return s.jsx(ty,{comparar:S,setVistaActual:i,setComparar:T,mostrarPropuesta:E});case"cotizador":return s.jsx(Wb,{data:d,cotizacionState:h,setVistaActual:i,iniciarNuevaCotizacion:B,configuracion:m,mostrarPropuesta:E,guardarCotizacion:f,agregarAComparador:U,mensajeAdmin:w,setMensajeAdmin:k,onSaveClient:f});case"dashboard":return s.jsx(qd,{historial:R,clientes:j,cobranza:d.cobranza,metasComerciales:N,setVistaActual:i,actualizarDashboard:x,iniciarNuevaCotizacion:()=>{B(),i("cotizador")}});case"cobranza":return s.jsx(Rp,{cobranza:d.cobranza,onSave:f,setMensaje:k});case"crm":return s.jsx(sy,{clientes:j,onSelectClient:z,onAddNewClient:()=>i("administracion")});case"ficha-cliente":return s.jsx(ny,{cliente:o,cotizaciones:R.filter($=>String($.cliente_id)===String(o==null?void 0:o.id)),masterContracts:u.filter($=>String($.cliente_id)===String(o==null?void 0:o.id)),onBack:()=>i("crm"),onSaveClient:f,onNewQuote:()=>{B(),h.setClienteSeleccionado(o),i("cotizador")},onViewQuote:$=>{O($),i("cotizador")},onPrintQuote:E,setMensaje:k});case"master-contracts":return s.jsx(ay,{masterContracts:u,clientes:j,cotizaciones:R,cobranza:d.cobranza,onSaveMC:f,onSaveQuote:f,setMensaje:k});case"reportes":return s.jsx(iy,{cotizaciones:R,metas:N,clientes:j,cobranza:d.cobranza,masterContracts:u});default:return s.jsx(qd,{historial:R,clientes:j,setVistaActual:i})}};return s.jsxs("div",{className:"min-h-screen bg-enterprise-50 flex flex-col font-sans selection:bg-brand-orange/10 selection:text-brand-orange",children:[s.jsx(oy,{setVistaActual:i,vistaActual:a,session:e,onLogout:c,onNuevaCotizacion:()=>{B(),i("cotizador")}}),s.jsx("main",{className:"flex-1 pt-24 pb-20 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-[1600px] mx-auto",children:D()})}),s.jsx("footer",{className:"bg-enterprise-950 py-12 px-6 text-white border-t border-white/5 mt-auto",children:s.jsxs("div",{className:"max-w-[1600px] mx-auto flex flex-col md:flex-row justify-between items-center gap-10",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-brand-orange rounded-xl flex items-center justify-center text-[12px] font-black text-white uppercase italic shadow-lg shadow-brand-orange/20 rotate-3 transition-transform hover:rotate-0",children:"TU"}),s.jsxs("p",{className:"text-sm font-black text-white uppercase tracking-tighter",children:["TELEVISA UNIVISION ",s.jsx("span",{className:"text-brand-orange",children:"MID"})]})]}),s.jsx("div",{className:"hidden md:block h-6 w-px bg-white/10"}),s.jsxs("p",{className:"text-[10px] font-bold text-white/50 uppercase tracking-[0.4em]",children:["Executive Platform ",s.jsx("span",{className:"text-white/70",children:" 2025"})]})]}),s.jsxs("div",{className:"flex items-center gap-10",children:[s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-black text-white/40 uppercase tracking-[0.3em] mb-1",children:"Architecture"}),s.jsx("p",{className:"text-[10px] font-black text-white/70 uppercase tracking-widest",children:"Roger A Montejo"})]}),s.jsx("div",{className:"h-8 w-px bg-white/10"}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-black text-white/40 uppercase tracking-[0.3em] mb-1",children:"Deployment"}),s.jsx("p",{className:"text-[10px] font-black text-white uppercase tracking-widest",children:"V25.1.0  MID-TU"})]})]})]})}),s.jsx(ly,{tipo:w.tipo,texto:w.texto,setMensaje:k})]})};Yi.createRoot(document.getElementById("root")).render(s.jsxs(Ga.StrictMode,{children:[s.jsx(cy,{})," "]}));
